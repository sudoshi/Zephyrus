import{r as o,R as q,j as e,P as d,u as Re,L as Ee,$ as Ie}from"./app-DNCPaP7U.js";import{D as Oe}from"./DashboardLayout-BfUOEmbm.js";import{P as Ae}from"./PageContentLayout-DDKRpoW7.js";import{u as he}from"./useDarkMode-Cjnn_MHf.js";import{I as N}from"./iconify-CuDxMG-b.js";import{D as fe}from"./DarkModeToggle-oH18ZJvw.js";import{S as be}from"./cases-WZ7qXQk7.js";import{D as re}from"./DateRangeSelector-CcO1_bsw.js";import{m as xe,D as Fe}from"./data-service-BqqKZjIb.js";import{C as g}from"./Card-Bb1H85Wn.js";import{R as qe,L as ze,C as Me,X as Le,Y as Ue,T as Be,a as Ke,b as Ge}from"./LineChart-BiJvPHt8.js";import{s as He}from"./chunk-XJ3PDX4B-DiREd1A_.js";import{B as Qe}from"./BlockUtilizationDashboard-Cit-bsnc.js";import{$ as ye,a as We,w as Ve,e as Ye}from"./TopNavigation-BPEMQkzy.js";import{f as Xe,O as ge,K as G,s as V,y as H,o as z,n as Z,L as Q,_ as ve,u as K,t as Je}from"./transition-l3QoJGEh.js";import{f as je,s as Ze}from"./hidden-BGYz94zY.js";import{_ as B,T as Y,u as et,o as $,P as M,F as P}from"./portal-B_iHtz37.js";import"./room-status-CiRoKIFm.js";import"./clsx-B-dksMZM.js";import"./_baseAssignValue-CSgy8S_V.js";import"./find-CT4xMDYu.js";import"./create-factory-CkrcLOT8.js";import"./index-BILkJVdl.js";import"./HierarchicalFilters-D21C3-_q.js";import"./ToggleSwitch-wWvkbsAB.js";import"./uniqueId-S-XtUeLk.js";import"./format-D9ti-yNI.js";import"./filter-CKwhiPJ7.js";import"./createLucideIcon-Ce72M_cX.js";import"./chevron-down-h_OS1dfS.js";import"./calendar-CYnYG7qc.js";import"./x-DW-vgWTY.js";import"./ErrorBoundary-ti8iig1M.js";import"./PieChart-DNJdnlhf.js";import"./AuthenticatedLayout-bVzRFQ8r.js";import"./Panel-DEM8HheS.js";import"./proxy-nweJ2GES.js";import"./create-visual-element-BEDpu-j8.js";import"./UserAvatar-DdRArJVQ.js";import"./useFocusVisible-KZXt4Cm4.js";function tt({onFocus:t}){let[r,s]=o.useState(!0),a=Xe();return r?q.createElement(je,{as:"button",type:"button",features:Ze.Focusable,onFocus:n=>{n.preventDefault();let i,m=50;function c(){if(m--<=0){i&&cancelAnimationFrame(i);return}if(t()){if(cancelAnimationFrame(i),!a.current)return;s(!1);return}i=requestAnimationFrame(c)}i=requestAnimationFrame(c)}}):null}const Te=o.createContext(null);function rt(){return{groups:new Map,get(t,r){var s;let a=this.groups.get(t);a||(a=new Map,this.groups.set(t,a));let n=(s=a.get(r))!=null?s:0;a.set(r,n+1);let i=Array.from(a.keys()).indexOf(r);function m(){let c=a.get(r);c>1?a.set(r,c-1):a.delete(r)}return[i,m]}}}function st({children:t}){let r=o.useRef(rt());return o.createElement(Te.Provider,{value:r},t)}function Se(t){let r=o.useContext(Te);if(!r)throw new Error("You must wrap your component in a <StableCollection>");let s=o.useId(),[a,n]=r.current.get(t,s);return o.useEffect(()=>n,[]),a}var at=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(at||{}),nt=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(nt||{}),it=(t=>(t[t.SetSelectedIndex=0]="SetSelectedIndex",t[t.RegisterTab=1]="RegisterTab",t[t.UnregisterTab=2]="UnregisterTab",t[t.RegisterPanel=3]="RegisterPanel",t[t.UnregisterPanel=4]="UnregisterPanel",t))(it||{});let ot={0(t,r){var s;let a=B(t.tabs,p=>p.current),n=B(t.panels,p=>p.current),i=a.filter(p=>{var l;return!((l=p.current)!=null&&l.hasAttribute("disabled"))}),m={...t,tabs:a,panels:n};if(r.index<0||r.index>a.length-1){let p=K(Math.sign(r.index-t.selectedIndex),{[-1]:()=>1,0:()=>K(Math.sign(r.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(i.length===0)return m;let l=K(p,{0:()=>a.indexOf(i[0]),1:()=>a.indexOf(i[i.length-1])});return{...m,selectedIndex:l===-1?t.selectedIndex:l}}let c=a.slice(0,r.index),u=[...a.slice(r.index),...c].find(p=>i.includes(p));if(!u)return m;let h=(s=a.indexOf(u))!=null?s:t.selectedIndex;return h===-1&&(h=t.selectedIndex),{...m,selectedIndex:h}},1(t,r){if(t.tabs.includes(r.tab))return t;let s=t.tabs[t.selectedIndex],a=B([...t.tabs,r.tab],i=>i.current),n=t.selectedIndex;return t.info.current.isControlled||(n=a.indexOf(s),n===-1&&(n=t.selectedIndex)),{...t,tabs:a,selectedIndex:n}},2(t,r){return{...t,tabs:t.tabs.filter(s=>s!==r.tab)}},3(t,r){return t.panels.includes(r.panel)?t:{...t,panels:B([...t.panels,r.panel],s=>s.current)}},4(t,r){return{...t,panels:t.panels.filter(s=>s!==r.panel)}}},se=o.createContext(null);se.displayName="TabsDataContext";function L(t){let r=o.useContext(se);if(r===null){let s=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,L),s}return r}let ae=o.createContext(null);ae.displayName="TabsActionsContext";function ne(t){let r=o.useContext(ae);if(r===null){let s=new Error(`<${t} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ne),s}return r}function lt(t,r){return K(r.type,ot,t,r)}let ct="div";function dt(t,r){let{defaultIndex:s=0,vertical:a=!1,manual:n=!1,onChange:i,selectedIndex:m=null,...c}=t;const u=a?"vertical":"horizontal",h=n?"manual":"auto";let p=m!==null,l=V({isControlled:p}),v=H(r),[x,f]=o.useReducer(lt,{info:l,selectedIndex:m??s,tabs:[],panels:[]}),S=o.useMemo(()=>({selectedIndex:x.selectedIndex}),[x.selectedIndex]),R=V(i||(()=>{})),D=V(x.tabs),y=o.useMemo(()=>({orientation:u,activation:h,...x}),[u,h,x]),T=z(j=>(f({type:1,tab:j}),()=>f({type:2,tab:j}))),w=z(j=>(f({type:3,panel:j}),()=>f({type:4,panel:j}))),_=z(j=>{C.current!==j&&R.current(j),p||f({type:0,index:j})}),C=V(p?t.selectedIndex:x.selectedIndex),A=o.useMemo(()=>({registerTab:T,registerPanel:w,change:_}),[]);Z(()=>{f({type:0,index:m??s})},[m]),Z(()=>{if(C.current===void 0||x.tabs.length<=0)return;let j=B(x.tabs,E=>E.current);j.some((E,F)=>x.tabs[F]!==E)&&_(j.indexOf(x.tabs[C.current]))});let te={ref:v},U=Q();return q.createElement(st,null,q.createElement(ae.Provider,{value:A},q.createElement(se.Provider,{value:y},y.tabs.length<=0&&q.createElement(tt,{onFocus:()=>{var j,E;for(let F of D.current)if(((j=F.current)==null?void 0:j.tabIndex)===0)return(E=F.current)==null||E.focus(),!0;return!1}}),U({ourProps:te,theirProps:c,slot:S,defaultTag:ct,name:"Tabs"}))))}let ut="div";function mt(t,r){let{orientation:s,selectedIndex:a}=L("Tab.List"),n=H(r),i=o.useMemo(()=>({selectedIndex:a}),[a]),m=t,c={ref:n,role:"tablist","aria-orientation":s};return Q()({ourProps:c,theirProps:m,slot:i,defaultTag:ut,name:"Tabs.List"})}let xt="button";function gt(t,r){var s,a;let n=o.useId(),{id:i=`headlessui-tabs-tab-${n}`,disabled:m=!1,autoFocus:c=!1,...u}=t,{orientation:h,activation:p,selectedIndex:l,tabs:v,panels:x}=L("Tab"),f=ne("Tab"),S=L("Tab"),[R,D]=o.useState(null),y=o.useRef(null),T=H(y,r,D);Z(()=>f.registerTab(y),[f,y]);let w=Se("tabs"),_=v.indexOf(y);_===-1&&(_=w);let C=_===l,A=z(b=>{var k;let W=b();if(W===Y.Success&&p==="auto"){let Pe=(k=et(y))==null?void 0:k.activeElement,me=S.tabs.findIndex(ke=>ke.current===Pe);me!==-1&&f.change(me)}return W}),te=z(b=>{let k=v.map(W=>W.current).filter(Boolean);if(b.key===$.Space||b.key===$.Enter){b.preventDefault(),b.stopPropagation(),f.change(_);return}switch(b.key){case $.Home:case $.PageUp:return b.preventDefault(),b.stopPropagation(),A(()=>M(k,P.First));case $.End:case $.PageDown:return b.preventDefault(),b.stopPropagation(),A(()=>M(k,P.Last))}if(A(()=>K(h,{vertical(){return b.key===$.ArrowUp?M(k,P.Previous|P.WrapAround):b.key===$.ArrowDown?M(k,P.Next|P.WrapAround):Y.Error},horizontal(){return b.key===$.ArrowLeft?M(k,P.Previous|P.WrapAround):b.key===$.ArrowRight?M(k,P.Next|P.WrapAround):Y.Error}}))===Y.Success)return b.preventDefault()}),U=o.useRef(!1),j=z(()=>{var b;U.current||(U.current=!0,(b=y.current)==null||b.focus({preventScroll:!0}),f.change(_),Je(()=>{U.current=!1}))}),E=z(b=>{b.preventDefault()}),{isFocusVisible:F,focusProps:Ne}=ye({autoFocus:c}),{isHovered:de,hoverProps:De}=We({isDisabled:m}),{pressed:ue,pressProps:_e}=Ve({disabled:m}),Ce=o.useMemo(()=>({selected:C,hover:de,active:ue,focus:F,autofocus:c,disabled:m}),[C,de,F,ue,c,m]),$e=ve({ref:T,onKeyDown:te,onMouseDown:E,onClick:j,id:i,role:"tab",type:Ye(t,R),"aria-controls":(a=(s=x[_])==null?void 0:s.current)==null?void 0:a.id,"aria-selected":C,tabIndex:C?0:-1,disabled:m||void 0,autoFocus:c},Ne,De,_e);return Q()({ourProps:$e,theirProps:u,slot:Ce,defaultTag:xt,name:"Tabs.Tab"})}let pt="div";function ht(t,r){let{selectedIndex:s}=L("Tab.Panels"),a=H(r),n=o.useMemo(()=>({selectedIndex:s}),[s]),i=t,m={ref:a};return Q()({ourProps:m,theirProps:i,slot:n,defaultTag:pt,name:"Tabs.Panels"})}let ft="div",bt=ge.RenderStrategy|ge.Static;function yt(t,r){var s,a,n,i;let m=o.useId(),{id:c=`headlessui-tabs-panel-${m}`,tabIndex:u=0,...h}=t,{selectedIndex:p,tabs:l,panels:v}=L("Tab.Panel"),x=ne("Tab.Panel"),f=o.useRef(null),S=H(f,r);Z(()=>x.registerPanel(f),[x,f]);let R=Se("panels"),D=v.indexOf(f);D===-1&&(D=R);let y=D===p,{isFocusVisible:T,focusProps:w}=ye(),_=o.useMemo(()=>({selected:y,focus:T}),[y,T]),C=ve({ref:S,id:c,role:"tabpanel","aria-labelledby":(a=(s=l[D])==null?void 0:s.current)==null?void 0:a.id,tabIndex:y?u:-1},w),A=Q();return!y&&((n=h.unmount)==null||n)&&!((i=h.static)!=null&&i)?q.createElement(je,{"aria-hidden":"true",...C}):A({ourProps:C,theirProps:h,slot:_,defaultTag:ft,features:bt,visible:y,name:"Tabs.Panel"})}let vt=G(gt),jt=G(dt),Tt=G(mt),St=G(ht),wt=G(yt),I=Object.assign(vt,{Group:jt,List:Tt,Panels:St,Panel:wt});class ie extends q.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error("Error caught by boundary:",r,s)}render(){var r;return this.state.hasError?e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-sm text-red-600",children:((r=this.state.error)==null?void 0:r.message)||"An unexpected error occurred"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 text-sm font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200",children:"Try again"})]}):this.props.children}}const Nt=()=>{const t=[{service_id:1,service_name:"Orthopedics",case_count:245,avg_utilization:85.3,avg_turnover:28.5,on_time_start_percentage:87.5,avg_duration:120},{service_id:2,service_name:"General Surgery",case_count:312,avg_utilization:83.1,avg_turnover:25.8,on_time_start_percentage:84.2,avg_duration:95},{service_id:3,service_name:"Cardiology",case_count:178,avg_utilization:81.9,avg_turnover:29.1,on_time_start_percentage:86.1,avg_duration:150},{service_id:4,service_name:"Neurosurgery",case_count:156,avg_utilization:79.4,avg_turnover:26.7,on_time_start_percentage:83,avg_duration:180},{service_id:5,service_name:"ENT",case_count:289,avg_utilization:78.6,avg_turnover:24.3,on_time_start_percentage:88.5,avg_duration:75}],r=[];for(let n=0;n<30;n++){const i=new Date;i.setDate(i.getDate()-(29-n)),r.push({date:i.toISOString().split("T")[0],utilization:Math.floor(Math.random()*20)+70,case_count:Math.floor(Math.random()*15)+10})}const s={average_utilization:t.reduce((n,i)=>n+i.avg_utilization,0)/t.length,total_cases:t.reduce((n,i)=>n+i.case_count,0),average_turnover:t.reduce((n,i)=>n+i.avg_turnover,0)/t.length};return{sites:{"Default Site":{services:t,totals:s}},trends:r}},pe=Nt(),oe=({title:t,value:r,trend:s,icon:a,color:n,isDarkMode:i})=>e.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 flex items-center space-x-4`,children:[e.jsx("div",{className:`p-3 rounded-lg ${n}`,children:e.jsx(N,{icon:a,className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-medium ${i?"text-gray-400":"text-gray-500"}`,children:t}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("p",{className:`text-2xl font-bold ${i?"text-gray-100":"text-gray-900"}`,children:r}),s&&e.jsxs("span",{className:`ml-2 flex items-center text-sm ${s>0?"text-green-600":"text-red-600"}`,children:[e.jsx(N,{icon:s>0?"heroicons:arrow-up":"heroicons:arrow-down",className:"w-4 h-4 mr-1"}),Math.abs(s),"%"]})]})]})]}),ee=({metrics:t,isDarkMode:r=!1})=>{const s=[{title:"Overall Block Utilization",value:`${t.overallUtilization.toFixed(1)}%`,trend:t.utilizationTrend,icon:"heroicons:clock",color:r?"bg-blue-500":"bg-blue-600"},{title:"Prime Time Usage",value:`${t.primeTimeUsage.toFixed(1)}%`,trend:t.primeTimeTrend,icon:"heroicons:sun",color:r?"bg-amber-500":"bg-amber-600"},{title:"Total Cases",value:t.totalCases,trend:t.casesTrend,icon:"heroicons:user-group",color:r?"bg-green-500":"bg-green-600"},{title:"Out of Block Cases",value:t.outOfBlockCases,trend:t.outOfBlockTrend,icon:"heroicons:exclamation-triangle",color:r?"bg-red-500":"bg-red-600"}];return e.jsx("div",{className:"grid grid-cols-4 gap-4",children:s.map(a=>e.jsx(oe,{...a,isDarkMode:r},a.title))})};oe.propTypes={title:d.string.isRequired,value:d.oneOfType([d.string,d.number]).isRequired,trend:d.number,icon:d.string.isRequired,color:d.string.isRequired,isDarkMode:d.bool};oe.defaultProps={trend:null,isDarkMode:!1};ee.propTypes={metrics:d.shape({overallUtilization:d.number.isRequired,utilizationTrend:d.number.isRequired,primeTimeUsage:d.number.isRequired,primeTimeTrend:d.number.isRequired,totalCases:d.number.isRequired,casesTrend:d.number.isRequired,outOfBlockCases:d.number.isRequired,outOfBlockTrend:d.number.isRequired}).isRequired,isDarkMode:d.bool};ee.defaultProps={isDarkMode:!1};const le=()=>{const[t,r]=he(),[s,a]=o.useState("Default Site"),[n,i]=o.useState({start:"2025-01-01",end:"2025-01-31"}),[m,c]=o.useState(null),[u,h]=o.useState({overallUtilization:0,utilizationTrend:0,primeTimeUsage:0,primeTimeTrend:0,totalCases:0,casesTrend:0,outOfBlockCases:0,outOfBlockTrend:0}),p=Object.keys(pe.sites),l=pe.sites[s]||{services:[],totals:{average_utilization:0,total_cases:0,average_turnover:0}};o.useEffect(()=>{l!=null&&l.totals&&h({overallUtilization:l.totals.average_utilization||0,utilizationTrend:2.5,primeTimeUsage:l.totals.average_turnover||0,primeTimeTrend:-1.5,totalCases:l.totals.total_cases||0,casesTrend:3.2,outOfBlockCases:0,outOfBlockTrend:0})},[l==null?void 0:l.totals]);const v=x=>{const f=new Date,S=new Date;S.setDate(S.getDate()-x),c(x),i({start:S.toISOString().split("T")[0],end:f.toISOString().split("T")[0]})};return e.jsx("div",{className:`flex min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("main",{className:"flex-1",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Service Analytics Overview"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(be,{value:s,onChange:a,options:p.map(x=>({value:x,label:x})),className:"w-48"}),e.jsx("div",{className:"flex space-x-2",children:[7,30,90].map(x=>e.jsx("button",{onClick:()=>v(x),className:`px-3 py-2 text-sm font-medium rounded-md ${m===x?t?"bg-indigo-600 text-white":"bg-indigo-100 text-indigo-700":t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-200"}`,children:`${x}D`},x))}),e.jsx(re,{startDate:n.start,endDate:n.end,onDateRangeChange:x=>{c(null),i(x)}}),e.jsx(fe,{isDarkMode:t,onToggle:()=>r(!t)}),e.jsxs("button",{type:"button",className:`inline-flex items-center px-3 py-2 text-sm font-medium rounded-md ${t?"text-gray-300 bg-gray-700 border-gray-600 hover:bg-gray-600":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50"} border`,children:[e.jsx(N,{icon:"heroicons:cog-6-tooth",className:"w-5 h-5 mr-2"}),"Settings"]}),e.jsxs("button",{type:"button",className:`inline-flex items-center px-3 py-2 text-sm font-medium text-white rounded-md ${t?"bg-indigo-500 hover:bg-indigo-600":"bg-indigo-600 hover:bg-indigo-700"}`,children:[e.jsx(N,{icon:"heroicons:document-arrow-down",className:"w-5 h-5 mr-2"}),"Export Report"]})]})]}),e.jsx(ie,{children:e.jsx(ee,{metrics:u,isDarkMode:t})})]})})})};le.propTypes={initialSite:d.string,initialDateRange:d.shape({start:d.string,end:d.string})};le.defaultProps={initialSite:"Default Site",initialDateRange:{start:"2025-01-01",end:"2025-01-31"}};const J=({label:t,days:r,onClick:s,isActive:a})=>e.jsx("button",{onClick:s,className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${a?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"}`,children:t}),we=({isCollapsed:t,onToggle:r,selectedSite:s,onSiteChange:a,dateRange:n,onDateRangeChange:i,sites:m,isDarkMode:c=!1})=>{const[u,h]=o.useState(null),p=l=>{const v=new Date,x=new Date;x.setDate(x.getDate()-l),h(l),i({start:x.toISOString().split("T")[0],end:v.toISOString().split("T")[0]})};return e.jsxs("div",{className:`
      fixed top-0 left-0 h-full shadow-lg transition-all duration-300
      ${t?"w-12":"w-64"}
      ${c?"bg-gray-800":"bg-white"}
      flex flex-col
    `,role:"complementary","aria-label":"Filters",children:[e.jsx("button",{onClick:r,className:`absolute -right-4 top-8 rounded-full p-2 shadow-md ${c?"bg-gray-700 text-gray-300":"bg-white text-gray-500"}`,"aria-label":t?"Expand sidebar":"Collapse sidebar","aria-expanded":!t,children:e.jsx(N,{icon:t?"heroicons:chevron-right":"heroicons:chevron-left",className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{className:`p-4 ${t?"hidden":""}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-6 ${c?"text-gray-100":"text-gray-900"}`,children:"Filters"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"Location"}),e.jsx(be,{value:s,onChange:a,options:m.map(l=>({value:l,label:l})),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"Date Range"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(J,{label:"7D",days:7,onClick:()=>p(7),isActive:u===7}),e.jsx(J,{label:"30D",days:30,onClick:()=>p(30),isActive:u===30}),e.jsx(J,{label:"90D",days:90,onClick:()=>p(90),isActive:u===90})]}),e.jsx(re,{startDate:n.start,endDate:n.end,onDateRangeChange:l=>{h(null),i(l)}})]})]}),e.jsxs("div",{className:`border-t ${c?"border-gray-700":"border-gray-200"} pt-6`,children:[e.jsx("h4",{className:`text-sm font-medium mb-2 ${c?"text-gray-300":"text-gray-700"}`,children:"Keyboard Shortcuts"}),e.jsxs("div",{className:`space-y-2 text-sm ${c?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Toggle Sidebar"}),e.jsx("kbd",{className:`px-2 py-1 rounded ${c?"bg-gray-700":"bg-gray-100"}`,children:"⌘ /"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Quick Filter"}),e.jsx("kbd",{className:`px-2 py-1 rounded ${c?"bg-gray-700":"bg-gray-100"}`,children:"⌘ F"})]})]})]})]})]})]})};J.propTypes={label:d.string.isRequired,days:d.number.isRequired,onClick:d.func.isRequired,isActive:d.bool.isRequired};we.propTypes={isDarkMode:d.bool,isCollapsed:d.bool.isRequired,onToggle:d.func.isRequired,selectedSite:d.string.isRequired,onSiteChange:d.func.isRequired,dateRange:d.shape({start:d.string.isRequired,end:d.string.isRequired}).isRequired,onDateRangeChange:d.func.isRequired,sites:d.arrayOf(d.string).isRequired};const ce=()=>{const[t,r]=he(),[s,a]=o.useState("Default Site"),[n,i]=o.useState({start:"2025-01-01",end:"2025-01-31"}),[m,c]=o.useState(!1),[u,h]=o.useState({averageCasesPerDay:0,casesTrend:0,onTimeStarts:0,onTimeTrend:0,averageDuration:0,durationTrend:0}),p=Object.keys(xe.sites),l=xe.sites[s]||{providers:[],totals:{average_cases_per_day:0,on_time_starts:0,average_duration:0}};return o.useEffect(()=>{l!=null&&l.totals&&h({averageCasesPerDay:l.totals.average_cases_per_day||0,casesTrend:2.5,onTimeStarts:l.totals.on_time_starts||0,onTimeTrend:3.2,averageDuration:l.totals.average_duration||0,durationTrend:-1.5})},[l==null?void 0:l.totals]),o.useEffect(()=>{const v=x=>{x.metaKey&&x.key==="/"&&(x.preventDefault(),c(f=>!f))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),e.jsxs("div",{className:`flex min-h-screen ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx(we,{isCollapsed:m,onToggle:()=>c(v=>!v),selectedSite:s,onSiteChange:a,dateRange:n,onDateRangeChange:i,sites:p,isDarkMode:t}),e.jsx("main",{className:`flex-1 transition-all duration-300 ${m?"ml-12":"ml-64"}`,children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Provider Analytics Overview"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{isDarkMode:t,onToggle:()=>r(!t)}),e.jsxs("button",{type:"button",className:`inline-flex items-center px-3 py-2 text-sm font-medium rounded-md ${t?"text-gray-300 bg-gray-700 border-gray-600 hover:bg-gray-600":"text-gray-700 bg-white border-gray-300 hover:bg-gray-50"} border`,children:[e.jsx(N,{icon:"heroicons:cog-6-tooth",className:"w-5 h-5 mr-2"}),"Settings"]}),e.jsxs("button",{type:"button",className:`inline-flex items-center px-3 py-2 text-sm font-medium text-white rounded-md ${t?"bg-indigo-500 hover:bg-indigo-600":"bg-indigo-600 hover:bg-indigo-700"}`,children:[e.jsx(N,{icon:"heroicons:document-arrow-down",className:"w-5 h-5 mr-2"}),"Export Report"]})]})]}),e.jsx(ie,{children:e.jsx(ee,{metrics:u,isDarkMode:t})})]})})]})};ce.propTypes={initialSite:d.string,initialDateRange:d.shape({start:d.string,end:d.string})};ce.defaultProps={initialSite:"Default Site",initialDateRange:{start:"2025-01-01",end:"2025-01-31"}};const X=({data:t,title:r,description:s,series:a,xAxis:n={dataKey:"date",type:"category",formatter:u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric"})},yAxis:i={formatter:u=>u},tooltip:m={formatter:u=>u},colors:c=["#4F46E5","#10B981","#F59E0B","#EF4444"]})=>e.jsxs(g,{children:[e.jsxs(g.Header,{children:[e.jsx(g.Title,{children:r}),s&&e.jsx(g.Description,{children:s})]}),e.jsx(g.Content,{children:e.jsx("div",{className:"h-[400px]",children:e.jsx(qe,{width:"100%",height:"100%",children:e.jsxs(ze,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Me,{strokeDasharray:"3 3"}),e.jsx(Le,{dataKey:n.dataKey,type:n.type,tickFormatter:n.formatter}),e.jsx(Ue,{tickFormatter:i.formatter}),e.jsx(Be,{formatter:m.formatter,labelFormatter:n.formatter}),a.length>1&&e.jsx(Ke,{}),a.map((u,h)=>e.jsx(Ge,{type:"monotone",dataKey:u.dataKey,name:u.name,stroke:c[h%c.length],strokeWidth:2,dot:!1,activeDot:{r:6}},u.dataKey))]})})})})]}),O={percentage:t=>`${Math.round(t)}%`,duration:t=>{const r=Math.floor(t/60),s=t%60;return r>0?`${r}h ${s}m`:`${s}m`},number:t=>t.toLocaleString(),currency:t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),date:t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),decimal:t=>Number(t).toFixed(1)},Dt=()=>{var S,R,D,y;const[t,r]=o.useState(new Date(Date.now()-31536e6).toISOString().split("T")[0]),[s,a]=o.useState(new Date().toISOString().split("T")[0]),[n,i]=o.useState(!0),[m,c]=o.useState(null),[u,h]=o.useState(null),{mode:p}=Re(),l=Fe.useDataService(),v=async()=>{try{l.setMode(p);const[T,w]=await Promise.all([l.getPerformanceMetrics(),l.getCapacityAnalysis()]);h({performance:T,capacity:w}),c(null)}catch(T){console.error("Error fetching historical trends:",T),c("Failed to load historical data")}finally{i(!1)}};o.useEffect(()=>{v()},[t,s]);const x=(T,w)=>{T==="start"?r(w):a(w)},f=(T,w)=>{r(T),a(w)};return n?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx(He,{size:"lg"})}):m?e.jsxs("div",{className:"p-6 text-center text-red-600",children:[e.jsx(N,{icon:"heroicons:exclamation-circle",className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:m})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{startDate:t,endDate:s,onDateChange:x,onQuickSelect:f}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(g,{children:[e.jsxs(g.Header,{children:[e.jsx(g.Title,{children:"Case Volume Trends"}),e.jsx(g.Description,{children:"Monthly case volumes over time"})]}),e.jsx(g.Content,{children:e.jsx(X,{data:((S=u==null?void 0:u.performance)==null?void 0:S.volume_trends)||[],series:[{dataKey:"total_cases",name:"Total Cases"}],yAxis:{formatter:O.number},tooltip:{formatter:O.number}})})]}),e.jsxs(g,{children:[e.jsxs(g.Header,{children:[e.jsx(g.Title,{children:"Utilization Trends"}),e.jsx(g.Description,{children:"Monthly OR utilization percentage"})]}),e.jsx(g.Content,{children:e.jsx(X,{data:((R=u==null?void 0:u.performance)==null?void 0:R.utilization_trends)||[],series:[{dataKey:"utilization",name:"Utilization %"}],yAxis:{formatter:O.percentage},tooltip:{formatter:O.percentage}})})]}),e.jsxs(g,{children:[e.jsxs(g.Header,{children:[e.jsx(g.Title,{children:"On-Time Performance"}),e.jsx(g.Description,{children:"Monthly on-time start percentage"})]}),e.jsx(g.Content,{children:e.jsx(X,{data:((D=u==null?void 0:u.performance)==null?void 0:D.ontime_trends)||[],series:[{dataKey:"on_time_percentage",name:"On-Time %"}],yAxis:{formatter:O.percentage},tooltip:{formatter:O.percentage}})})]}),e.jsxs(g,{children:[e.jsxs(g.Header,{children:[e.jsx(g.Title,{children:"Capacity Analysis"}),e.jsx(g.Description,{children:"Monthly room capacity and usage"})]}),e.jsx(g.Content,{children:e.jsx(X,{data:((y=u==null?void 0:u.capacity)==null?void 0:y.trends)||[],series:[{dataKey:"used_minutes",name:"Used Time"},{dataKey:"available_minutes",name:"Available Time"}],yAxis:{formatter:O.duration},tooltip:{formatter:O.duration},stacked:!0})})]})]})]})},xr=()=>{const[t,r]=o.useState("services"),s=[{id:"services",label:"Service Analytics",icon:"heroicons:building-office-2"},{id:"providers",label:"Provider Analytics",icon:"heroicons:user-group"},{id:"historical",label:"Historical Trends",icon:"heroicons:chart-bar"},{id:"block-utilization",label:"Block Utilization",icon:"heroicons:clock"}];return e.jsxs(Oe,{children:[e.jsx(Ee,{title:"Analytics - ZephyrusOR"}),e.jsx(ie,{children:e.jsxs(Ae,{title:"Analytics",subtitle:"Analyze OR performance and trends",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(Ie,{href:"/dashboard",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(N,{icon:"heroicons:arrow-left",className:"w-5 h-5 mr-2"}),"Back to Dashboard"]})})]}),e.jsx(g,{children:e.jsxs(I.Group,{selectedIndex:s.findIndex(a=>a.id===t),onChange:a=>r(s[a].id),children:[e.jsx(g.Header,{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(I.List,{className:"flex space-x-4",children:s.map(a=>e.jsx(I,{className:({selected:n})=>`px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ${n?"bg-indigo-50 text-indigo-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{icon:a.icon,className:"w-5 h-5"}),e.jsx("span",{children:a.label})]})},a.id))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>window.print(),children:[e.jsx(N,{icon:"heroicons:printer",className:"w-5 h-5 mr-2"}),"Print"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(N,{icon:"heroicons:arrow-down-tray",className:"w-5 h-5 mr-2"}),"Export"]})]})]})}),e.jsx(g.Content,{className:"p-0",children:e.jsxs(I.Panels,{className:"focus:outline-none",children:[e.jsx(I.Panel,{className:"p-6 focus:outline-none",children:e.jsx(le,{})}),e.jsx(I.Panel,{className:"p-6 focus:outline-none",children:e.jsx(ce,{})}),e.jsx(I.Panel,{className:"p-6 focus:outline-none",children:e.jsx(Dt,{})}),e.jsx(I.Panel,{className:"p-6 focus:outline-none",children:e.jsx(Qe,{})})]})})]})})]})})]})};export{xr as default};
