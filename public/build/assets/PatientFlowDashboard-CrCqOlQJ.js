import{r as P,P as ue,j as f,o as qa,g as Da,R as D}from"./app-DNCPaP7U.js";import{u as xl}from"./AnalyticsContext-DCNkK6OB.js";import{H as vl}from"./HierarchicalFilters-D21C3-_q.js";import{E as ji}from"./ErrorBoundary-ti8iig1M.js";import"./TabNavigation-CocRP9X6.js";import{P as oe}from"./Panel-DEM8HheS.js";import{I as Q}from"./iconify-CuDxMG-b.js";import{m as Ee}from"./proxy-nweJ2GES.js";import{r as za,j as La,k as bl,f as wl,h as $a,l as Va,m as Nl,n as _l,d as El,g as kl,i as Sl}from"./uniqueId-S-XtUeLk.js";import{bm as Xe,bn as Ci,bo as Ti,W as jl,bi as Cl,aO as Oa,J as It,bp as Tl,bq as Fa,b4 as Ba,ba as Rl,aX as Ha,b7 as Ua,aV as Al,bc as Ga,r as Wa,br as Ml,bs as Il,bk as Pl,a_ as ql,bb as Ya,aq as Dl,aM as zl,U as Xa,a9 as Ll,I as $l,aU as Za,bt as Ka,aP as Vl,aT as Ol,bd as Fl,F as Bl,bu as Hl}from"./_baseAssignValue-CSgy8S_V.js";import{b as Ul,g as Qa,j as Gl,i as Wl,e as Yl,f as Xl,c as Zl,h as Kl}from"./find-CT4xMDYu.js";import{r as Ql}from"./minBy-Cw0Xx7RL.js";import{A as Jl}from"./index-BILkJVdl.js";var Ri=180/Math.PI,Hr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ja(e,t,n,r,i,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ri,skewX:Math.atan(l)*Ri,scaleX:s,scaleY:o}}var Dt;function eu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Hr:Ja(t.a,t.b,t.c,t.d,t.e,t.f)}function tu(e){return e==null||(Dt||(Dt=document.createElementNS("http://www.w3.org/2000/svg","g")),Dt.setAttribute("transform",e),!(e=Dt.transform.baseVal.consolidate()))?Hr:(e=e.matrix,Ja(e.a,e.b,e.c,e.d,e.e,e.f))}function eo(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,d,h,m,w){if(u!==d||c!==h){var p=m.push("translate(",null,t,null,n);w.push({i:p-4,x:Xe(u,d)},{i:p-2,x:Xe(c,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function s(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Xe(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function o(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Xe(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,h,m,w){if(u!==d||c!==h){var p=m.push(i(m)+"scale(",null,",",null,")");w.push({i:p-4,x:Xe(u,d)},{i:p-2,x:Xe(c,h)})}else(d!==1||h!==1)&&m.push(i(m)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,d,h),s(u.rotate,c.rotate,d,h),o(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(m){for(var w=-1,p=h.length,x;++w<p;)d[(x=h[w]).i]=x.x(m);return d.join("")}}}var nu=eo(eu,"px, ","px)","deg)"),ru=eo(tu,", ",")",")"),iu=1e-12;function Ai(e){return((e=Math.exp(e))+1/e)/2}function su(e){return((e=Math.exp(e))-1/e)/2}function au(e){return((e=Math.exp(2*e))-1)/(e+1)}const ou=function e(t,n,r){function i(a,s){var o=a[0],l=a[1],u=a[2],c=s[0],d=s[1],h=s[2],m=c-o,w=d-l,p=m*m+w*w,x,g;if(p<iu)g=Math.log(h/u)/t,x=function(k){return[o+k*m,l+k*w,u*Math.exp(t*k*g)]};else{var y=Math.sqrt(p),N=(h*h-u*u+r*p)/(2*u*n*y),b=(h*h-u*u-r*p)/(2*h*n*y),_=Math.log(Math.sqrt(N*N+1)-N),E=Math.log(Math.sqrt(b*b+1)-b);g=(E-_)/t,x=function(k){var A=k*g,S=Ai(_),C=u/(n*y)*(S*au(t*A+_)-su(_));return[o+C*m,l+C*w,u*S/Ai(t*A+_)]}}return x.duration=g*1e3*t/Math.SQRT2,x}return i.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},i}(Math.SQRT2,2,4),cu=e=>{var m,w;const[t,n]=P.useState({nodes:[],edges:[],metrics:{},locations:{},departments:{},units:{},patientTypes:{}}),[r,i]=P.useState(!0),[a,s]=P.useState(null),[o,l]=P.useState(!1),[u,c]=P.useState({avgCycleTime:0,avgWaitTime:0,throughput:0,bottlenecks:[],patientVolume:0,resourceUtilization:0}),d=P.useCallback(p=>{if(!p||!p.metrics)return;const x={avgCycleTime:p.metrics.cycleTime||0,avgWaitTime:p.metrics.waitTime||0,throughput:p.metrics.throughput||0,bottlenecks:p.bottlenecks||[],patientVolume:p.metrics.volume||0,resourceUtilization:p.metrics.utilization||0};c(x)},[]),h=P.useCallback(async(p=!1)=>{var x,g,y,N,b,_,E,k;i(!0);try{const A={hospital:e.selectedHospital,department:e.selectedDepartment,patientType:e.selectedPatientType,startDate:(g=(x=e.dateRange)==null?void 0:x.startDate)==null?void 0:g.toISOString(),endDate:(N=(y=e.dateRange)==null?void 0:y.endDate)==null?void 0:N.toISOString(),showComparison:e.showComparison,compStartDate:(_=(b=e.comparisonDateRange)==null?void 0:b.startDate)==null?void 0:_.toISOString(),compEndDate:(k=(E=e.comparisonDateRange)==null?void 0:E.endDate)==null?void 0:k.toISOString()};await new Promise(C=>setTimeout(C,1e3));const S={nodes:[{id:"start",type:"start",label:"Admission",position:{x:0,y:100}},{id:"triage",type:"activity",label:"Triage",position:{x:150,y:100}},{id:"assessment",type:"activity",label:"Initial Assessment",position:{x:300,y:100}},{id:"treatment",type:"activity",label:"Treatment",position:{x:450,y:100}},{id:"discharge",type:"end",label:"Discharge",position:{x:600,y:100}}],edges:[{id:"e1",source:"start",target:"triage",label:"100%"},{id:"e2",source:"triage",target:"assessment",label:"100%"},{id:"e3",source:"assessment",target:"treatment",label:"100%"},{id:"e4",source:"treatment",target:"discharge",label:"100%"}],metrics:{cycleTime:240,waitTime:45,throughput:120,volume:3600,utilization:78},bottlenecks:[{nodeId:"assessment",waitTime:25,utilization:92},{nodeId:"treatment",waitTime:15,utilization:85}],locations:{"Virtua Marlton Hospital":{id:"marh",name:"Virtua Marlton Hospital",fullName:"Virtua Marlton Hospital"},"Virtua Mount Holly Hospital":{id:"memh",name:"Virtua Mount Holly Hospital",fullName:"Virtua Mount Holly Hospital"},"Virtua Our Lady of Lourdes Hospital":{id:"ollh",name:"Virtua Our Lady of Lourdes Hospital",fullName:"Virtua Our Lady of Lourdes Hospital"},"Virtua Voorhees Hospital":{id:"vorh",name:"Virtua Voorhees Hospital",fullName:"Virtua Voorhees Hospital"}},departments:{Emergency:{id:"er",name:"Emergency"},Surgery:{id:"surg",name:"Surgery"},"Medical/Surgical":{id:"medsurg",name:"Medical/Surgical"},ICU:{id:"icu",name:"ICU"},Cardiology:{id:"cardio",name:"Cardiology"}},units:{"ER-1":{id:"er1",name:"ER-1",department:"Emergency"},"ER-2":{id:"er2",name:"ER-2",department:"Emergency"},"OR-1":{id:"or1",name:"OR-1",department:"Surgery"},"OR-2":{id:"or2",name:"OR-2",department:"Surgery"},"MS-1":{id:"ms1",name:"MS-1",department:"Medical/Surgical"}},patientTypes:{Inpatient:{id:"ip",name:"Inpatient"},Outpatient:{id:"op",name:"Outpatient"},Emergency:{id:"er",name:"Emergency"},Observation:{id:"obs",name:"Observation"},Surgical:{id:"surg",name:"Surgical"}}};n(S),d(S),l(!0),s(null)}catch(A){console.error("Error fetching patient flow data:",A),s(A.message||"Failed to load patient flow data"),l(!1)}finally{i(!1)}},[e,d]);return P.useEffect(()=>{h()},[h,e.selectedHospital,e.selectedDepartment,e.selectedPatientType,(m=e.dateRange)==null?void 0:m.startDate,(w=e.dateRange)==null?void 0:w.endDate,e.showComparison]),{data:t,isLoading:r,error:a,refresh:h,derivedMetrics:u,hasData:o}},Ur=({data:e,derivedMetrics:t})=>{var s,o,l,u,c,d,h,m,w,p,x,g;const{stats:n={},insights:r=[]}=e||{},i=[{title:"Total Cases",value:((s=n.cases)==null?void 0:s.count)||0,change:((o=n.cases)==null?void 0:o.change)||0,icon:"carbon:user-multiple",color:"blue"},{title:"Avg. Process Time",value:((l=n.time)==null?void 0:l.avgProcessTime)||"0 hrs",change:((u=n.time)==null?void 0:u.avgProcessTimeChange)||0,icon:"carbon:time",color:"purple"},{title:"Completion Rate",value:`${((c=n.cases)==null?void 0:c.completionRate)||0}%`,change:((d=n.cases)==null?void 0:d.completionRateChange)||0,icon:"carbon:checkmark-filled",color:"green"},{title:"Avg. Wait Time",value:((h=n.time)==null?void 0:h.avgWaitTime)||"0 hrs",change:((m=n.time)==null?void 0:m.avgWaitTimeChange)||0,icon:"carbon:hourglass",color:"yellow"}],a=[{title:"Process Variants",value:(t==null?void 0:t.variantCount)||((w=n.variants)==null?void 0:w.count)||0,icon:"carbon:flow",color:"indigo"},{title:"Activities",value:(t==null?void 0:t.activityCount)||((p=n.activities)==null?void 0:p.count)||0,icon:"carbon:activity",color:"teal"},{title:"Bottlenecks",value:(t==null?void 0:t.bottleneckCount)||((x=n.bottlenecks)==null?void 0:x.count)||0,icon:"carbon:warning-alt",color:"red"},{title:"Optimization Potential",value:`${(t==null?void 0:t.optimizationPotential)||((g=n.optimization)==null?void 0:g.potential)||0}%`,icon:"carbon:chart-maximum",color:"emerald"}];return f.jsxs("div",{className:"space-y-6",children:[f.jsx(oe,{title:"Key Metrics",className:"overflow-hidden",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((y,N)=>f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:N*.1},className:`bg-${y.color}-50 dark:bg-${y.color}-900/30 p-4 rounded-lg`,children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`p-2 rounded-full bg-${y.color}-100 dark:bg-${y.color}-800 text-${y.color}-600 dark:text-${y.color}-300 mr-3`,children:f.jsx(Q,{icon:y.icon,className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:y.title}),f.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:y.value}),y.change!==0&&f.jsxs("div",{className:`flex items-center text-xs ${y.change>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[f.jsx(Q,{icon:y.change>0?"carbon:arrow-up":"carbon:arrow-down",className:"w-3 h-3 mr-1"}),f.jsxs("span",{children:[Math.abs(y.change),"% from previous period"]})]})]})]})},N))})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsx("div",{className:"lg:col-span-2",children:f.jsxs(oe,{title:"Process Overview",className:"h-full",children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((y,N)=>f.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:N*.1+.4},className:"flex items-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[f.jsx("div",{className:`p-2 rounded-full bg-${y.color}-100 dark:bg-${y.color}-800 text-${y.color}-600 dark:text-${y.color}-300 mr-3`,children:f.jsx(Q,{icon:y.icon,className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:y.title}),f.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:y.value})]})]},N))}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Process Timeline"}),f.jsxs("div",{className:"relative pt-6",children:[f.jsx("div",{className:"absolute top-0 left-6 h-full w-0.5 bg-blue-200 dark:bg-blue-800"}),((e==null?void 0:e.processTimeline)||[]).map((y,N)=>f.jsxs(Ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:N*.1+.8},className:"relative mb-6 pl-12",children:[f.jsx("div",{className:"absolute left-0 top-0 w-12 flex items-center justify-center",children:f.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${N===0?"bg-blue-500 text-white":N===e.processTimeline.length-1?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:N+1})}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-200 dark:border-gray-700",children:[f.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:y.activity}),f.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[f.jsx(Q,{icon:"carbon:time",className:"w-4 h-4 mr-1"}),f.jsxs("span",{children:["Avg: ",y.avgDuration]}),y.waitTime&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"mx-2",children:"â€¢"}),f.jsx(Q,{icon:"carbon:hourglass",className:"w-4 h-4 mr-1"}),f.jsxs("span",{children:["Wait: ",y.waitTime]})]})]})]})]},N)),(!(e!=null&&e.processTimeline)||e.processTimeline.length===0)&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No timeline data available"})]})]})]})}),f.jsx("div",{children:f.jsx(oe,{title:"Key Insights",className:"h-full",children:f.jsxs("div",{className:"space-y-4",children:[(r||[]).map((y,N)=>f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:N*.1+.4},className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:`flex-shrink-0 p-2 rounded-full mr-3 ${y.type==="positive"?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300":y.type==="negative"?"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300":"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300"}`,children:f.jsx(Q,{icon:y.type==="positive"?"carbon:checkmark-filled":y.type==="negative"?"carbon:warning-alt":"carbon:information",className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:y.title}),f.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:y.description}),y.value&&f.jsxs("div",{className:"mt-2 text-xs font-medium text-gray-500 dark:text-gray-400",children:[y.label,": ",f.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:y.value})]})]})]})},N)),(!r||r.length===0)&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No insights available"})]})})})]})]})};Ur.propTypes={data:ue.object,derivedMetrics:ue.object};const to=({data:e})=>{var i,a,s,o,l,u,c,d,h,m,w,p,x,g,y,N,b,_,E,k,A;const{stats:t={},timeDistribution:n=[],caseDistribution:r=[]}=e||{};return f.jsxs("div",{className:"space-y-6",children:[f.jsx(oe,{title:"Summary Statistics",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 rounded-full bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 mr-3",children:f.jsx(Q,{icon:"carbon:user-multiple",className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Cases"}),f.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:((i=t.cases)==null?void 0:i.count)||0}),f.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((a=t.cases)==null?void 0:a.completedCount)||0," completed / ",((s=t.cases)==null?void 0:s.inProgressCount)||0," in progress"]})]})]})}),f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 rounded-full bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-300 mr-3",children:f.jsx(Q,{icon:"carbon:checkmark-filled",className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Completion Rate"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[((o=t.cases)==null?void 0:o.completionRate)||0,"%"]}),f.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((l=t.cases)==null?void 0:l.change)>0?"+":"",((u=t.cases)==null?void 0:u.change)||0,"% from previous period"]})]})]})}),f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 rounded-full bg-purple-100 dark:bg-purple-800 text-purple-600 dark:text-purple-300 mr-3",children:f.jsx(Q,{icon:"carbon:time",className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Avg. Process Time"}),f.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:((c=t.time)==null?void 0:c.avgProcessTime)||"0 hrs"}),f.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((d=t.time)==null?void 0:d.avgProcessTimeChange)>0?"+":"",((h=t.time)==null?void 0:h.avgProcessTimeChange)||0,"% from previous"]})]})]})}),f.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"p-2 rounded-full bg-yellow-100 dark:bg-yellow-800 text-yellow-600 dark:text-yellow-300 mr-3",children:f.jsx(Q,{icon:"carbon:hourglass",className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Avg. Wait Time"}),f.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:((m=t.time)==null?void 0:m.avgWaitTime)||"0 hrs"}),f.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((w=t.time)==null?void 0:w.avgWaitTimeChange)>0?"+":"",((p=t.time)==null?void 0:p.avgWaitTimeChange)||0,"% from previous"]})]})]})})]})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx(oe,{title:"Time Distribution",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[f.jsx("span",{children:"Activity"}),f.jsx("span",{children:"Time (hours)"})]}),(n||[]).map((S,C)=>f.jsxs(Ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:C*.05+.4},className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${C===0?"bg-blue-500":C===1?"bg-indigo-500":C===2?"bg-purple-500":C===3?"bg-pink-500":"bg-gray-500"}`}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:S.activity})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:S.time})]}),f.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:f.jsx("div",{className:`h-2.5 rounded-full ${C===0?"bg-blue-500":C===1?"bg-indigo-500":C===2?"bg-purple-500":C===3?"bg-pink-500":"bg-gray-500"}`,style:{width:`${S.percentage}%`}})}),f.jsxs("div",{className:"mt-1 flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[f.jsxs("span",{children:[S.percentage,"% of total time"]}),S.waitTime&&f.jsxs("span",{children:["Wait: ",S.waitTime]})]})]},C)),(!n||n.length===0)&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No time distribution data available"})]})}),f.jsx(oe,{title:"Case Distribution",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[f.jsx("span",{children:"Category"}),f.jsx("span",{children:"Cases"})]}),(r||[]).map((S,C)=>f.jsxs(Ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:C*.05+.4},className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${C===0?"bg-green-500":C===1?"bg-teal-500":C===2?"bg-cyan-500":C===3?"bg-blue-500":"bg-gray-500"}`}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:S.category})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:S.count})]}),f.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:f.jsx("div",{className:`h-2.5 rounded-full ${C===0?"bg-green-500":C===1?"bg-teal-500":C===2?"bg-cyan-500":C===3?"bg-blue-500":"bg-gray-500"}`,style:{width:`${S.percentage}%`}})}),f.jsxs("div",{className:"mt-1 flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[f.jsxs("span",{children:[S.percentage,"% of total cases"]}),f.jsxs("span",{children:["Avg. time: ",S.avgTime]})]})]},C)),(!r||r.length===0)&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No case distribution data available"})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsx(oe,{title:"Activity Statistics",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:activity",className:"w-5 h-5 mr-2 text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Activities"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((x=t.activities)==null?void 0:x.count)||0})]}),f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:chart-maximum",className:"w-5 h-5 mr-2 text-green-500 dark:text-green-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Most Common"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((g=t.activities)==null?void 0:g.mostCommon)||"N/A"})]}),f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:chart-minimum",className:"w-5 h-5 mr-2 text-red-500 dark:text-red-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Least Common"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((y=t.activities)==null?void 0:y.leastCommon)||"N/A"})]})]})}),f.jsx(oe,{title:"Time Statistics",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:time",className:"w-5 h-5 mr-2 text-purple-500 dark:text-purple-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Min Process Time"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((N=t.time)==null?void 0:N.minProcessTime)||"0 hrs"})]}),f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:time",className:"w-5 h-5 mr-2 text-indigo-500 dark:text-indigo-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Max Process Time"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((b=t.time)==null?void 0:b.maxProcessTime)||"0 hrs"})]}),f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:hourglass",className:"w-5 h-5 mr-2 text-yellow-500 dark:text-yellow-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Max Wait Time"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((_=t.time)==null?void 0:_.maxWaitTime)||"0 hrs"})]})]})}),f.jsx(oe,{title:"Variant Statistics",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:flow",className:"w-5 h-5 mr-2 text-indigo-500 dark:text-indigo-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Variants"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((E=t.variants)==null?void 0:E.count)||0})]}),f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:chart-line",className:"w-5 h-5 mr-2 text-blue-500 dark:text-blue-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Main Variant %"})]}),f.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[((k=t.variants)==null?void 0:k.mainPercentage)||0,"%"]})]}),f.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(Q,{icon:"carbon:tree-view",className:"w-5 h-5 mr-2 text-green-500 dark:text-green-400"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Variant Complexity"})]}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:((A=t.variants)==null?void 0:A.complexity)||"Low"})]})]})})]})]})};to.propTypes={data:ue.object};function he(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=he(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var fn={exports:{}},hn={},mn={exports:{}},pn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi;function lu(){if(Mi)return pn;Mi=1;var e=qa();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function o(d,h){var m=h(),w=r({inst:{value:m,getSnapshot:h}}),p=w[0].inst,x=w[1];return a(function(){p.value=m,p.getSnapshot=h,l(p)&&x({inst:p})},[d,m,h]),i(function(){return l(p)&&x({inst:p}),d(function(){l(p)&&x({inst:p})})},[d]),s(m),m}function l(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!n(d,m)}catch{return!0}}function u(d,h){return h()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return pn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,pn}var Ii;function uu(){return Ii||(Ii=1,mn.exports=lu()),mn.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi;function du(){if(Pi)return hn;Pi=1;var e=qa(),t=uu();function n(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,s=e.useEffect,o=e.useMemo,l=e.useDebugValue;return hn.useSyncExternalStoreWithSelector=function(u,c,d,h,m){var w=a(null);if(w.current===null){var p={hasValue:!1,value:null};w.current=p}else p=w.current;w=o(function(){function g(E){if(!y){if(y=!0,N=E,E=h(E),m!==void 0&&p.hasValue){var k=p.value;if(m(k,E))return b=k}return b=E}if(k=b,r(N,E))return k;var A=h(E);return m!==void 0&&m(k,A)?(N=E,k):(N=E,b=A)}var y=!1,N,b,_=d===void 0?null:d;return[function(){return g(c())},_===null?void 0:function(){return g(_())}]},[c,d,h,m]);var x=i(u,w[0],w[1]);return s(function(){p.hasValue=!0,p.value=x},[x]),l(x),x},hn}var qi;function fu(){return qi||(qi=1,fn.exports=du()),fn.exports}var hu=fu();const mu=Da(hu),Di=e=>{let t;const n=new Set,r=(c,d)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(w=>w(t,m))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},u=t=e(r,i,l);return l},pu=e=>e?Di(e):Di,{useDebugValue:gu}=D,{useSyncExternalStoreWithSelector:yu}=mu,xu=e=>e;function no(e,t=xu,n){const r=yu(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gu(r),r}const zi=(e,t)=>{const n=pu(e),r=(i,a=t)=>no(n,i,a);return Object.assign(r,n),r},vu=(e,t)=>e?zi(e,t):zi;function fe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var bu={value:()=>{}};function tn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bt(n)}function Bt(e){this._=e}function wu(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bt.prototype=tn.prototype={constructor:Bt,on:function(e,t){var n=this._,r=wu(e+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(e=r[a]).type)&&(i=Nu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(i=(e=r[a]).type)n[i]=Li(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Li(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Nu(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Li(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=bu,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gr="http://www.w3.org/1999/xhtml";const $i={svg:"http://www.w3.org/2000/svg",xhtml:Gr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$i.hasOwnProperty(t)?{space:$i[t],local:e}:e}function _u(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Gr&&t.documentElement.namespaceURI===Gr?t.createElement(e):t.createElementNS(n,e)}}function Eu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ro(e){var t=nn(e);return(t.local?Eu:_u)(t)}function ku(){}function si(e){return e==null?ku:function(){return this.querySelector(e)}}function Su(e){typeof e!="function"&&(e=si(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new xe(r,this._parents)}function ju(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cu(){return[]}function io(e){return e==null?Cu:function(){return this.querySelectorAll(e)}}function Tu(e){return function(){return ju(e.apply(this,arguments))}}function Ru(e){typeof e=="function"?e=Tu(e):e=io(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var s=t[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new xe(r,i)}function so(e){return function(){return this.matches(e)}}function ao(e){return function(t){return t.matches(e)}}var Au=Array.prototype.find;function Mu(e){return function(){return Au.call(this.children,e)}}function Iu(){return this.firstElementChild}function Pu(e){return this.select(e==null?Iu:Mu(typeof e=="function"?e:ao(e)))}var qu=Array.prototype.filter;function Du(){return Array.from(this.children)}function zu(e){return function(){return qu.call(this.children,e)}}function Lu(e){return this.selectAll(e==null?Du:zu(typeof e=="function"?e:ao(e)))}function $u(e){typeof e!="function"&&(e=so(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&o.push(l);return new xe(r,this._parents)}function oo(e){return new Array(e.length)}function Vu(){return new xe(this._enter||this._groups.map(oo),this._parents)}function Wt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Wt.prototype={constructor:Wt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ou(e){return function(){return e}}function Fu(e,t,n,r,i,a){for(var s=0,o,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new Wt(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function Bu(e,t,n,r,i,a,s){var o,l,u=new Map,c=t.length,d=a.length,h=new Array(c),m;for(o=0;o<c;++o)(l=t[o])&&(h[o]=m=s.call(l,l.__data__,o,t)+"",u.has(m)?i[o]=l:u.set(m,l));for(o=0;o<d;++o)m=s.call(e,a[o],o,a)+"",(l=u.get(m))?(r[o]=l,l.__data__=a[o],u.delete(m)):n[o]=new Wt(e,a[o]);for(o=0;o<c;++o)(l=t[o])&&u.get(h[o])===l&&(i[o]=l)}function Hu(e){return e.__data__}function Uu(e,t){if(!arguments.length)return Array.from(this,Hu);var n=t?Bu:Fu,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ou(e));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],d=i[u],h=d.length,m=Gu(e.call(c,c&&c.__data__,u,r)),w=m.length,p=o[u]=new Array(w),x=s[u]=new Array(w),g=l[u]=new Array(h);n(c,d,p,x,g,m,t);for(var y=0,N=0,b,_;y<w;++y)if(b=p[y]){for(y>=N&&(N=y+1);!(_=x[N])&&++N<w;);b._next=_||null}}return s=new xe(s,r),s._enter=o,s._exit=l,s}function Gu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wu(){return new xe(this._exit||this._groups.map(oo),this._parents)}function Yu(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Xu(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],d=u.length,h=o[l]=new Array(d),m,w=0;w<d;++w)(m=u[w]||c[w])&&(h[w]=m);for(;l<i;++l)o[l]=n[l];return new xe(o,this._parents)}function Zu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Ku(e){e||(e=Qu);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,l=i[a]=new Array(o),u,c=0;c<o;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new xe(i,this._parents).order()}function Qu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ju(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ed(){return Array.from(this)}function td(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function nd(){let e=0;for(const t of this)++e;return e}function rd(){return!this.node()}function id(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}function sd(e){return function(){this.removeAttribute(e)}}function ad(e){return function(){this.removeAttributeNS(e.space,e.local)}}function od(e,t){return function(){this.setAttribute(e,t)}}function cd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ld(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ud(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function dd(e,t){var n=nn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ad:sd:typeof t=="function"?n.local?ud:ld:n.local?cd:od)(n,t))}function co(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fd(e){return function(){this.style.removeProperty(e)}}function hd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function md(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pd(e,t,n){return arguments.length>1?this.each((t==null?fd:typeof t=="function"?md:hd)(e,t,n??"")):ht(this.node(),e)}function ht(e,t){return e.style.getPropertyValue(t)||co(e).getComputedStyle(e,null).getPropertyValue(t)}function gd(e){return function(){delete this[e]}}function yd(e,t){return function(){this[e]=t}}function xd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vd(e,t){return arguments.length>1?this.each((t==null?gd:typeof t=="function"?xd:yd)(e,t)):this.node()[e]}function lo(e){return e.trim().split(/^|\s+/)}function ai(e){return e.classList||new uo(e)}function uo(e){this._node=e,this._names=lo(e.getAttribute("class")||"")}uo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fo(e,t){for(var n=ai(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ho(e,t){for(var n=ai(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function bd(e){return function(){fo(this,e)}}function wd(e){return function(){ho(this,e)}}function Nd(e,t){return function(){(t.apply(this,arguments)?fo:ho)(this,e)}}function _d(e,t){var n=lo(e+"");if(arguments.length<2){for(var r=ai(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Nd:t?bd:wd)(n,t))}function Ed(){this.textContent=""}function kd(e){return function(){this.textContent=e}}function Sd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jd(e){return arguments.length?this.each(e==null?Ed:(typeof e=="function"?Sd:kd)(e)):this.node().textContent}function Cd(){this.innerHTML=""}function Td(e){return function(){this.innerHTML=e}}function Rd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ad(e){return arguments.length?this.each(e==null?Cd:(typeof e=="function"?Rd:Td)(e)):this.node().innerHTML}function Md(){this.nextSibling&&this.parentNode.appendChild(this)}function Id(){return this.each(Md)}function Pd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qd(){return this.each(Pd)}function Dd(e){var t=typeof e=="function"?e:ro(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zd(){return null}function Ld(e,t){var n=typeof e=="function"?e:ro(e),r=t==null?zd:typeof t=="function"?t:si(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $d(){var e=this.parentNode;e&&e.removeChild(this)}function Vd(){return this.each($d)}function Od(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bd(e){return this.select(e?Fd:Od)}function Hd(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ud(e){return function(t){e.call(this,t,this.__data__)}}function Gd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wd(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Yd(e,t,n){return function(){var r=this.__on,i,a=Ud(t);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Xd(e,t,n){var r=Gd(e+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<a;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(o=t?Yd:Wd,i=0;i<a;++i)this.each(o(r[i],t,n));return this}function mo(e,t,n){var r=co(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Zd(e,t){return function(){return mo(this,e,t)}}function Kd(e,t){return function(){return mo(this,e,t.apply(this,arguments))}}function Qd(e,t){return this.each((typeof t=="function"?Kd:Zd)(e,t))}function*Jd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var po=[null];function xe(e,t){this._groups=e,this._parents=t}function Pt(){return new xe([[document.documentElement]],po)}function ef(){return this}xe.prototype=Pt.prototype={constructor:xe,select:Su,selectAll:Ru,selectChild:Pu,selectChildren:Lu,filter:$u,data:Uu,enter:Vu,exit:Wu,join:Yu,merge:Xu,selection:ef,order:Zu,sort:Ku,call:Ju,nodes:ed,node:td,size:nd,empty:rd,each:id,attr:dd,style:pd,property:vd,classed:_d,text:jd,html:Ad,raise:Id,lower:qd,append:Dd,insert:Ld,remove:Vd,clone:Bd,datum:Hd,on:Xd,dispatch:Qd,[Symbol.iterator]:Jd};function ve(e){return typeof e=="string"?new xe([[document.querySelector(e)]],[document.documentElement]):new xe([[e]],po)}function tf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function _e(e,t){if(e=tf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const nf={passive:!1},Ct={capture:!0,passive:!1};function gn(e){e.stopImmediatePropagation()}function dt(e){e.preventDefault(),e.stopImmediatePropagation()}function go(e){var t=e.document.documentElement,n=ve(e).on("dragstart.drag",dt,Ct);"onselectstart"in t?n.on("selectstart.drag",dt,Ct):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yo(e,t){var n=e.document.documentElement,r=ve(e).on("dragstart.drag",null);t&&(r.on("click.drag",dt,Ct),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zt=e=>()=>e;function Wr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Wr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function rf(e){return!e.ctrlKey&&!e.button}function sf(){return this.parentNode}function af(e,t){return t??{x:e.x,y:e.y}}function of(){return navigator.maxTouchPoints||"ontouchstart"in this}function cf(){var e=rf,t=sf,n=af,r=of,i={},a=tn("start","drag","end"),s=0,o,l,u,c,d=0;function h(b){b.on("mousedown.drag",m).filter(r).on("touchstart.drag",x).on("touchmove.drag",g,nf).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(b,_){if(!(c||!e.call(this,b,_))){var E=N(this,t.call(this,b,_),b,_,"mouse");E&&(ve(b.view).on("mousemove.drag",w,Ct).on("mouseup.drag",p,Ct),go(b.view),gn(b),u=!1,o=b.clientX,l=b.clientY,E("start",b))}}function w(b){if(dt(b),!u){var _=b.clientX-o,E=b.clientY-l;u=_*_+E*E>d}i.mouse("drag",b)}function p(b){ve(b.view).on("mousemove.drag mouseup.drag",null),yo(b.view,u),dt(b),i.mouse("end",b)}function x(b,_){if(e.call(this,b,_)){var E=b.changedTouches,k=t.call(this,b,_),A=E.length,S,C;for(S=0;S<A;++S)(C=N(this,k,b,_,E[S].identifier,E[S]))&&(gn(b),C("start",b,E[S]))}}function g(b){var _=b.changedTouches,E=_.length,k,A;for(k=0;k<E;++k)(A=i[_[k].identifier])&&(dt(b),A("drag",b,_[k]))}function y(b){var _=b.changedTouches,E=_.length,k,A;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),k=0;k<E;++k)(A=i[_[k].identifier])&&(gn(b),A("end",b,_[k]))}function N(b,_,E,k,A,S){var C=a.copy(),q=_e(S||E,_),$,L,v;if((v=n.call(b,new Wr("beforestart",{sourceEvent:E,target:h,identifier:A,active:s,x:q[0],y:q[1],dx:0,dy:0,dispatch:C}),k))!=null)return $=v.x-q[0]||0,L=v.y-q[1]||0,function R(T,V,F){var M=q,O;switch(T){case"start":i[A]=R,O=s++;break;case"end":delete i[A],--s;case"drag":q=_e(F||V,_),O=s;break}C.call(T,b,new Wr(T,{sourceEvent:V,subject:v,target:h,identifier:A,active:O,x:q[0]+$,y:q[1]+L,dx:q[0]-M[0],dy:q[1]-M[1],dispatch:C}),k)}}return h.filter=function(b){return arguments.length?(e=typeof b=="function"?b:zt(!!b),h):e},h.container=function(b){return arguments.length?(t=typeof b=="function"?b:zt(b),h):t},h.subject=function(b){return arguments.length?(n=typeof b=="function"?b:zt(b),h):n},h.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:zt(!!b),h):r},h.on=function(){var b=a.on.apply(a,arguments);return b===a?h:b},h.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,h):Math.sqrt(d)},h}var mt=0,kt=0,bt=0,xo=1e3,Yt,St,Xt=0,Je=0,rn=0,Tt=typeof performance=="object"&&performance.now?performance:Date,vo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oi(){return Je||(vo(lf),Je=Tt.now()+rn)}function lf(){Je=0}function Zt(){this._call=this._time=this._next=null}Zt.prototype=bo.prototype={constructor:Zt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oi():+n)+(t==null?0:+t),!this._next&&St!==this&&(St?St._next=this:Yt=this,St=this),this._call=e,this._time=n,Yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yr())}};function bo(e,t,n){var r=new Zt;return r.restart(e,t,n),r}function uf(){oi(),++mt;for(var e=Yt,t;e;)(t=Je-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mt}function Vi(){Je=(Xt=Tt.now())+rn,mt=kt=0;try{uf()}finally{mt=0,ff(),Je=0}}function df(){var e=Tt.now(),t=e-Xt;t>xo&&(rn-=t,Xt=e)}function ff(){for(var e,t=Yt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yt=n);St=e,Yr(r)}function Yr(e){if(!mt){kt&&(kt=clearTimeout(kt));var t=e-Je;t>24?(e<1/0&&(kt=setTimeout(Vi,e-Tt.now()-rn)),bt&&(bt=clearInterval(bt))):(bt||(Xt=Tt.now(),bt=setInterval(df,xo)),mt=1,vo(Vi))}}function Oi(e,t,n){var r=new Zt;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var hf=tn("start","end","cancel","interrupt"),mf=[],wo=0,Fi=1,Xr=2,Ht=3,Bi=4,Zr=5,Ut=6;function sn(e,t,n,r,i,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;pf(e,n,{name:t,index:r,group:i,on:hf,tween:mf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:wo})}function ci(e,t){var n=je(e,t);if(n.state>wo)throw new Error("too late; already scheduled");return n}function Te(e,t){var n=je(e,t);if(n.state>Ht)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function pf(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=bo(a,0,n.time);function a(u){n.state=Fi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,h,m;if(n.state!==Fi)return l();for(c in r)if(m=r[c],m.name===n.name){if(m.state===Ht)return Oi(s);m.state===Bi?(m.state=Ut,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[c]):+c<t&&(m.state=Ut,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[c])}if(Oi(function(){n.state===Ht&&(n.state=Bi,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Xr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xr){for(n.state=Ht,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(m=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=m);i.length=d+1}}function o(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Zr,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===Zr&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ut,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Gt(e,t){var n=e.__transition,r,i,a=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){a=!1;continue}i=r.state>Xr&&r.state<Zr,r.state=Ut,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}a&&delete e.__transition}}function gf(e){return this.each(function(){Gt(this,e)})}function yf(e,t){var n,r;return function(){var i=Te(this,e),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function xf(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Te(this,e),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function vf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=je(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?yf:xf)(n,e,t))}function li(e,t,n){var r=e._id;return e.each(function(){var i=Te(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return je(i,r).value[t]}}function No(e,t){var n;return(typeof t=="number"?Xe:t instanceof Ci?Ti:(n=Ci(t))?(t=n,Ti):jl)(e,t)}function bf(e){return function(){this.removeAttribute(e)}}function wf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nf(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttribute(e);return s===i?null:s===r?a:a=t(r=s,n)}}function _f(e,t,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?a:a=t(r=s,n)}}function Ef(e,t,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=t(r=s,o)))}}function kf(e,t,n){var r,i,a;return function(){var s,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=t(r=s,o)))}}function Sf(e,t){var n=nn(e),r=n==="transform"?ru:No;return this.attrTween(e,typeof t=="function"?(n.local?kf:Ef)(n,r,li(this,"attr."+e,t)):t==null?(n.local?wf:bf)(n):(n.local?_f:Nf)(n,r,t))}function jf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Tf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Cf(e,a)),n}return i._value=t,i}function Rf(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&jf(e,a)),n}return i._value=t,i}function Af(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=nn(e);return this.tween(n,(r.local?Tf:Rf)(r,t))}function Mf(e,t){return function(){ci(this,e).delay=+t.apply(this,arguments)}}function If(e,t){return t=+t,function(){ci(this,e).delay=t}}function Pf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mf:If)(t,e)):je(this.node(),t).delay}function qf(e,t){return function(){Te(this,e).duration=+t.apply(this,arguments)}}function Df(e,t){return t=+t,function(){Te(this,e).duration=t}}function zf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qf:Df)(t,e)):je(this.node(),t).duration}function Lf(e,t){if(typeof t!="function")throw new Error;return function(){Te(this,e).ease=t}}function $f(e){var t=this._id;return arguments.length?this.each(Lf(t,e)):je(this.node(),t).ease}function Vf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Te(this,e).ease=n}}function Of(e){if(typeof e!="function")throw new Error;return this.each(Vf(this._id,e))}function Ff(e){typeof e!="function"&&(e=so(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&o.push(l);return new De(r,this._parents,this._name,this._id)}function Bf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=t[o],u=n[o],c=l.length,d=s[o]=new Array(c),h,m=0;m<c;++m)(h=l[m]||u[m])&&(d[m]=h);for(;o<r;++o)s[o]=t[o];return new De(s,this._parents,this._name,this._id)}function Hf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Uf(e,t,n){var r,i,a=Hf(t)?ci:Te;return function(){var s=a(this,e),o=s.on;o!==r&&(i=(r=o).copy()).on(t,n),s.on=i}}function Gf(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(Uf(n,e,t))}function Wf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Yf(){return this.on("end.remove",Wf(this._id))}function Xf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=si(e));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,u=a[s]=new Array(l),c,d,h=0;h<l;++h)(c=o[h])&&(d=e.call(c,c.__data__,h,o))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,sn(u[h],t,n,h,u,je(c,n)));return new De(a,this._parents,t,n)}function Zf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=io(e));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),m,w=je(c,n),p=0,x=h.length;p<x;++p)(m=h[p])&&sn(m,t,n,p,h,w);a.push(h),s.push(c)}return new De(a,s,t,n)}var Kf=Pt.prototype.constructor;function Qf(){return new Kf(this._groups,this._parents)}function Jf(e,t){var n,r,i;return function(){var a=ht(this,e),s=(this.style.removeProperty(e),ht(this,e));return a===s?null:a===n&&s===r?i:i=t(n=a,r=s)}}function _o(e){return function(){this.style.removeProperty(e)}}function eh(e,t,n){var r,i=n+"",a;return function(){var s=ht(this,e);return s===i?null:s===r?a:a=t(r=s,n)}}function th(e,t,n){var r,i,a;return function(){var s=ht(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),ht(this,e))),s===l?null:s===r&&l===i?a:(i=l,a=t(r=s,o))}}function nh(e,t){var n,r,i,a="style."+t,s="end."+a,o;return function(){var l=Te(this,e),u=l.on,c=l.value[a]==null?o||(o=_o(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function rh(e,t,n){var r=(e+="")=="transform"?nu:No;return t==null?this.styleTween(e,Jf(e,r)).on("end.style."+e,_o(e)):typeof t=="function"?this.styleTween(e,th(e,r,li(this,"style."+e,t))).each(nh(this._id,e)):this.styleTween(e,eh(e,r,t),n).on("end.style."+e,null)}function ih(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function sh(e,t,n){var r,i;function a(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&ih(e,s,n)),r}return a._value=t,a}function ah(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,sh(e,t,n??""))}function oh(e){return function(){this.textContent=e}}function ch(e){return function(){var t=e(this);this.textContent=t??""}}function lh(e){return this.tween("text",typeof e=="function"?ch(li(this,"text",e)):oh(e==null?"":e+""))}function uh(e){return function(t){this.textContent=e.call(this,t)}}function dh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&uh(i)),t}return r._value=e,r}function fh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,dh(e))}function hh(){for(var e=this._name,t=this._id,n=Eo(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var c=je(l,t);sn(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new De(r,this._parents,e,n)}function mh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};n.each(function(){var u=Te(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),i===0&&a()})}var ph=0;function De(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Eo(){return++ph}var Ie=Pt.prototype;De.prototype={constructor:De,select:Xf,selectAll:Zf,selectChild:Ie.selectChild,selectChildren:Ie.selectChildren,filter:Ff,merge:Bf,selection:Qf,transition:hh,call:Ie.call,nodes:Ie.nodes,node:Ie.node,size:Ie.size,empty:Ie.empty,each:Ie.each,on:Gf,attr:Sf,attrTween:Af,style:rh,styleTween:ah,text:lh,textTween:fh,remove:Yf,tween:vf,delay:Pf,duration:zf,ease:$f,easeVarying:Of,end:mh,[Symbol.iterator]:Ie[Symbol.iterator]};function gh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yh={time:null,delay:0,duration:250,ease:gh};function xh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function vh(e){var t,n;e instanceof De?(t=e._id,e=e._name):(t=Eo(),(n=yh).time=oi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&sn(l,e,t,u,s,n||xh(l,t));return new De(r,this._parents,e,t)}Pt.prototype.interrupt=gf;Pt.prototype.transition=vh;const Lt=e=>()=>e;function bh(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Pe(e,t,n){this.k=e,this.x=t,this.y=n}Pe.prototype={constructor:Pe,scale:function(e){return e===1?this:new Pe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qe=new Pe(1,0,0);Pe.prototype;function yn(e){e.stopImmediatePropagation()}function wt(e){e.preventDefault(),e.stopImmediatePropagation()}function wh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Nh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Hi(){return this.__zoom||qe}function _h(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Eh(){return navigator.maxTouchPoints||"ontouchstart"in this}function kh(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function ko(){var e=wh,t=Nh,n=kh,r=_h,i=Eh,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,l=ou,u=tn("start","zoom","end"),c,d,h,m=500,w=150,p=0,x=10;function g(v){v.property("__zoom",Hi).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",C).filter(i).on("touchstart.zoom",q).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(v,R,T,V){var F=v.selection?v.selection():v;F.property("__zoom",Hi),v!==F?_(v,R,T,V):F.interrupt().each(function(){E(this,arguments).event(V).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},g.scaleBy=function(v,R,T,V){g.scaleTo(v,function(){var F=this.__zoom.k,M=typeof R=="function"?R.apply(this,arguments):R;return F*M},T,V)},g.scaleTo=function(v,R,T,V){g.transform(v,function(){var F=t.apply(this,arguments),M=this.__zoom,O=T==null?b(F):typeof T=="function"?T.apply(this,arguments):T,H=M.invert(O),U=typeof R=="function"?R.apply(this,arguments):R;return n(N(y(M,U),O,H),F,s)},T,V)},g.translateBy=function(v,R,T,V){g.transform(v,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),s)},null,V)},g.translateTo=function(v,R,T,V,F){g.transform(v,function(){var M=t.apply(this,arguments),O=this.__zoom,H=V==null?b(M):typeof V=="function"?V.apply(this,arguments):V;return n(qe.translate(H[0],H[1]).scale(O.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof T=="function"?-T.apply(this,arguments):-T),M,s)},V,F)};function y(v,R){return R=Math.max(a[0],Math.min(a[1],R)),R===v.k?v:new Pe(R,v.x,v.y)}function N(v,R,T){var V=R[0]-T[0]*v.k,F=R[1]-T[1]*v.k;return V===v.x&&F===v.y?v:new Pe(v.k,V,F)}function b(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function _(v,R,T,V){v.on("start.zoom",function(){E(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(V).end()}).tween("zoom",function(){var F=this,M=arguments,O=E(F,M).event(V),H=t.apply(F,M),U=T==null?b(H):typeof T=="function"?T.apply(F,M):T,G=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),j=F.__zoom,I=typeof R=="function"?R.apply(F,M):R,z=l(j.invert(U).concat(G/j.k),I.invert(U).concat(G/I.k));return function(B){if(B===1)B=I;else{var W=z(B),X=G/W[2];B=new Pe(X,U[0]-W[0]*X,U[1]-W[1]*X)}O.zoom(null,B)}})}function E(v,R,T){return!T&&v.__zooming||new k(v,R)}function k(v,R){this.that=v,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,R),this.taps=0}k.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,R){return this.mouse&&v!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var R=ve(this.that).datum();u.call(v,this.that,new bh(v,{sourceEvent:this.sourceEvent,target:g,type:v,transform:this.that.__zoom,dispatch:u}),R)}};function A(v,...R){if(!e.apply(this,arguments))return;var T=E(this,R).event(v),V=this.__zoom,F=Math.max(a[0],Math.min(a[1],V.k*Math.pow(2,r.apply(this,arguments)))),M=_e(v);if(T.wheel)(T.mouse[0][0]!==M[0]||T.mouse[0][1]!==M[1])&&(T.mouse[1]=V.invert(T.mouse[0]=M)),clearTimeout(T.wheel);else{if(V.k===F)return;T.mouse=[M,V.invert(M)],Gt(this),T.start()}wt(v),T.wheel=setTimeout(O,w),T.zoom("mouse",n(N(y(V,F),T.mouse[0],T.mouse[1]),T.extent,s));function O(){T.wheel=null,T.end()}}function S(v,...R){if(h||!e.apply(this,arguments))return;var T=v.currentTarget,V=E(this,R,!0).event(v),F=ve(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",G,!0),M=_e(v,T),O=v.clientX,H=v.clientY;go(v.view),yn(v),V.mouse=[M,this.__zoom.invert(M)],Gt(this),V.start();function U(j){if(wt(j),!V.moved){var I=j.clientX-O,z=j.clientY-H;V.moved=I*I+z*z>p}V.event(j).zoom("mouse",n(N(V.that.__zoom,V.mouse[0]=_e(j,T),V.mouse[1]),V.extent,s))}function G(j){F.on("mousemove.zoom mouseup.zoom",null),yo(j.view,V.moved),wt(j),V.event(j).end()}}function C(v,...R){if(e.apply(this,arguments)){var T=this.__zoom,V=_e(v.changedTouches?v.changedTouches[0]:v,this),F=T.invert(V),M=T.k*(v.shiftKey?.5:2),O=n(N(y(T,M),V,F),t.apply(this,R),s);wt(v),o>0?ve(this).transition().duration(o).call(_,O,V,v):ve(this).call(g.transform,O,V,v)}}function q(v,...R){if(e.apply(this,arguments)){var T=v.touches,V=T.length,F=E(this,R,v.changedTouches.length===V).event(v),M,O,H,U;for(yn(v),O=0;O<V;++O)H=T[O],U=_e(H,this),U=[U,this.__zoom.invert(U),H.identifier],F.touch0?!F.touch1&&F.touch0[2]!==U[2]&&(F.touch1=U,F.taps=0):(F.touch0=U,M=!0,F.taps=1+!!c);c&&(c=clearTimeout(c)),M&&(F.taps<2&&(d=U[0],c=setTimeout(function(){c=null},m)),Gt(this),F.start())}}function $(v,...R){if(this.__zooming){var T=E(this,R).event(v),V=v.changedTouches,F=V.length,M,O,H,U;for(wt(v),M=0;M<F;++M)O=V[M],H=_e(O,this),T.touch0&&T.touch0[2]===O.identifier?T.touch0[0]=H:T.touch1&&T.touch1[2]===O.identifier&&(T.touch1[0]=H);if(O=T.that.__zoom,T.touch1){var G=T.touch0[0],j=T.touch0[1],I=T.touch1[0],z=T.touch1[1],B=(B=I[0]-G[0])*B+(B=I[1]-G[1])*B,W=(W=z[0]-j[0])*W+(W=z[1]-j[1])*W;O=y(O,Math.sqrt(B/W)),H=[(G[0]+I[0])/2,(G[1]+I[1])/2],U=[(j[0]+z[0])/2,(j[1]+z[1])/2]}else if(T.touch0)H=T.touch0[0],U=T.touch0[1];else return;T.zoom("touch",n(N(O,H,U),T.extent,s))}}function L(v,...R){if(this.__zooming){var T=E(this,R).event(v),V=v.changedTouches,F=V.length,M,O;for(yn(v),h&&clearTimeout(h),h=setTimeout(function(){h=null},m),M=0;M<F;++M)O=V[M],T.touch0&&T.touch0[2]===O.identifier?delete T.touch0:T.touch1&&T.touch1[2]===O.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(O=_e(O,this),Math.hypot(d[0]-O[0],d[1]-O[1])<x)){var H=ve(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return g.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:Lt(+v),g):r},g.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Lt(!!v),g):e},g.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Lt(!!v),g):i},g.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Lt([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),g):t},g.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],g):[a[0],a[1]]},g.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(v){return arguments.length?(n=v,g):n},g.duration=function(v){return arguments.length?(o=+v,g):o},g.interpolate=function(v){return arguments.length?(l=v,g):l},g.on=function(){var v=u.on.apply(u,arguments);return v===u?g:v},g.clickDistance=function(v){return arguments.length?(p=(v=+v)*v,g):Math.sqrt(p)},g.tapDistance=function(v){return arguments.length?(x=+v,g):x},g}const an=P.createContext(null),Sh=an.Provider,ze={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},So=ze.error001();function se(e,t){const n=P.useContext(an);if(n===null)throw new Error(So);return no(n,e,t)}const de=()=>{const e=P.useContext(an);if(e===null)throw new Error(So);return P.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},jh=e=>e.userSelectionActive?"none":"all";function ui({position:e,children:t,className:n,style:r,...i}){const a=se(jh),s=`${e}`.split("-");return D.createElement("div",{className:he(["react-flow__panel",n,...s]),style:{...r,pointerEvents:a},...i},t)}function Ch({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:D.createElement(ui,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},D.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Th=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:s=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...c})=>{const d=P.useRef(null),[h,m]=P.useState({x:0,y:0,width:0,height:0}),w=he(["react-flow__edge-textwrapper",u]);return P.useEffect(()=>{if(d.current){const p=d.current.getBBox();m({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:D.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:w,visibility:h.width?"visible":"hidden",...c},i&&D.createElement("rect",{width:h.width+2*s[0],x:-s[0],y:-s[1],height:h.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),D.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),l)};var Rh=P.memo(Th);const di=e=>({width:e.offsetWidth,height:e.offsetHeight}),pt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),fi=(e={x:0,y:0},t)=>({x:pt(e.x,t[0][0],t[1][0]),y:pt(e.y,t[0][1],t[1][1])}),Ui=(e,t,n)=>e<t?pt(Math.abs(e-t),1,50)/50:e>n?-pt(Math.abs(e-n),1,50)/50:0,jo=(e,t)=>{const n=Ui(e.x,35,t.width-35)*20,r=Ui(e.y,35,t.height-35)*20;return[n,r]},Co=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},To=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Rt=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ro=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Gi=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Ah=(e,t)=>Ro(To(Rt(e),Rt(t))),Kr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Mh=e=>be(e.width)&&be(e.height)&&be(e.x)&&be(e.y),be=e=>!isNaN(e)&&isFinite(e),le=Symbol.for("internals"),Ao=["Enter"," ","Escape"],Ih=(e,t)=>{},Ph=e=>"nativeEvent"in e;function Qr(e){var i,a;const t=Ph(e)?e.nativeEvent:e,n=((a=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:a[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Mo=e=>"clientX"in e,Oe=(e,t)=>{var a,s;const n=Mo(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Kt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},qt=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:h,interactionWidth:m=20})=>D.createElement(D.Fragment,null,D.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),m&&D.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),i&&be(n)&&be(r)?D.createElement(Rh,{x:n,y:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);qt.displayName="BaseEdge";function Nt(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(a=>a.id===e);i&&n(r,{...i})}}function Io({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,s=Math.abs(r-t)/2,o=r<t?r+s:r-s;return[a,o,i,s]}function Po({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:o}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+a*.375+o*.375+r*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}var et;(function(e){e.Strict="strict",e.Loose="loose"})(et||(et={}));var Ke;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ke||(Ke={}));var At;(function(e){e.Partial="partial",e.Full="full"})(At||(At={}));var Ve;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ve||(Ve={}));var Qt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Qt||(Qt={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Wi({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function qo({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top}){const[s,o]=Wi({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=Wi({pos:a,x1:r,y1:i,x2:e,y2:t}),[c,d,h,m]=Po({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${o} ${l},${u} ${r},${i}`,c,d,h,m]}const hi=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:a=Y.Top,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:w,interactionWidth:p})=>{const[x,g,y]=qo({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a});return D.createElement(qt,{path:x,labelX:g,labelY:y,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:w,interactionWidth:p})});hi.displayName="SimpleBezierEdge";const Yi={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},qh=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Xi=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Dh({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:i,offset:a}){const s=Yi[t],o=Yi[r],l={x:e.x+s.x*a,y:e.y+s.y*a},u={x:n.x+o.x*a,y:n.y+o.y*a},c=qh({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let m=[],w,p;const x={x:0,y:0},g={x:0,y:0},[y,N,b,_]=Io({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*o[d]===-1){w=i.x??y,p=i.y??N;const k=[{x:w,y:l.y},{x:w,y:u.y}],A=[{x:l.x,y:p},{x:u.x,y:p}];s[d]===h?m=d==="x"?k:A:m=d==="x"?A:k}else{const k=[{x:l.x,y:u.y}],A=[{x:u.x,y:l.y}];if(d==="x"?m=s.x===h?A:k:m=s.y===h?k:A,t===r){const L=Math.abs(e[d]-n[d]);if(L<=a){const v=Math.min(a-1,a-L);s[d]===h?x[d]=(l[d]>e[d]?-1:1)*v:g[d]=(u[d]>n[d]?-1:1)*v}}if(t!==r){const L=d==="x"?"y":"x",v=s[d]===o[L],R=l[L]>u[L],T=l[L]<u[L];(s[d]===1&&(!v&&R||v&&T)||s[d]!==1&&(!v&&T||v&&R))&&(m=d==="x"?k:A)}const S={x:l.x+x.x,y:l.y+x.y},C={x:u.x+g.x,y:u.y+g.y},q=Math.max(Math.abs(S.x-m[0].x),Math.abs(C.x-m[0].x)),$=Math.max(Math.abs(S.y-m[0].y),Math.abs(C.y-m[0].y));q>=$?(w=(S.x+C.x)/2,p=m[0].y):(w=m[0].x,p=(S.y+C.y)/2)}return[[e,{x:l.x+x.x,y:l.y+x.y},...m,{x:u.x+g.x,y:u.y+g.y},n],w,p,b,_]}function zh(e,t,n,r){const i=Math.min(Xi(e,t)/2,Xi(t,n)/2,r),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*u},${s}Q ${a},${s} ${a},${s+i*c}`}const o=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${s+i*l}Q ${a},${s} ${a+i*o},${s}`}function Jr({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top,borderRadius:s=5,centerX:o,centerY:l,offset:u=20}){const[c,d,h,m,w]=Dh({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:o,y:l},offset:u});return[c.reduce((x,g,y)=>{let N="";return y>0&&y<c.length-1?N=zh(c[y-1],g,c[y+1],s):N=`${y===0?"M":"L"}${g.x} ${g.y}`,x+=N,x},""),d,h,m,w]}const on=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:d=Y.Bottom,targetPosition:h=Y.Top,markerEnd:m,markerStart:w,pathOptions:p,interactionWidth:x})=>{const[g,y,N]=Jr({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset});return D.createElement(qt,{path:g,labelX:y,labelY:N,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:m,markerStart:w,interactionWidth:x})});on.displayName="SmoothStepEdge";const mi=P.memo(e=>{var t;return D.createElement(on,{...e,pathOptions:P.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});mi.displayName="StepEdge";function Lh({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,a,s,o]=Io({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,s,o]}const pi=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:h,interactionWidth:m})=>{const[w,p,x]=Lh({sourceX:e,sourceY:t,targetX:n,targetY:r});return D.createElement(qt,{path:w,labelX:p,labelY:x,label:i,labelStyle:a,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:h,interactionWidth:m})});pi.displayName="StraightEdge";function $t(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Zi({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case Y.Left:return[t-$t(t-r,a),n];case Y.Right:return[t+$t(r-t,a),n];case Y.Top:return[t,n-$t(n-i,a)];case Y.Bottom:return[t,n+$t(i-n,a)]}}function Do({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:a=Y.Top,curvature:s=.25}){const[o,l]=Zi({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,c]=Zi({pos:a,x1:r,y1:i,x2:e,y2:t,c:s}),[d,h,m,w]=Po({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${o},${l} ${u},${c} ${r},${i}`,d,h,m,w]}const Jt=P.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:a=Y.Top,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:w,pathOptions:p,interactionWidth:x})=>{const[g,y,N]=Do({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a,curvature:p==null?void 0:p.curvature});return D.createElement(qt,{path:g,labelX:y,labelY:N,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:w,interactionWidth:x})});Jt.displayName="BezierEdge";const gi=P.createContext(null),$h=gi.Provider;gi.Consumer;const Vh=()=>P.useContext(gi),Oh=e=>"id"in e&&"source"in e&&"target"in e,Fh=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,ei=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Bh=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Hh=(e,t)=>{if(!e.source||!e.target)return t;let n;return Oh(e)?n={...e}:n={...e,id:Fh(e)},Bh(n,t)?t:t.concat(n)},ti=({x:e,y:t},[n,r,i],a,[s,o])=>{const l={x:(e-n)/i,y:(t-r)/i};return a?{x:s*Math.round(l.x/s),y:o*Math.round(l.y/o)}:l},zo=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Qe=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},cn=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:a,y:s}=Qe(i,t).positionAbsolute;return To(r,Rt({x:a,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ro(n)},Lo=(e,t,[n,r,i]=[0,0,1],a=!1,s=!1,o=[0,0])=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(c=>{const{width:d,height:h,selectable:m=!0,hidden:w=!1}=c;if(s&&!m||w)return!1;const{positionAbsolute:p}=Qe(c,o),x={x:p.x,y:p.y,width:d||0,height:h||0},g=Kr(l,x),y=typeof d>"u"||typeof h>"u"||d===null||h===null,N=a&&g>0,b=(d||0)*(h||0);(y||N||g>=b||c.dragging)&&u.push(c)}),u},$o=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Vo=(e,t,n,r,i,a=.1)=>{const s=t/(e.width*(1+a)),o=n/(e.height*(1+a)),l=Math.min(s,o),u=pt(l,r,i),c=e.x+e.width/2,d=e.y+e.height/2,h=t/2-c*u,m=n/2-d*u;return{x:h,y:m,zoom:u}},Ze=(e,t=0)=>e.transition().duration(t);function Ki(e,t,n,r){return(t[n]||[]).reduce((i,a)=>{var s,o;return`${e.id}-${a.id}-${n}`!==r&&i.push({id:a.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+a.x+a.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),i},[])}function Uh(e,t,n,r,i,a){const{x:s,y:o}=Oe(e),u=t.elementsFromPoint(s,o).find(w=>w.classList.contains("react-flow__handle"));if(u){const w=u.getAttribute("data-nodeid");if(w){const p=yi(void 0,u),x=u.getAttribute("data-handleid"),g=a({nodeId:w,id:x,type:p});if(g){const y=i.find(N=>N.nodeId===w&&N.type===p&&N.id===x);return{handle:{id:x,type:p,nodeId:w,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:g}}}}let c=[],d=1/0;if(i.forEach(w=>{const p=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(p<=r){const x=a(w);p<=d&&(p<d?c=[{handle:w,validHandleResult:x}]:p===d&&c.push({handle:w,validHandleResult:x}),d=p)}}),!c.length)return{handle:null,validHandleResult:Oo()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:w})=>w.isValid),m=c.some(({handle:w})=>w.type==="target");return c.find(({handle:w,validHandleResult:p})=>m?w.type==="target":h?p.isValid:!0)||c[0]}const Gh={source:null,target:null,sourceHandle:null,targetHandle:null},Oo=()=>({handleDomNode:null,isValid:!1,connection:Gh,endHandle:null});function Fo(e,t,n,r,i,a,s){const o=i==="target",l=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Oo(),handleDomNode:l};if(l){const c=yi(void 0,l),d=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),m=l.classList.contains("connectable"),w=l.classList.contains("connectableend"),p={source:o?d:n,sourceHandle:o?h:r,target:o?n:d,targetHandle:o?r:h};u.connection=p,m&&w&&(t===et.Strict?o&&c==="source"||!o&&c==="target":d!==n||h!==r)&&(u.endHandle={nodeId:d,handleId:h,type:c},u.isValid=a(p))}return u}function Wh({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,a)=>{if(a[le]){const{handleBounds:s}=a[le];let o=[],l=[];s&&(o=Ki(a,s,"source",`${t}-${n}-${r}`),l=Ki(a,s,"target",`${t}-${n}-${r}`)),i.push(...o,...l)}return i},[])}function yi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xn(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Yh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Bo({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:a,setState:s,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const c=Co(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:m,connectionRadius:w,onConnectStart:p,panBy:x,getNodes:g,cancelConnection:y}=a();let N=0,b;const{x:_,y:E}=Oe(e),k=c==null?void 0:c.elementFromPoint(_,E),A=yi(l,k),S=h==null?void 0:h.getBoundingClientRect();if(!S||!A)return;let C,q=Oe(e,S),$=!1,L=null,v=!1,R=null;const T=Wh({nodes:g(),nodeId:n,handleId:t,handleType:A}),V=()=>{if(!m)return;const[O,H]=jo(q,S);x({x:O,y:H}),N=requestAnimationFrame(V)};s({connectionPosition:q,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),p==null||p(e,{nodeId:n,handleId:t,handleType:A});function F(O){const{transform:H}=a();q=Oe(O,S);const{handle:U,validHandleResult:G}=Uh(O,c,ti(q,H,!1,[1,1]),w,T,j=>Fo(j,d,n,t,i?"target":"source",o,c));if(b=U,$||(V(),$=!0),R=G.handleDomNode,L=G.connection,v=G.isValid,s({connectionPosition:b&&v?zo({x:b.x,y:b.y},H):q,connectionStatus:Yh(!!b,v),connectionEndHandle:G.endHandle}),!b&&!v&&!R)return xn(C);L.source!==L.target&&R&&(xn(C),C=R,R.classList.add("connecting","react-flow__handle-connecting"),R.classList.toggle("valid",v),R.classList.toggle("react-flow__handle-valid",v))}function M(O){var H,U;(b||R)&&L&&v&&(r==null||r(L)),(U=(H=a()).onConnectEnd)==null||U.call(H,O),l&&(u==null||u(O)),xn(C),y(),cancelAnimationFrame(N),$=!1,v=!1,L=null,R=null,c.removeEventListener("mousemove",F),c.removeEventListener("mouseup",M),c.removeEventListener("touchmove",F),c.removeEventListener("touchend",M)}c.addEventListener("mousemove",F),c.addEventListener("mouseup",M),c.addEventListener("touchmove",F),c.addEventListener("touchend",M)}const Qi=()=>!0,Xh=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Zh=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:a,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},Ho=P.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:o,children:l,className:u,onMouseDown:c,onTouchStart:d,...h},m)=>{var S,C;const w=s||null,p=e==="target",x=de(),g=Vh(),{connectOnClick:y,noPanClassName:N}=se(Xh,fe),{connecting:b,clickConnecting:_}=se(Zh(g,w,e),fe);g||(C=(S=x.getState()).onError)==null||C.call(S,"010",ze.error010());const E=q=>{const{defaultEdgeOptions:$,onConnect:L,hasDefaultEdges:v}=x.getState(),R={...$,...q};if(v){const{edges:T,setEdges:V}=x.getState();V(Hh(R,T))}L==null||L(R),o==null||o(R)},k=q=>{if(!g)return;const $=Mo(q);i&&($&&q.button===0||!$)&&Bo({event:q,handleId:w,nodeId:g,onConnect:E,isTarget:p,getState:x.getState,setState:x.setState,isValidConnection:n||x.getState().isValidConnection||Qi}),$?c==null||c(q):d==null||d(q)},A=q=>{const{onClickConnectStart:$,onClickConnectEnd:L,connectionClickStartHandle:v,connectionMode:R,isValidConnection:T}=x.getState();if(!g||!v&&!i)return;if(!v){$==null||$(q,{nodeId:g,handleId:w,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:w}});return}const V=Co(q.target),F=n||T||Qi,{connection:M,isValid:O}=Fo({nodeId:g,id:w,type:e},R,v.nodeId,v.handleId||null,v.type,F,V);O&&E(M),L==null||L(q),x.setState({connectionClickStartHandle:null})};return D.createElement("div",{"data-handleid":w,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${w}-${e}`,className:he(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!p,target:p,connectable:r,connectablestart:i,connectableend:a,connecting:_,connectionindicator:r&&(i&&!b||a&&b)}]),onMouseDown:k,onTouchStart:k,onClick:y?A:void 0,ref:m,...h},l)});Ho.displayName="Handle";var Fe=P.memo(Ho);const Uo=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>D.createElement(D.Fragment,null,D.createElement(Fe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,D.createElement(Fe,{type:"source",position:r,isConnectable:t}));Uo.displayName="DefaultNode";var ni=P.memo(Uo);const Go=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>D.createElement(D.Fragment,null,e==null?void 0:e.label,D.createElement(Fe,{type:"source",position:n,isConnectable:t}));Go.displayName="InputNode";var Wo=P.memo(Go);const Yo=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>D.createElement(D.Fragment,null,D.createElement(Fe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Yo.displayName="OutputNode";var Xo=P.memo(Yo);const xi=()=>null;xi.displayName="GroupNode";const Kh=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Vt=e=>e.id;function Qh(e,t){return fe(e.selectedNodes.map(Vt),t.selectedNodes.map(Vt))&&fe(e.selectedEdges.map(Vt),t.selectedEdges.map(Vt))}const Zo=P.memo(({onSelectionChange:e})=>{const t=de(),{selectedNodes:n,selectedEdges:r}=se(Kh,Qh);return P.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(a=>a(i))},[n,r,e]),null});Zo.displayName="SelectionListener";const Jh=e=>!!e.onSelectionChange;function em({onSelectionChange:e}){const t=se(Jh);return e||t?D.createElement(Zo,{onSelectionChange:e}):null}const tm=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function at(e,t){P.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function J(e,t,n){P.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const nm=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:a,onConnectEnd:s,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:m,elevateNodesOnSelect:w,minZoom:p,maxZoom:x,nodeExtent:g,onNodesChange:y,onEdgesChange:N,elementsSelectable:b,connectionMode:_,snapGrid:E,snapToGrid:k,translateExtent:A,connectOnClick:S,defaultEdgeOptions:C,fitView:q,fitViewOptions:$,onNodesDelete:L,onEdgesDelete:v,onNodeDrag:R,onNodeDragStart:T,onNodeDragStop:V,onSelectionDrag:F,onSelectionDragStart:M,onSelectionDragStop:O,noPanClassName:H,nodeOrigin:U,rfId:G,autoPanOnConnect:j,autoPanOnNodeDrag:I,onError:z,connectionRadius:B,isValidConnection:W,nodeDragThreshold:X})=>{const{setNodes:K,setEdges:ne,setDefaultNodesAndEdges:ce,setMinZoom:re,setMaxZoom:ee,setTranslateExtent:ie,setNodeExtent:me,reset:te}=se(tm,fe),Z=de();return P.useEffect(()=>{const ge=r==null?void 0:r.map(Re=>({...Re,...C}));return ce(n,ge),()=>{te()}},[]),J("defaultEdgeOptions",C,Z.setState),J("connectionMode",_,Z.setState),J("onConnect",i,Z.setState),J("onConnectStart",a,Z.setState),J("onConnectEnd",s,Z.setState),J("onClickConnectStart",o,Z.setState),J("onClickConnectEnd",l,Z.setState),J("nodesDraggable",u,Z.setState),J("nodesConnectable",c,Z.setState),J("nodesFocusable",d,Z.setState),J("edgesFocusable",h,Z.setState),J("edgesUpdatable",m,Z.setState),J("elementsSelectable",b,Z.setState),J("elevateNodesOnSelect",w,Z.setState),J("snapToGrid",k,Z.setState),J("snapGrid",E,Z.setState),J("onNodesChange",y,Z.setState),J("onEdgesChange",N,Z.setState),J("connectOnClick",S,Z.setState),J("fitViewOnInit",q,Z.setState),J("fitViewOnInitOptions",$,Z.setState),J("onNodesDelete",L,Z.setState),J("onEdgesDelete",v,Z.setState),J("onNodeDrag",R,Z.setState),J("onNodeDragStart",T,Z.setState),J("onNodeDragStop",V,Z.setState),J("onSelectionDrag",F,Z.setState),J("onSelectionDragStart",M,Z.setState),J("onSelectionDragStop",O,Z.setState),J("noPanClassName",H,Z.setState),J("nodeOrigin",U,Z.setState),J("rfId",G,Z.setState),J("autoPanOnConnect",j,Z.setState),J("autoPanOnNodeDrag",I,Z.setState),J("onError",z,Z.setState),J("connectionRadius",B,Z.setState),J("isValidConnection",W,Z.setState),J("nodeDragThreshold",X,Z.setState),at(e,K),at(t,ne),at(p,re),at(x,ee),at(A,ie),at(g,me),null},Ji={display:"none"},rm={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ko="react-flow__node-desc",Qo="react-flow__edge-desc",im="react-flow__aria-live",sm=e=>e.ariaLiveMessage;function am({rfId:e}){const t=se(sm);return D.createElement("div",{id:`${im}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rm},t)}function om({rfId:e,disableKeyboardA11y:t}){return D.createElement(D.Fragment,null,D.createElement("div",{id:`${Ko}-${e}`,style:Ji},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),D.createElement("div",{id:`${Qo}-${e}`,style:Ji},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&D.createElement(am,{rfId:e}))}var Mt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=P.useState(!1),i=P.useRef(!1),a=P.useRef(new Set([])),[s,o]=P.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=u.reduce((d,h)=>d.concat(...h),[]);return[u,c]}return[[],[]]},[e]);return P.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=m=>{if(i.current=m.ctrlKey||m.metaKey||m.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Qr(m))return!1;const p=ts(m.code,o);a.current.add(m[p]),es(s,a.current,!1)&&(m.preventDefault(),r(!0))},d=m=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Qr(m))return!1;const p=ts(m.code,o);es(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(m[p]),m.key==="Meta"&&a.current.clear(),i.current=!1},h=()=>{a.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function es(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function ts(e,t){return t.includes(e)?"code":"key"}function Jo(e,t,n,r){var o,l;const i=e.parentNode||e.parentId;if(!i)return n;const a=t.get(i),s=Qe(a,r);return Jo(a,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((o=a[le])==null?void 0:o.z)??0)>(n.z??0)?((l=a[le])==null?void 0:l.z)??0:n.z??0},r)}function ec(e,t,n){e.forEach(r=>{var a;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:s,y:o,z:l}=Jo(r,e,{...r.position,z:((a=r[le])==null?void 0:a.z)??0},t);r.positionAbsolute={x:s,y:o},r[le].z=l,n!=null&&n[r.id]&&(r[le].isParent=!0)}})}function vn(e,t,n,r){const i=new Map,a={},s=r?1e3:0;return e.forEach(o=>{var m;const l=(be(o.zIndex)?o.zIndex:0)+(o.selected?s:0),u=t.get(o.id),c={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},d=o.parentNode||o.parentId;d&&(a[d]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(c,le,{enumerable:!1,value:{handleBounds:h||(m=u==null?void 0:u[le])==null?void 0:m.handleBounds,z:l}}),i.set(o.id,c)}),ec(i,n,a),i}function tc(e,t={}){const{getNodes:n,width:r,height:i,minZoom:a,maxZoom:s,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:d}=e(),h=t.initial&&!u&&c;if(o&&l&&(h||!t.initial)){const w=n().filter(x=>{var y;const g=t.includeHiddenNodes?x.width&&x.height:!x.hidden;return(y=t.nodes)!=null&&y.length?g&&t.nodes.some(N=>N.id===x.id):g}),p=w.every(x=>x.width&&x.height);if(w.length>0&&p){const x=cn(w,d),{x:g,y,zoom:N}=Vo(x,r,i,t.minZoom??a,t.maxZoom??s,t.padding??.1),b=qe.translate(g,y).scale(N);return typeof t.duration=="number"&&t.duration>0?o.transform(Ze(l,t.duration),b):o.transform(l,b),!0}}return!1}function cm(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[le]:r[le],selected:n.selected})}),new Map(t)}function lm(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Ot({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:a,onNodesChange:s,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:cm(e,i)}),s==null||s(e)),t!=null&&t.length&&(u&&r({edges:lm(t,a)}),o==null||o(t))}const ot=()=>{},um={zoomIn:ot,zoomOut:ot,zoomTo:ot,getZoom:()=>1,setViewport:ot,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ot,fitBounds:ot,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},dm=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),fm=()=>{const e=de(),{d3Zoom:t,d3Selection:n}=se(dm,fe);return P.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Ze(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Ze(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,a)=>t.scaleTo(Ze(n,a==null?void 0:a.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,a)=>{const[s,o,l]=e.getState().transform,u=qe.translate(i.x??s,i.y??o).scale(i.zoom??l);t.transform(Ze(n,a==null?void 0:a.duration),u)},getViewport:()=>{const[i,a,s]=e.getState().transform;return{x:i,y:a,zoom:s}},fitView:i=>tc(e.getState,i),setCenter:(i,a,s)=>{const{width:o,height:l,maxZoom:u}=e.getState(),c=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,d=o/2-i*c,h=l/2-a*c,m=qe.translate(d,h).scale(c);t.transform(Ze(n,s==null?void 0:s.duration),m)},fitBounds:(i,a)=>{const{width:s,height:o,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:d,zoom:h}=Vo(i,s,o,l,u,(a==null?void 0:a.padding)??.1),m=qe.translate(c,d).scale(h);t.transform(Ze(n,a==null?void 0:a.duration),m)},project:i=>{const{transform:a,snapToGrid:s,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ti(i,a,s,o)},screenToFlowPosition:i=>{const{transform:a,snapToGrid:s,snapGrid:o,domNode:l}=e.getState();if(!l)return i;const{x:u,y:c}=l.getBoundingClientRect(),d={x:i.x-u,y:i.y-c};return ti(d,a,s,o)},flowToScreenPosition:i=>{const{transform:a,domNode:s}=e.getState();if(!s)return i;const{x:o,y:l}=s.getBoundingClientRect(),u=zo(i,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:um,[t,n])};function vi(){const e=fm(),t=de(),n=P.useCallback(()=>t.getState().getNodes().map(p=>({...p})),[]),r=P.useCallback(p=>t.getState().nodeInternals.get(p),[]),i=P.useCallback(()=>{const{edges:p=[]}=t.getState();return p.map(x=>({...x}))},[]),a=P.useCallback(p=>{const{edges:x=[]}=t.getState();return x.find(g=>g.id===p)},[]),s=P.useCallback(p=>{const{getNodes:x,setNodes:g,hasDefaultNodes:y,onNodesChange:N}=t.getState(),b=x(),_=typeof p=="function"?p(b):p;if(y)g(_);else if(N){const E=_.length===0?b.map(k=>({type:"remove",id:k.id})):_.map(k=>({item:k,type:"reset"}));N(E)}},[]),o=P.useCallback(p=>{const{edges:x=[],setEdges:g,hasDefaultEdges:y,onEdgesChange:N}=t.getState(),b=typeof p=="function"?p(x):p;if(y)g(b);else if(N){const _=b.length===0?x.map(E=>({type:"remove",id:E.id})):b.map(E=>({item:E,type:"reset"}));N(_)}},[]),l=P.useCallback(p=>{const x=Array.isArray(p)?p:[p],{getNodes:g,setNodes:y,hasDefaultNodes:N,onNodesChange:b}=t.getState();if(N){const E=[...g(),...x];y(E)}else if(b){const _=x.map(E=>({item:E,type:"add"}));b(_)}},[]),u=P.useCallback(p=>{const x=Array.isArray(p)?p:[p],{edges:g=[],setEdges:y,hasDefaultEdges:N,onEdgesChange:b}=t.getState();if(N)y([...g,...x]);else if(b){const _=x.map(E=>({item:E,type:"add"}));b(_)}},[]),c=P.useCallback(()=>{const{getNodes:p,edges:x=[],transform:g}=t.getState(),[y,N,b]=g;return{nodes:p().map(_=>({..._})),edges:x.map(_=>({..._})),viewport:{x:y,y:N,zoom:b}}},[]),d=P.useCallback(({nodes:p,edges:x})=>{const{nodeInternals:g,getNodes:y,edges:N,hasDefaultNodes:b,hasDefaultEdges:_,onNodesDelete:E,onEdgesDelete:k,onNodesChange:A,onEdgesChange:S}=t.getState(),C=(p||[]).map(R=>R.id),q=(x||[]).map(R=>R.id),$=y().reduce((R,T)=>{const V=T.parentNode||T.parentId,F=!C.includes(T.id)&&V&&R.find(O=>O.id===V);return(typeof T.deletable=="boolean"?T.deletable:!0)&&(C.includes(T.id)||F)&&R.push(T),R},[]),L=N.filter(R=>typeof R.deletable=="boolean"?R.deletable:!0),v=L.filter(R=>q.includes(R.id));if($||v){const R=$o($,L),T=[...v,...R],V=T.reduce((F,M)=>(F.includes(M.id)||F.push(M.id),F),[]);if((_||b)&&(_&&t.setState({edges:N.filter(F=>!V.includes(F.id))}),b&&($.forEach(F=>{g.delete(F.id)}),t.setState({nodeInternals:new Map(g)}))),V.length>0&&(k==null||k(T),S&&S(V.map(F=>({id:F,type:"remove"})))),$.length>0&&(E==null||E($),A)){const F=$.map(M=>({id:M.id,type:"remove"}));A(F)}}},[]),h=P.useCallback(p=>{const x=Mh(p),g=x?null:t.getState().nodeInternals.get(p.id);return!x&&!g?[null,null,x]:[x?p:Gi(g),g,x]},[]),m=P.useCallback((p,x=!0,g)=>{const[y,N,b]=h(p);return y?(g||t.getState().getNodes()).filter(_=>{if(!b&&(_.id===N.id||!_.positionAbsolute))return!1;const E=Gi(_),k=Kr(E,y);return x&&k>0||k>=y.width*y.height}):[]},[]),w=P.useCallback((p,x,g=!0)=>{const[y]=h(p);if(!y)return!1;const N=Kr(y,x);return g&&N>0||N>=y.width*y.height},[]);return P.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:a,setNodes:s,setEdges:o,addNodes:l,addEdges:u,toObject:c,deleteElements:d,getIntersectingNodes:m,isNodeIntersecting:w}),[e,n,r,i,a,s,o,l,u,c,d,m,w])}const hm={actInsideInputWithModifier:!1};var mm=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=de(),{deleteElements:r}=vi(),i=Mt(e,hm),a=Mt(t);P.useEffect(()=>{if(i){const{edges:s,getNodes:o}=n.getState(),l=o().filter(c=>c.selected),u=s.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),P.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function pm(e){const t=de();P.useEffect(()=>{let n;const r=()=>{var a,s;if(!e.current)return;const i=di(e.current);(i.height===0||i.width===0)&&((s=(a=t.getState()).onError)==null||s.call(a,"004",ze.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const bi={position:"absolute",width:"100%",height:"100%",top:0,left:0},gm=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ft=e=>({x:e.x,y:e.y,zoom:e.k}),ct=(e,t)=>e.target.closest(`.${t}`),ns=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),rs=e=>{const t=e.ctrlKey&&Kt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},ym=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),xm=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:a=!0,panOnScroll:s=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Ke.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:d=!0,defaultViewport:h,translateExtent:m,minZoom:w,maxZoom:p,zoomActivationKeyCode:x,preventScrolling:g=!0,children:y,noWheelClassName:N,noPanClassName:b})=>{const _=P.useRef(),E=de(),k=P.useRef(!1),A=P.useRef(!1),S=P.useRef(null),C=P.useRef({x:0,y:0,zoom:0}),{d3Zoom:q,d3Selection:$,d3ZoomHandler:L,userSelectionActive:v}=se(ym,fe),R=Mt(x),T=P.useRef(0),V=P.useRef(!1),F=P.useRef();return pm(S),P.useEffect(()=>{if(S.current){const M=S.current.getBoundingClientRect(),O=ko().scaleExtent([w,p]).translateExtent(m),H=ve(S.current).call(O),U=qe.translate(h.x,h.y).scale(pt(h.zoom,w,p)),G=[[0,0],[M.width,M.height]],j=O.constrain()(U,G,m);O.transform(H,j),O.wheelDelta(rs),E.setState({d3Zoom:O,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[j.x,j.y,j.k],domNode:S.current.closest(".react-flow")})}},[]),P.useEffect(()=>{$&&q&&(s&&!R&&!v?$.on("wheel.zoom",M=>{if(ct(M,N))return!1;M.preventDefault(),M.stopImmediatePropagation();const O=$.property("__zoom").k||1;if(M.ctrlKey&&a){const W=_e(M),X=rs(M),K=O*Math.pow(2,X);q.scaleTo($,K,W,M);return}const H=M.deltaMode===1?20:1;let U=l===Ke.Vertical?0:M.deltaX*H,G=l===Ke.Horizontal?0:M.deltaY*H;!Kt()&&M.shiftKey&&l!==Ke.Vertical&&(U=M.deltaY*H,G=0),q.translateBy($,-(U/O)*o,-(G/O)*o,{internal:!0});const j=Ft($.property("__zoom")),{onViewportChangeStart:I,onViewportChange:z,onViewportChangeEnd:B}=E.getState();clearTimeout(F.current),V.current||(V.current=!0,t==null||t(M,j),I==null||I(j)),V.current&&(e==null||e(M,j),z==null||z(j),F.current=setTimeout(()=>{n==null||n(M,j),B==null||B(j),V.current=!1},150))},{passive:!1}):typeof L<"u"&&$.on("wheel.zoom",function(M,O){if(!g&&M.type==="wheel"&&!M.ctrlKey||ct(M,N))return null;M.preventDefault(),L.call(this,M,O)},{passive:!1}))},[v,s,l,$,q,L,R,a,g,N,t,e,n]),P.useEffect(()=>{q&&q.on("start",M=>{var U,G;if(!M.sourceEvent||M.sourceEvent.internal)return null;T.current=(U=M.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:O}=E.getState(),H=Ft(M.transform);k.current=!0,C.current=H,((G=M.sourceEvent)==null?void 0:G.type)==="mousedown"&&E.setState({paneDragging:!0}),O==null||O(H),t==null||t(M.sourceEvent,H)})},[q,t]),P.useEffect(()=>{q&&(v&&!k.current?q.on("zoom",null):v||q.on("zoom",M=>{var H;const{onViewportChange:O}=E.getState();if(E.setState({transform:[M.transform.x,M.transform.y,M.transform.k]}),A.current=!!(r&&ns(d,T.current??0)),(e||O)&&!((H=M.sourceEvent)!=null&&H.internal)){const U=Ft(M.transform);O==null||O(U),e==null||e(M.sourceEvent,U)}}))},[v,q,e,d,r]),P.useEffect(()=>{q&&q.on("end",M=>{if(!M.sourceEvent||M.sourceEvent.internal)return null;const{onViewportChangeEnd:O}=E.getState();if(k.current=!1,E.setState({paneDragging:!1}),r&&ns(d,T.current??0)&&!A.current&&r(M.sourceEvent),A.current=!1,(n||O)&&gm(C.current,M.transform)){const H=Ft(M.transform);C.current=H,clearTimeout(_.current),_.current=setTimeout(()=>{O==null||O(H),n==null||n(M.sourceEvent,H)},s?150:0)}})},[q,s,d,n,r]),P.useEffect(()=>{q&&q.filter(M=>{const O=R||i,H=a&&M.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&M.button===1&&M.type==="mousedown"&&(ct(M,"react-flow__node")||ct(M,"react-flow__edge")))return!0;if(!d&&!O&&!s&&!u&&!a||v||!u&&M.type==="dblclick"||ct(M,N)&&M.type==="wheel"||ct(M,b)&&(M.type!=="wheel"||s&&M.type==="wheel"&&!R)||!a&&M.ctrlKey&&M.type==="wheel"||!O&&!s&&!H&&M.type==="wheel"||!d&&(M.type==="mousedown"||M.type==="touchstart")||Array.isArray(d)&&!d.includes(M.button)&&M.type==="mousedown")return!1;const U=Array.isArray(d)&&d.includes(M.button)||!M.button||M.button<=1;return(!M.ctrlKey||M.type==="wheel")&&U})},[v,q,i,a,s,u,d,c,R]),D.createElement("div",{className:"react-flow__renderer",ref:S,style:bi},y)},vm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function bm(){const{userSelectionActive:e,userSelectionRect:t}=se(vm,fe);return e&&t?D.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function is(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,a=t.position.y+t.height-r.height;if(i>0||a>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),a>0&&(r.style.height+=a),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function nc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const a=e.filter(o=>o.id===i.id);if(a.length===0)return r.push(i),r;const s={...i};for(const o of a)if(o)switch(o.type){case"select":{s.selected=o.selected;break}case"position":{typeof o.position<"u"&&(s.position=o.position),typeof o.positionAbsolute<"u"&&(s.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(s.dragging=o.dragging),s.expandParent&&is(r,s);break}case"dimensions":{typeof o.dimensions<"u"&&(s.width=o.dimensions.width,s.height=o.dimensions.height),typeof o.updateStyle<"u"&&(s.style={...s.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(s.resizing=o.resizing),s.expandParent&&is(r,s);break}case"remove":return r}return r.push(s),r},n)}function rc(e,t){return nc(e,t)}function wm(e,t){return nc(e,t)}const $e=(e,t)=>({id:e,type:"select",selected:t});function ut(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push($e(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push($e(r.id,!1))),n},[])}const bn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Nm=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ic=P.memo(({isSelecting:e,selectionMode:t=At.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:s,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:d})=>{const h=P.useRef(null),m=de(),w=P.useRef(0),p=P.useRef(0),x=P.useRef(),{userSelectionActive:g,elementsSelectable:y,dragging:N}=se(Nm,fe),b=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,p.current=0},_=L=>{a==null||a(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},E=L=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){L.preventDefault();return}s==null||s(L)},k=o?L=>o(L):void 0,A=L=>{const{resetSelectedElements:v,domNode:R}=m.getState();if(x.current=R==null?void 0:R.getBoundingClientRect(),!y||!e||L.button!==0||L.target!==h.current||!x.current)return;const{x:T,y:V}=Oe(L,x.current);v(),m.setState({userSelectionRect:{width:0,height:0,startX:T,startY:V,x:T,y:V}}),r==null||r(L)},S=L=>{const{userSelectionRect:v,nodeInternals:R,edges:T,transform:V,onNodesChange:F,onEdgesChange:M,nodeOrigin:O,getNodes:H}=m.getState();if(!e||!x.current||!v)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=Oe(L,x.current),G=v.startX??0,j=v.startY??0,I={...v,x:U.x<G?U.x:G,y:U.y<j?U.y:j,width:Math.abs(U.x-G),height:Math.abs(U.y-j)},z=H(),B=Lo(R,I,V,t===At.Partial,!0,O),W=$o(B,T).map(K=>K.id),X=B.map(K=>K.id);if(w.current!==X.length){w.current=X.length;const K=ut(z,X);K.length&&(F==null||F(K))}if(p.current!==W.length){p.current=W.length;const K=ut(T,W);K.length&&(M==null||M(K))}m.setState({userSelectionRect:I})},C=L=>{if(L.button!==0)return;const{userSelectionRect:v}=m.getState();!g&&v&&L.target===h.current&&(_==null||_(L)),m.setState({nodesSelectionActive:w.current>0}),b(),i==null||i(L)},q=L=>{g&&(m.setState({nodesSelectionActive:w.current>0}),i==null||i(L)),b()},$=y&&(e||g);return D.createElement("div",{className:he(["react-flow__pane",{dragging:N,selection:e}]),onClick:$?void 0:bn(_,h),onContextMenu:bn(E,h),onWheel:bn(k,h),onMouseEnter:$?void 0:l,onMouseDown:$?A:void 0,onMouseMove:$?S:u,onMouseUp:$?C:void 0,onMouseLeave:$?q:c,ref:h,style:bi},d,D.createElement(bm,null))});ic.displayName="Pane";function sc(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:sc(r,t):!1}function ss(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function _m(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!sc(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var a,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((a=i.positionAbsolute)==null?void 0:a.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function Em(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ac(e,t,n,r,i=[0,0],a){const s=Em(e,e.extent||r);let o=s;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const d=n.get(l),{x:h,y:m}=Qe(d,i).positionAbsolute;o=d&&be(h)&&be(m)&&be(d.width)&&be(d.height)?[[h+e.width*i[0],m+e.height*i[1]],[h+d.width-e.width+e.width*i[0],m+d.height-e.height+e.height*i[1]]]:o}else a==null||a("005",ze.error005()),o=s;else if(e.extent&&l&&e.extent!=="parent"){const d=n.get(l),{x:h,y:m}=Qe(d,i).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+m],[e.extent[1][0]+h,e.extent[1][1]+m]]}let u={x:0,y:0};if(l){const d=n.get(l);u=Qe(d,i).positionAbsolute}const c=o&&o!=="parent"?fi(t,o):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function wn({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const as=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const a=Array.from(i),s=t.getBoundingClientRect(),o={x:s.width*r[0],y:s.height*r[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-s.left-o.x)/n,y:(u.top-s.top-o.y)/n,...di(l)}})};function _t(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function ri({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeInternals:o,onError:l}=t.getState(),u=o.get(e);if(!u){l==null||l("012",ze.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function km(){const e=de();return P.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:a}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(s-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:a?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:a?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Nn(e){return(t,n,r)=>e==null?void 0:e(t,r)}function oc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,selectNodesOnDrag:s}){const o=de(),[l,u]=P.useState(!1),c=P.useRef([]),d=P.useRef({x:null,y:null}),h=P.useRef(0),m=P.useRef(null),w=P.useRef({x:0,y:0}),p=P.useRef(null),x=P.useRef(!1),g=P.useRef(!1),y=P.useRef(!1),N=km();return P.useEffect(()=>{if(e!=null&&e.current){const b=ve(e.current),_=({x:A,y:S})=>{const{nodeInternals:C,onNodeDrag:q,onSelectionDrag:$,updateNodePositions:L,nodeExtent:v,snapGrid:R,snapToGrid:T,nodeOrigin:V,onError:F}=o.getState();d.current={x:A,y:S};let M=!1,O={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&v){const U=cn(c.current,V);O=Rt(U)}if(c.current=c.current.map(U=>{const G={x:A-U.distance.x,y:S-U.distance.y};T&&(G.x=R[0]*Math.round(G.x/R[0]),G.y=R[1]*Math.round(G.y/R[1]));const j=[[v[0][0],v[0][1]],[v[1][0],v[1][1]]];c.current.length>1&&v&&!U.extent&&(j[0][0]=U.positionAbsolute.x-O.x+v[0][0],j[1][0]=U.positionAbsolute.x+(U.width??0)-O.x2+v[1][0],j[0][1]=U.positionAbsolute.y-O.y+v[0][1],j[1][1]=U.positionAbsolute.y+(U.height??0)-O.y2+v[1][1]);const I=ac(U,G,C,j,V,F);return M=M||U.position.x!==I.position.x||U.position.y!==I.position.y,U.position=I.position,U.positionAbsolute=I.positionAbsolute,U}),!M)return;L(c.current,!0,!0),u(!0);const H=i?q:Nn($);if(H&&p.current){const[U,G]=wn({nodeId:i,dragItems:c.current,nodeInternals:C});H(p.current,U,G)}},E=()=>{if(!m.current)return;const[A,S]=jo(w.current,m.current);if(A!==0||S!==0){const{transform:C,panBy:q}=o.getState();d.current.x=(d.current.x??0)-A/C[2],d.current.y=(d.current.y??0)-S/C[2],q({x:A,y:S})&&_(d.current)}h.current=requestAnimationFrame(E)},k=A=>{var V;const{nodeInternals:S,multiSelectionActive:C,nodesDraggable:q,unselectNodesAndEdges:$,onNodeDragStart:L,onSelectionDragStart:v}=o.getState();g.current=!0;const R=i?L:Nn(v);(!s||!a)&&!C&&i&&((V=S.get(i))!=null&&V.selected||$()),i&&a&&s&&ri({id:i,store:o,nodeRef:e});const T=N(A);if(d.current=T,c.current=_m(S,q,T,i),R&&c.current){const[F,M]=wn({nodeId:i,dragItems:c.current,nodeInternals:S});R(A.sourceEvent,F,M)}};if(t)b.on(".drag",null);else{const A=cf().on("start",S=>{const{domNode:C,nodeDragThreshold:q}=o.getState();q===0&&k(S),y.current=!1;const $=N(S);d.current=$,m.current=(C==null?void 0:C.getBoundingClientRect())||null,w.current=Oe(S.sourceEvent,m.current)}).on("drag",S=>{var L,v;const C=N(S),{autoPanOnNodeDrag:q,nodeDragThreshold:$}=o.getState();if(S.sourceEvent.type==="touchmove"&&S.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!x.current&&g.current&&q&&(x.current=!0,E()),!g.current){const R=C.xSnapped-(((L=d==null?void 0:d.current)==null?void 0:L.x)??0),T=C.ySnapped-(((v=d==null?void 0:d.current)==null?void 0:v.y)??0);Math.sqrt(R*R+T*T)>$&&k(S)}(d.current.x!==C.xSnapped||d.current.y!==C.ySnapped)&&c.current&&g.current&&(p.current=S.sourceEvent,w.current=Oe(S.sourceEvent,m.current),_(C))}}).on("end",S=>{if(!(!g.current||y.current)&&(u(!1),x.current=!1,g.current=!1,cancelAnimationFrame(h.current),c.current)){const{updateNodePositions:C,nodeInternals:q,onNodeDragStop:$,onSelectionDragStop:L}=o.getState(),v=i?$:Nn(L);if(C(c.current,!1,!1),v){const[R,T]=wn({nodeId:i,dragItems:c.current,nodeInternals:q});v(S.sourceEvent,R,T)}}}).filter(S=>{const C=S.target;return!S.button&&(!n||!ss(C,`.${n}`,e))&&(!r||ss(C,r,e))});return b.call(A),()=>{b.on(".drag",null)}}}},[e,t,n,r,a,o,i,s,N]),l}function cc(){const e=de();return P.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:a,getNodes:s,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),d=s().filter(y=>y.selected&&(y.draggable||c&&typeof y.draggable>"u")),h=o?l[0]:5,m=o?l[1]:5,w=n.isShiftPressed?4:1,p=n.x*h*w,x=n.y*m*w,g=d.map(y=>{if(y.positionAbsolute){const N={x:y.positionAbsolute.x+p,y:y.positionAbsolute.y+x};o&&(N.x=l[0]*Math.round(N.x/l[0]),N.y=l[1]*Math.round(N.y/l[1]));const{positionAbsolute:b,position:_}=ac(y,N,r,i,void 0,u);y.position=_,y.positionAbsolute=b}return y});a(g,!0,!1)},[])}const ft={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Et=e=>{const t=({id:n,type:r,data:i,xPos:a,yPos:s,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:m,onContextMenu:w,onDoubleClick:p,style:x,className:g,isDraggable:y,isSelectable:N,isConnectable:b,isFocusable:_,selectNodesOnDrag:E,sourcePosition:k,targetPosition:A,hidden:S,resizeObserver:C,dragHandle:q,zIndex:$,isParent:L,noDragClassName:v,noPanClassName:R,initialized:T,disableKeyboardA11y:V,ariaLabel:F,rfId:M,hasHandleBounds:O})=>{const H=de(),U=P.useRef(null),G=P.useRef(null),j=P.useRef(k),I=P.useRef(A),z=P.useRef(r),B=N||y||c||d||h||m,W=cc(),X=_t(n,H.getState,d),K=_t(n,H.getState,h),ne=_t(n,H.getState,m),ce=_t(n,H.getState,w),re=_t(n,H.getState,p),ee=te=>{const{nodeDragThreshold:Z}=H.getState();if(N&&(!E||!y||Z>0)&&ri({id:n,store:H,nodeRef:U}),c){const ge=H.getState().nodeInternals.get(n);ge&&c(te,{...ge})}},ie=te=>{if(!Qr(te)&&!V)if(Ao.includes(te.key)&&N){const Z=te.key==="Escape";ri({id:n,store:H,unselect:Z,nodeRef:U})}else y&&u&&Object.prototype.hasOwnProperty.call(ft,te.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${te.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~s}`}),W({x:ft[te.key].x,y:ft[te.key].y,isShiftPressed:te.shiftKey}))};P.useEffect(()=>()=>{G.current&&(C==null||C.unobserve(G.current),G.current=null)},[]),P.useEffect(()=>{if(U.current&&!S){const te=U.current;(!T||!O||G.current!==te)&&(G.current&&(C==null||C.unobserve(G.current)),C==null||C.observe(te),G.current=te)}},[S,T,O]),P.useEffect(()=>{const te=z.current!==r,Z=j.current!==k,ge=I.current!==A;U.current&&(te||Z||ge)&&(te&&(z.current=r),Z&&(j.current=k),ge&&(I.current=A),H.getState().updateNodeDimensions([{id:n,nodeElement:U.current,forceUpdate:!0}]))},[n,r,k,A]);const me=oc({nodeRef:U,disabled:S||!y,noDragClassName:v,handleSelector:q,nodeId:n,isSelectable:N,selectNodesOnDrag:E});return S?null:D.createElement("div",{className:he(["react-flow__node",`react-flow__node-${r}`,{[R]:y},g,{selected:u,selectable:N,parent:L,dragging:me}]),ref:U,style:{zIndex:$,transform:`translate(${o}px,${l}px)`,pointerEvents:B?"all":"none",visibility:T?"visible":"hidden",...x},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:X,onMouseMove:K,onMouseLeave:ne,onContextMenu:ce,onClick:ee,onDoubleClick:re,onKeyDown:_?ie:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":V?void 0:`${Ko}-${M}`,"aria-label":F},D.createElement($h,{value:n},D.createElement(e,{id:n,data:i,type:r,xPos:a,yPos:s,selected:u,isConnectable:b,sourcePosition:k,targetPosition:A,dragging:me,dragHandle:q,zIndex:$})))};return t.displayName="NodeWrapper",P.memo(t)};const Sm=e=>{const t=e.getNodes().filter(n=>n.selected);return{...cn(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function jm({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=de(),{width:i,height:a,x:s,y:o,transformString:l,userSelectionActive:u}=se(Sm,fe),c=cc(),d=P.useRef(null);if(P.useEffect(()=>{var w;n||(w=d.current)==null||w.focus({preventScroll:!0})},[n]),oc({nodeRef:d}),u||!i||!a)return null;const h=e?w=>{const p=r.getState().getNodes().filter(x=>x.selected);e(w,p)}:void 0,m=w=>{Object.prototype.hasOwnProperty.call(ft,w.key)&&c({x:ft[w.key].x,y:ft[w.key].y,isShiftPressed:w.shiftKey})};return D.createElement("div",{className:he(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},D.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:a,top:o,left:s}}))}var Cm=P.memo(jm);const Tm=e=>e.nodesSelectionActive,lc=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:h,selectionMode:m,onSelectionStart:w,onSelectionEnd:p,multiSelectionKeyCode:x,panActivationKeyCode:g,zoomActivationKeyCode:y,elementsSelectable:N,zoomOnScroll:b,zoomOnPinch:_,panOnScroll:E,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:S,panOnDrag:C,defaultViewport:q,translateExtent:$,minZoom:L,maxZoom:v,preventScrolling:R,onSelectionContextMenu:T,noWheelClassName:V,noPanClassName:F,disableKeyboardA11y:M})=>{const O=se(Tm),H=Mt(d),U=Mt(g),G=U||C,j=U||E,I=H||h&&G!==!0;return mm({deleteKeyCode:o,multiSelectionKeyCode:x}),D.createElement(xm,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:a,elementsSelectable:N,zoomOnScroll:b,zoomOnPinch:_,panOnScroll:j,panOnScrollSpeed:k,panOnScrollMode:A,zoomOnDoubleClick:S,panOnDrag:!H&&G,defaultViewport:q,translateExtent:$,minZoom:L,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:R,noWheelClassName:V,noPanClassName:F},D.createElement(ic,{onSelectionStart:w,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:G,isSelecting:!!I,selectionMode:m},e,O&&D.createElement(Cm,{onSelectionContextMenu:T,noPanClassName:F,disableKeyboardA11y:M})))};lc.displayName="FlowRenderer";var Rm=P.memo(lc);function Am(e){return se(P.useCallback(n=>e?Lo(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Mm(e){const t={input:Et(e.input||Wo),default:Et(e.default||ni),output:Et(e.output||Xo),group:Et(e.group||xi)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,a)=>(i[a]=Et(e[a]||ni),i),n);return{...t,...r}}const Im=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Pm=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),uc=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:a,onError:s}=se(Pm,fe),o=Am(e.onlyRenderVisibleElements),l=P.useRef(),u=P.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(d=>{const h=d.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));a(h)});return l.current=c,c},[]);return P.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),D.createElement("div",{className:"react-flow__nodes",style:bi},o.map(c=>{var _,E,k;let d=c.type||"default";e.nodeTypes[d]||(s==null||s("003",ze.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,m=!!(c.draggable||t&&typeof c.draggable>"u"),w=!!(c.selectable||i&&typeof c.selectable>"u"),p=!!(c.connectable||n&&typeof c.connectable>"u"),x=!!(c.focusable||r&&typeof c.focusable>"u"),g=e.nodeExtent?fi(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,y=(g==null?void 0:g.x)??0,N=(g==null?void 0:g.y)??0,b=Im({x:y,y:N,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return D.createElement(h,{key:c.id,id:c.id,className:c.className,style:c.style,type:d,data:c.data,sourcePosition:c.sourcePosition||Y.Bottom,targetPosition:c.targetPosition||Y.Top,hidden:c.hidden,xPos:y,yPos:N,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:m,isSelectable:w,isConnectable:p,isFocusable:x,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((_=c[le])==null?void 0:_.z)??0,isParent:!!((E=c[le])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!((k=c[le])!=null&&k.handleBounds)})}))};uc.displayName="NodeRenderer";var qm=P.memo(uc);const Dm=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,zm=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,os="react-flow__edgeupdater",cs=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:o})=>D.createElement("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:he([os,`${os}-${o}`]),cx:Dm(t,r,e),cy:zm(n,r,e),r,stroke:"transparent",fill:"transparent"}),Lm=()=>!0;var lt=e=>{const t=({id:n,className:r,type:i,data:a,onClick:s,onEdgeDoubleClick:o,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:m,labelBgPadding:w,labelBgBorderRadius:p,style:x,source:g,target:y,sourceX:N,sourceY:b,targetX:_,targetY:E,sourcePosition:k,targetPosition:A,elementsSelectable:S,hidden:C,sourceHandleId:q,targetHandleId:$,onContextMenu:L,onMouseEnter:v,onMouseMove:R,onMouseLeave:T,reconnectRadius:V,onReconnect:F,onReconnectStart:M,onReconnectEnd:O,markerEnd:H,markerStart:U,rfId:G,ariaLabel:j,isFocusable:I,isReconnectable:z,pathOptions:B,interactionWidth:W,disableKeyboardA11y:X})=>{const K=P.useRef(null),[ne,ce]=P.useState(!1),[re,ee]=P.useState(!1),ie=de(),me=P.useMemo(()=>`url('#${ei(U,G)}')`,[U,G]),te=P.useMemo(()=>`url('#${ei(H,G)}')`,[H,G]);if(C)return null;const Z=pe=>{var Ce;const{edges:Ne,addSelectedEdges:Ue,unselectNodesAndEdges:Ge,multiSelectionActive:We}=ie.getState(),Me=Ne.find(xt=>xt.id===n);Me&&(S&&(ie.setState({nodesSelectionActive:!1}),Me.selected&&We?(Ge({nodes:[],edges:[Me]}),(Ce=K.current)==null||Ce.blur()):Ue([n])),s&&s(pe,Me))},ge=Nt(n,ie.getState,o),Re=Nt(n,ie.getState,L),gt=Nt(n,ie.getState,v),tt=Nt(n,ie.getState,R),nt=Nt(n,ie.getState,T),Ae=(pe,Ne)=>{if(pe.button!==0)return;const{edges:Ue,isValidConnection:Ge}=ie.getState(),We=Ne?y:g,Me=(Ne?$:q)||null,Ce=Ne?"target":"source",xt=Ge||Lm,ln=Ne,vt=Ue.find(Ye=>Ye.id===n);ee(!0),M==null||M(pe,vt,Ce);const un=Ye=>{ee(!1),O==null||O(Ye,vt,Ce)};Bo({event:pe,handleId:Me,nodeId:We,onConnect:Ye=>F==null?void 0:F(vt,Ye),isTarget:ln,getState:ie.getState,setState:ie.setState,isValidConnection:xt,edgeUpdaterType:Ce,onReconnectEnd:un})},rt=pe=>Ae(pe,!0),Be=pe=>Ae(pe,!1),He=()=>ce(!0),it=()=>ce(!1),st=!S&&!s,yt=pe=>{var Ne;if(!X&&Ao.includes(pe.key)&&S){const{unselectNodesAndEdges:Ue,addSelectedEdges:Ge,edges:We}=ie.getState();pe.key==="Escape"?((Ne=K.current)==null||Ne.blur(),Ue({edges:[We.find(Ce=>Ce.id===n)]})):Ge([n])}};return D.createElement("g",{className:he(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:st,updating:ne}]),onClick:Z,onDoubleClick:ge,onContextMenu:Re,onMouseEnter:gt,onMouseMove:tt,onMouseLeave:nt,onKeyDown:I?yt:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":j===null?void 0:j||`Edge from ${g} to ${y}`,"aria-describedby":I?`${Qo}-${G}`:void 0,ref:K},!re&&D.createElement(e,{id:n,source:g,target:y,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:m,labelBgPadding:w,labelBgBorderRadius:p,data:a,style:x,sourceX:N,sourceY:b,targetX:_,targetY:E,sourcePosition:k,targetPosition:A,sourceHandleId:q,targetHandleId:$,markerStart:me,markerEnd:te,pathOptions:B,interactionWidth:W}),z&&D.createElement(D.Fragment,null,(z==="source"||z===!0)&&D.createElement(cs,{position:k,centerX:N,centerY:b,radius:V,onMouseDown:rt,onMouseEnter:He,onMouseOut:it,type:"source"}),(z==="target"||z===!0)&&D.createElement(cs,{position:A,centerX:_,centerY:E,radius:V,onMouseDown:Be,onMouseEnter:He,onMouseOut:it,type:"target"})))};return t.displayName="EdgeWrapper",P.memo(t)};function $m(e){const t={default:lt(e.default||Jt),straight:lt(e.bezier||pi),step:lt(e.step||mi),smoothstep:lt(e.step||on),simplebezier:lt(e.simplebezier||hi)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,a)=>(i[a]=lt(e[a]||Jt),i),n);return{...t,...r}}function ls(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+a/2,y:i};case Y.Right:return{x:r+a,y:i+s/2};case Y.Bottom:return{x:r+a/2,y:i+s};case Y.Left:return{x:r,y:i+s/2}}}function us(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Vm=(e,t,n,r,i,a)=>{const s=ls(n,e,t),o=ls(a,r,i);return{sourceX:s.x,sourceY:s.y,targetX:o.x,targetY:o.y}};function Om({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:a,width:s,height:o,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Rt({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:o/l[2]}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*h)>0}function ds(e){var r,i,a,s,o;const t=((r=e==null?void 0:e[le])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Fm=[{level:0,isMaxLevel:!0,edges:[]}];function Bm(e,t,n=!1){let r=-1;const i=e.reduce((s,o)=>{var c,d;const l=be(o.zIndex);let u=l?o.zIndex:0;if(n){const h=t.get(o.target),m=t.get(o.source),w=o.selected||(h==null?void 0:h.selected)||(m==null?void 0:m.selected),p=Math.max(((c=m==null?void 0:m[le])==null?void 0:c.z)||0,((d=h==null?void 0:h[le])==null?void 0:d.z)||0,1e3);u=(l?o.zIndex:0)+(w?p:0)}return s[u]?s[u].push(o):s[u]=[o],r=u>r?u:r,s},{}),a=Object.entries(i).map(([s,o])=>{const l=+s;return{edges:o,level:l,isMaxLevel:l===r}});return a.length===0?Fm:a}function Hm(e,t,n){const r=se(P.useCallback(i=>e?i.edges.filter(a=>{const s=t.get(a.source),o=t.get(a.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Om({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:o.width,targetHeight:o.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return Bm(r,t,n)}const Um=({color:e="none",strokeWidth:t=1})=>D.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Gm=({color:e="none",strokeWidth:t=1})=>D.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),fs={[Qt.Arrow]:Um,[Qt.ArrowClosed]:Gm};function Wm(e){const t=de();return P.useMemo(()=>{var i,a;return Object.prototype.hasOwnProperty.call(fs,e)?fs[e]:((a=(i=t.getState()).onError)==null||a.call(i,"009",ze.error009(e)),null)},[e])}const Ym=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:o="auto-start-reverse"})=>{const l=Wm(t);return l?D.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},D.createElement(l,{color:n,strokeWidth:s})):null},Xm=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,a)=>([a.markerStart,a.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const o=ei(s,t);r.includes(o)||(i.push({id:o,color:s.color||e,...s}),r.push(o))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))},dc=({defaultColor:e,rfId:t})=>{const n=se(P.useCallback(Xm({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((a,s)=>a.id!==i[s].id)));return D.createElement("defs",null,n.map(r=>D.createElement(Ym,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};dc.displayName="MarkerDefinitions";var Zm=P.memo(dc);const Km=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),fc=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:a,onEdgeContextMenu:s,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:m,onReconnectEnd:w,reconnectRadius:p,children:x,disableKeyboardA11y:g})=>{const{edgesFocusable:y,edgesUpdatable:N,elementsSelectable:b,width:_,height:E,connectionMode:k,nodeInternals:A,onError:S}=se(Km,fe),C=Hm(t,A,n);return _?D.createElement(D.Fragment,null,C.map(({level:q,edges:$,isMaxLevel:L})=>D.createElement("svg",{key:q,style:{zIndex:q},width:_,height:E,className:"react-flow__edges react-flow__container"},L&&D.createElement(Zm,{defaultColor:e,rfId:r}),D.createElement("g",null,$.map(v=>{const[R,T,V]=ds(A.get(v.source)),[F,M,O]=ds(A.get(v.target));if(!V||!O)return null;let H=v.type||"default";i[H]||(S==null||S("011",ze.error011(H)),H="default");const U=i[H]||i.default,G=k===et.Strict?M.target:(M.target??[]).concat(M.source??[]),j=us(T.source,v.sourceHandle),I=us(G,v.targetHandle),z=(j==null?void 0:j.position)||Y.Bottom,B=(I==null?void 0:I.position)||Y.Top,W=!!(v.focusable||y&&typeof v.focusable>"u"),X=v.reconnectable||v.updatable,K=typeof h<"u"&&(X||N&&typeof X>"u");if(!j||!I)return S==null||S("008",ze.error008(j,v)),null;const{sourceX:ne,sourceY:ce,targetX:re,targetY:ee}=Vm(R,j,z,F,I,B);return D.createElement(U,{key:v.id,id:v.id,className:he([v.className,a]),type:H,data:v.data,selected:!!v.selected,animated:!!v.animated,hidden:!!v.hidden,label:v.label,labelStyle:v.labelStyle,labelShowBg:v.labelShowBg,labelBgStyle:v.labelBgStyle,labelBgPadding:v.labelBgPadding,labelBgBorderRadius:v.labelBgBorderRadius,style:v.style,source:v.source,target:v.target,sourceHandleId:v.sourceHandle,targetHandleId:v.targetHandle,markerEnd:v.markerEnd,markerStart:v.markerStart,sourceX:ne,sourceY:ce,targetX:re,targetY:ee,sourcePosition:z,targetPosition:B,elementsSelectable:b,onContextMenu:s,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:c,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:m,onReconnectEnd:w,reconnectRadius:p,rfId:r,ariaLabel:v.ariaLabel,isFocusable:W,isReconnectable:K,pathOptions:"pathOptions"in v?v.pathOptions:void 0,interactionWidth:v.interactionWidth,disableKeyboardA11y:g})})))),x):null};fc.displayName="EdgeRenderer";var Qm=P.memo(fc);const Jm=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function e0({children:e}){const t=se(Jm);return D.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function t0(e){const t=vi(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const n0={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},hc=({nodeId:e,handleType:t,style:n,type:r=Ve.Bezier,CustomComponent:i,connectionStatus:a})=>{var E,k,A;const{fromNode:s,handleId:o,toX:l,toY:u,connectionMode:c}=se(P.useCallback(S=>({fromNode:S.nodeInternals.get(e),handleId:S.connectionHandleId,toX:(S.connectionPosition.x-S.transform[0])/S.transform[2],toY:(S.connectionPosition.y-S.transform[1])/S.transform[2],connectionMode:S.connectionMode}),[e]),fe),d=(E=s==null?void 0:s[le])==null?void 0:E.handleBounds;let h=d==null?void 0:d[t];if(c===et.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!s||!h)return null;const m=o?h.find(S=>S.id===o):h[0],w=m?m.x+m.width/2:(s.width??0)/2,p=m?m.y+m.height/2:s.height??0,x=(((k=s.positionAbsolute)==null?void 0:k.x)??0)+w,g=(((A=s.positionAbsolute)==null?void 0:A.y)??0)+p,y=m==null?void 0:m.position,N=y?n0[y]:null;if(!y||!N)return null;if(i)return D.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:m,fromX:x,fromY:g,toX:l,toY:u,fromPosition:y,toPosition:N,connectionStatus:a});let b="";const _={sourceX:x,sourceY:g,sourcePosition:y,targetX:l,targetY:u,targetPosition:N};return r===Ve.Bezier?[b]=Do(_):r===Ve.Step?[b]=Jr({..._,borderRadius:0}):r===Ve.SmoothStep?[b]=Jr(_):r===Ve.SimpleBezier?[b]=qo(_):b=`M${x},${g} ${l},${u}`,D.createElement("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};hc.displayName="ConnectionLine";const r0=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function i0({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:a,nodesConnectable:s,width:o,height:l,connectionStatus:u}=se(r0,fe);return!(i&&a&&o&&s)?null:D.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},D.createElement("g",{className:he(["react-flow__connection",u])},D.createElement(hc,{nodeId:i,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function hs(e,t){return P.useRef(null),de(),P.useMemo(()=>t(e),[e])}const mc=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:a,onNodeClick:s,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:m,onSelectionContextMenu:w,onSelectionStart:p,onSelectionEnd:x,connectionLineType:g,connectionLineStyle:y,connectionLineComponent:N,connectionLineContainerStyle:b,selectionKeyCode:_,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:A,panActivationKeyCode:S,zoomActivationKeyCode:C,deleteKeyCode:q,onlyRenderVisibleElements:$,elementsSelectable:L,selectNodesOnDrag:v,defaultViewport:R,translateExtent:T,minZoom:V,maxZoom:F,preventScrolling:M,defaultMarkerColor:O,zoomOnScroll:H,zoomOnPinch:U,panOnScroll:G,panOnScrollSpeed:j,panOnScrollMode:I,zoomOnDoubleClick:z,panOnDrag:B,onPaneClick:W,onPaneMouseEnter:X,onPaneMouseMove:K,onPaneMouseLeave:ne,onPaneScroll:ce,onPaneContextMenu:re,onEdgeContextMenu:ee,onEdgeMouseEnter:ie,onEdgeMouseMove:me,onEdgeMouseLeave:te,onReconnect:Z,onReconnectStart:ge,onReconnectEnd:Re,reconnectRadius:gt,noDragClassName:tt,noWheelClassName:nt,noPanClassName:Ae,elevateEdgesOnSelect:rt,disableKeyboardA11y:Be,nodeOrigin:He,nodeExtent:it,rfId:st})=>{const yt=hs(e,Mm),pe=hs(t,$m);return t0(a),D.createElement(Rm,{onPaneClick:W,onPaneMouseEnter:X,onPaneMouseMove:K,onPaneMouseLeave:ne,onPaneContextMenu:re,onPaneScroll:ce,deleteKeyCode:q,selectionKeyCode:_,selectionOnDrag:E,selectionMode:k,onSelectionStart:p,onSelectionEnd:x,multiSelectionKeyCode:A,panActivationKeyCode:S,zoomActivationKeyCode:C,elementsSelectable:L,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:H,zoomOnPinch:U,zoomOnDoubleClick:z,panOnScroll:G,panOnScrollSpeed:j,panOnScrollMode:I,panOnDrag:B,defaultViewport:R,translateExtent:T,minZoom:V,maxZoom:F,onSelectionContextMenu:w,preventScrolling:M,noDragClassName:tt,noWheelClassName:nt,noPanClassName:Ae,disableKeyboardA11y:Be},D.createElement(e0,null,D.createElement(Qm,{edgeTypes:pe,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:$,onEdgeContextMenu:ee,onEdgeMouseEnter:ie,onEdgeMouseMove:me,onEdgeMouseLeave:te,onReconnect:Z,onReconnectStart:ge,onReconnectEnd:Re,reconnectRadius:gt,defaultMarkerColor:O,noPanClassName:Ae,elevateEdgesOnSelect:!!rt,disableKeyboardA11y:Be,rfId:st},D.createElement(i0,{style:y,type:g,component:N,containerStyle:b})),D.createElement("div",{className:"react-flow__edgelabel-renderer"}),D.createElement(qm,{nodeTypes:yt,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:m,selectNodesOnDrag:v,onlyRenderVisibleElements:$,noPanClassName:Ae,noDragClassName:tt,disableKeyboardA11y:Be,nodeOrigin:He,nodeExtent:it,rfId:st})))};mc.displayName="GraphView";var s0=P.memo(mc);const ii=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Le={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ii,nodeExtent:ii,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:et.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Ih,isValidConnection:void 0},a0=()=>vu((e,t)=>({...Le,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:a}=t();e({nodeInternals:vn(n,r,i,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",a=typeof r<"u",s=i?vn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:a?r:[],hasDefaultNodes:i,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:a,fitViewOnInitDone:s,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const d=window.getComputedStyle(c),{m22:h}=new window.DOMMatrixReadOnly(d.transform),m=n.reduce((p,x)=>{const g=i.get(x.id);if(g!=null&&g.hidden)i.set(g.id,{...g,[le]:{...g[le],handleBounds:void 0}});else if(g){const y=di(x.nodeElement);!!(y.width&&y.height&&(g.width!==y.width||g.height!==y.height||x.forceUpdate))&&(i.set(g.id,{...g,[le]:{...g[le],handleBounds:{source:as(".source",x.nodeElement,h,u),target:as(".target",x.nodeElement,h,u)}},...y}),p.push({id:g.id,type:"dimensions",dimensions:y}))}return p},[]);ec(i,u);const w=s||a&&!s&&tc(t,{initial:!0,...o});e({nodeInternals:new Map(i),fitViewOnInitDone:w}),(m==null?void 0:m.length)>0&&(r==null||r(m))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:a}=t(),s=n.map(o=>{const l={id:o.id,type:"position",dragging:i};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:a,nodeOrigin:s,getNodes:o,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(a){const u=rc(n,o()),c=vn(u,i,s,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:a}=t();let s,o=null;r?s=n.map(l=>$e(l,!0)):(s=ut(a(),n),o=ut(i,[])),Ot({changedNodes:s,changedEdges:o,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:a}=t();let s,o=null;r?s=n.map(l=>$e(l,!0)):(s=ut(i,n),o=ut(a(),[])),Ot({changedNodes:o,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:a}=t(),s=n||a(),o=r||i,l=s.map(c=>(c.selected=!1,$e(c.id,!1))),u=o.map(c=>$e(c.id,!1));Ot({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),a=r().filter(o=>o.selected).map(o=>$e(o.id,!1)),s=n.filter(o=>o.selected).map(o=>$e(o.id,!1));Ot({changedNodes:a,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=fi(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:a,d3Zoom:s,d3Selection:o,translateExtent:l}=t();if(!s||!o||!n.x&&!n.y)return!1;const u=qe.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,a]],d=s==null?void 0:s.constrain()(u,c,l);return s.transform(o,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Le.connectionNodeId,connectionHandleId:Le.connectionHandleId,connectionHandleType:Le.connectionHandleType,connectionStatus:Le.connectionStatus,connectionStartHandle:Le.connectionStartHandle,connectionEndHandle:Le.connectionEndHandle}),reset:()=>e({...Le})}),Object.is),pc=({children:e})=>{const t=P.useRef(null);return t.current||(t.current=a0()),D.createElement(Sh,{value:t.current},e)};pc.displayName="ReactFlowProvider";const gc=({children:e})=>P.useContext(an)?D.createElement(D.Fragment,null,e):D.createElement(pc,null,e);gc.displayName="ReactFlowWrapper";const o0={input:Wo,default:ni,output:Xo,group:xi},c0={default:Jt,straight:pi,step:mi,smoothstep:on,simplebezier:hi},l0=[0,0],u0=[15,15],d0={x:0,y:0,zoom:1},f0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yc=P.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a=o0,edgeTypes:s=c0,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:h,onConnect:m,onConnectStart:w,onConnectEnd:p,onClickConnectStart:x,onClickConnectEnd:g,onNodeMouseEnter:y,onNodeMouseMove:N,onNodeMouseLeave:b,onNodeContextMenu:_,onNodeDoubleClick:E,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:S,onNodesDelete:C,onEdgesDelete:q,onSelectionChange:$,onSelectionDragStart:L,onSelectionDrag:v,onSelectionDragStop:R,onSelectionContextMenu:T,onSelectionStart:V,onSelectionEnd:F,connectionMode:M=et.Strict,connectionLineType:O=Ve.Bezier,connectionLineStyle:H,connectionLineComponent:U,connectionLineContainerStyle:G,deleteKeyCode:j="Backspace",selectionKeyCode:I="Shift",selectionOnDrag:z=!1,selectionMode:B=At.Full,panActivationKeyCode:W="Space",multiSelectionKeyCode:X=Kt()?"Meta":"Control",zoomActivationKeyCode:K=Kt()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:ce=u0,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ee=!0,nodesDraggable:ie,nodesConnectable:me,nodesFocusable:te,nodeOrigin:Z=l0,edgesFocusable:ge,edgesUpdatable:Re,elementsSelectable:gt,defaultViewport:tt=d0,minZoom:nt=.5,maxZoom:Ae=2,translateExtent:rt=ii,preventScrolling:Be=!0,nodeExtent:He,defaultMarkerColor:it="#b1b1b7",zoomOnScroll:st=!0,zoomOnPinch:yt=!0,panOnScroll:pe=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:Ue=Ke.Free,zoomOnDoubleClick:Ge=!0,panOnDrag:We=!0,onPaneClick:Me,onPaneMouseEnter:Ce,onPaneMouseMove:xt,onPaneMouseLeave:ln,onPaneScroll:vt,onPaneContextMenu:un,children:_i,onEdgeContextMenu:Ye,onEdgeDoubleClick:$c,onEdgeMouseEnter:Vc,onEdgeMouseMove:Oc,onEdgeMouseLeave:Fc,onEdgeUpdate:Bc,onEdgeUpdateStart:Hc,onEdgeUpdateEnd:Uc,onReconnect:Gc,onReconnectStart:Wc,onReconnectEnd:Yc,reconnectRadius:Xc=10,edgeUpdaterRadius:Zc=10,onNodesChange:Kc,onEdgesChange:Qc,noDragClassName:Jc="nodrag",noWheelClassName:el="nowheel",noPanClassName:Ei="nopan",fitView:tl=!1,fitViewOptions:nl,connectOnClick:rl=!0,attributionPosition:il,proOptions:sl,defaultEdgeOptions:al,elevateNodesOnSelect:ol=!0,elevateEdgesOnSelect:cl=!1,disableKeyboardA11y:ki=!1,autoPanOnConnect:ll=!0,autoPanOnNodeDrag:ul=!0,connectionRadius:dl=20,isValidConnection:fl,onError:hl,style:ml,id:Si,nodeDragThreshold:pl,...gl},yl)=>{const dn=Si||"1";return D.createElement("div",{...gl,style:{...ml,...f0},ref:yl,className:he(["react-flow",i]),"data-testid":"rf__wrapper",id:Si},D.createElement(gc,null,D.createElement(s0,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:h,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:N,onNodeMouseLeave:b,onNodeContextMenu:_,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:s,connectionLineType:O,connectionLineStyle:H,connectionLineComponent:U,connectionLineContainerStyle:G,selectionKeyCode:I,selectionOnDrag:z,selectionMode:B,deleteKeyCode:j,multiSelectionKeyCode:X,panActivationKeyCode:W,zoomActivationKeyCode:K,onlyRenderVisibleElements:re,selectNodesOnDrag:ee,defaultViewport:tt,translateExtent:rt,minZoom:nt,maxZoom:Ae,preventScrolling:Be,zoomOnScroll:st,zoomOnPinch:yt,zoomOnDoubleClick:Ge,panOnScroll:pe,panOnScrollSpeed:Ne,panOnScrollMode:Ue,panOnDrag:We,onPaneClick:Me,onPaneMouseEnter:Ce,onPaneMouseMove:xt,onPaneMouseLeave:ln,onPaneScroll:vt,onPaneContextMenu:un,onSelectionContextMenu:T,onSelectionStart:V,onSelectionEnd:F,onEdgeContextMenu:Ye,onEdgeDoubleClick:$c,onEdgeMouseEnter:Vc,onEdgeMouseMove:Oc,onEdgeMouseLeave:Fc,onReconnect:Gc??Bc,onReconnectStart:Wc??Hc,onReconnectEnd:Yc??Uc,reconnectRadius:Xc??Zc,defaultMarkerColor:it,noDragClassName:Jc,noWheelClassName:el,noPanClassName:Ei,elevateEdgesOnSelect:cl,rfId:dn,disableKeyboardA11y:ki,nodeOrigin:Z,nodeExtent:He}),D.createElement(nm,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:w,onConnectEnd:p,onClickConnectStart:x,onClickConnectEnd:g,nodesDraggable:ie,nodesConnectable:me,nodesFocusable:te,edgesFocusable:ge,edgesUpdatable:Re,elementsSelectable:gt,elevateNodesOnSelect:ol,minZoom:nt,maxZoom:Ae,nodeExtent:He,onNodesChange:Kc,onEdgesChange:Qc,snapToGrid:ne,snapGrid:ce,connectionMode:M,translateExtent:rt,connectOnClick:rl,defaultEdgeOptions:al,fitView:tl,fitViewOptions:nl,onNodesDelete:C,onEdgesDelete:q,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:S,onSelectionDrag:v,onSelectionDragStart:L,onSelectionDragStop:R,noPanClassName:Ei,nodeOrigin:Z,rfId:dn,autoPanOnConnect:ll,autoPanOnNodeDrag:ul,onError:hl,connectionRadius:dl,isValidConnection:fl,nodeDragThreshold:pl}),D.createElement(em,{onSelectionChange:$}),_i,D.createElement(Ch,{proOptions:sl,position:il}),D.createElement(om,{rfId:dn,disableKeyboardA11y:ki})))});yc.displayName="ReactFlow";function xc(e){return t=>{const[n,r]=P.useState(t),i=P.useCallback(a=>r(s=>e(a,s)),[]);return[n,r,i]}}const h0=xc(rc),m0=xc(wm),vc=({id:e,x:t,y:n,width:r,height:i,style:a,color:s,strokeColor:o,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,onClick:h,selected:m})=>{const{background:w,backgroundColor:p}=a||{},x=s||w||p;return D.createElement("rect",{className:he(["react-flow__minimap-node",{selected:m},u]),x:t,y:n,rx:c,ry:c,width:r,height:i,fill:x,stroke:o,strokeWidth:l,shapeRendering:d,onClick:h?g=>h(g,e):void 0})};vc.displayName="MiniMapNode";var p0=P.memo(vc);const g0=e=>e.nodeOrigin,y0=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),_n=e=>e instanceof Function?e:()=>e;function x0({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:a=p0,onClick:s}){const o=se(y0,fe),l=se(g0),u=_n(t),c=_n(e),d=_n(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return D.createElement(D.Fragment,null,o.map(m=>{const{x:w,y:p}=Qe(m,l).positionAbsolute;return D.createElement(a,{key:m.id,x:w,y:p,width:m.width,height:m.height,style:m.style,selected:m.selected,className:d(m),color:u(m),borderRadius:r,strokeColor:c(m),strokeWidth:i,shapeRendering:h,onClick:s,id:m.id})}))}var v0=P.memo(x0);const b0=200,w0=150,N0=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Ah(cn(t,e.nodeOrigin),n):n,rfId:e.rfId}},_0="react-flow__minimap-desc";function bc({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:s=2,nodeComponent:o,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:h,onNodeClick:m,pannable:w=!1,zoomable:p=!1,ariaLabel:x="React Flow mini map",inversePan:g=!1,zoomStep:y=10,offsetScale:N=5}){const b=de(),_=P.useRef(null),{boundingRect:E,viewBB:k,rfId:A}=se(N0,fe),S=(e==null?void 0:e.width)??b0,C=(e==null?void 0:e.height)??w0,q=E.width/S,$=E.height/C,L=Math.max(q,$),v=L*S,R=L*C,T=N*L,V=E.x-(v-E.width)/2-T,F=E.y-(R-E.height)/2-T,M=v+T*2,O=R+T*2,H=`${_0}-${A}`,U=P.useRef(0);U.current=L,P.useEffect(()=>{if(_.current){const I=ve(_.current),z=X=>{const{transform:K,d3Selection:ne,d3Zoom:ce}=b.getState();if(X.sourceEvent.type!=="wheel"||!ne||!ce)return;const re=-X.sourceEvent.deltaY*(X.sourceEvent.deltaMode===1?.05:X.sourceEvent.deltaMode?1:.002)*y,ee=K[2]*Math.pow(2,re);ce.scaleTo(ne,ee)},B=X=>{const{transform:K,d3Selection:ne,d3Zoom:ce,translateExtent:re,width:ee,height:ie}=b.getState();if(X.sourceEvent.type!=="mousemove"||!ne||!ce)return;const me=U.current*Math.max(1,K[2])*(g?-1:1),te={x:K[0]-X.sourceEvent.movementX*me,y:K[1]-X.sourceEvent.movementY*me},Z=[[0,0],[ee,ie]],ge=qe.translate(te.x,te.y).scale(K[2]),Re=ce.constrain()(ge,Z,re);ce.transform(ne,Re)},W=ko().on("zoom",w?B:null).on("zoom.wheel",p?z:null);return I.call(W),()=>{I.on("zoom",null)}}},[w,p,g,y]);const G=h?I=>{const z=_e(I);h(I,{x:z[0],y:z[1]})}:void 0,j=m?(I,z)=>{const B=b.getState().nodeInternals.get(z);m(I,B)}:void 0;return D.createElement(ui,{position:d,style:e,className:he(["react-flow__minimap",t]),"data-testid":"rf__minimap"},D.createElement("svg",{width:S,height:C,viewBox:`${V} ${F} ${M} ${O}`,role:"img","aria-labelledby":H,ref:_,onClick:G},x&&D.createElement("title",{id:H},x),D.createElement(v0,{onClick:j,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:s,nodeComponent:o}),D.createElement("path",{className:"react-flow__minimap-mask",d:`M${V-T},${F-T}h${M+T*2}v${O+T*2}h${-M-T*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:c,pointerEvents:"none"})))}bc.displayName="MiniMap";var E0=P.memo(bc);function k0(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},D.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function S0(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},D.createElement("path",{d:"M0 0h32v4.2H0z"}))}function j0(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},D.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function C0(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},D.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function T0(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},D.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const jt=({children:e,className:t,...n})=>D.createElement("button",{type:"button",className:he(["react-flow__controls-button",t]),...n},e);jt.displayName="ControlButton";const R0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),wc=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:o,onInteractiveChange:l,className:u,children:c,position:d="bottom-left"})=>{const h=de(),[m,w]=P.useState(!1),{isInteractive:p,minZoomReached:x,maxZoomReached:g}=se(R0,fe),{zoomIn:y,zoomOut:N,fitView:b}=vi();if(P.useEffect(()=>{w(!0)},[]),!m)return null;const _=()=>{y(),a==null||a()},E=()=>{N(),s==null||s()},k=()=>{b(i),o==null||o()},A=()=>{h.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),l==null||l(!p)};return D.createElement(ui,{className:he(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&D.createElement(D.Fragment,null,D.createElement(jt,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},D.createElement(k0,null)),D.createElement(jt,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},D.createElement(S0,null))),n&&D.createElement(jt,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},D.createElement(j0,null)),r&&D.createElement(jt,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},p?D.createElement(T0,null):D.createElement(C0,null)),c)};wc.displayName="Controls";var A0=P.memo(wc),ke;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ke||(ke={}));function M0({color:e,dimensions:t,lineWidth:n}){return D.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function I0({color:e,radius:t}){return D.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const P0={[ke.Dots]:"#91919a",[ke.Lines]:"#eee",[ke.Cross]:"#e2e2e2"},q0={[ke.Dots]:1,[ke.Lines]:1,[ke.Cross]:6},D0=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Nc({id:e,variant:t=ke.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=2,color:s,style:o,className:l}){const u=P.useRef(null),{transform:c,patternId:d}=se(D0,fe),h=s||P0[t],m=r||q0[t],w=t===ke.Dots,p=t===ke.Cross,x=Array.isArray(n)?n:[n,n],g=[x[0]*c[2]||1,x[1]*c[2]||1],y=m*c[2],N=p?[y,y]:g,b=w?[y/a,y/a]:[N[0]/a,N[1]/a];return D.createElement("svg",{className:he(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},D.createElement("pattern",{id:d+e,x:c[0]%g[0],y:c[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},w?D.createElement(I0,{color:h,radius:y/a}):D.createElement(M0,{dimensions:N,color:h,lineWidth:i})),D.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Nc.displayName="Background";var z0=P.memo(Nc);function wi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var En,ms;function L0(){if(ms)return En;ms=1;var e=za(),t=4;function n(r){return e(r,t)}return En=n,En}var kn,ps;function _c(){if(ps)return kn;ps=1;var e=Cl();function t(n){return typeof n=="function"?n:e}return kn=t,kn}var Sn,gs;function Ec(){if(gs)return Sn;gs=1;var e=La(),t=Oa(),n=_c(),r=It();function i(a,s){var o=r(a)?e:t;return o(a,n(s))}return Sn=i,Sn}var jn,ys;function kc(){return ys||(ys=1,jn=Ec()),jn}var Cn,xs;function $0(){if(xs)return Cn;xs=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Cn=n,Cn}var Tn,vs;function Sc(){if(vs)return Tn;vs=1;var e=$0(),t=Tl();function n(r,i){return r!=null&&t(r,i,e)}return Tn=n,Tn}var Rn,bs;function V0(){if(bs)return Rn;bs=1;var e=Fa(),t=Ba(),n=Rl(),r=It(),i=Ha(),a=Ua(),s=Al(),o=Ga(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function h(m){if(m==null)return!0;if(i(m)&&(r(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||o(m)||n(m)))return!m.length;var w=t(m);if(w==l||w==u)return!m.size;if(s(m))return!e(m).length;for(var p in m)if(d.call(m,p))return!1;return!0}return Rn=h,Rn}var An,ws;function jc(){if(ws)return An;ws=1;function e(t){return t===void 0}return An=e,An}var Mn,Ns;function O0(){if(Ns)return Mn;Ns=1;function e(t,n,r,i){var a=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++a]);++a<s;)r=n(r,t[a],a,t);return r}return Mn=e,Mn}var In,_s;function F0(){if(_s)return In;_s=1;function e(t,n,r,i,a){return a(t,function(s,o,l){r=i?(i=!1,s):n(r,s,o,l)}),r}return In=e,In}var Pn,Es;function Cc(){if(Es)return Pn;Es=1;var e=O0(),t=Oa(),n=Wa(),r=F0(),i=It();function a(s,o,l){var u=i(s)?e:r,c=arguments.length<3;return u(s,n(o,4),l,c,t)}return Pn=a,Pn}var qn,ks;function B0(){if(ks)return qn;ks=1;var e=Ml(),t=e("length");return qn=t,qn}var Dn,Ss;function H0(){if(Ss)return Dn;Ss=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",s="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",w=u+"?",p="["+a+"]?",x="(?:"+m+"(?:"+[c,d,h].join("|")+")"+p+w+")*",g=p+w+x,y="(?:"+[c+o+"?",o,d,h,s].join("|")+")",N=RegExp(l+"(?="+l+")|"+y+g,"g");function b(_){for(var E=N.lastIndex=0;N.test(_);)++E;return E}return Dn=b,Dn}var zn,js;function U0(){if(js)return zn;js=1;var e=B0(),t=Ul(),n=H0();function r(i){return t(i)?n(i):e(i)}return zn=r,zn}var Ln,Cs;function G0(){if(Cs)return Ln;Cs=1;var e=Fa(),t=Ba(),n=Ha(),r=Il(),i=U0(),a="[object Map]",s="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==a||u==s?l.size:e(l).length}return Ln=o,Ln}var $n,Ts;function W0(){if(Ts)return $n;Ts=1;var e=La(),t=bl(),n=Pl(),r=Wa(),i=ql(),a=It(),s=Ua(),o=Ya(),l=Dl(),u=Ga();function c(d,h,m){var w=a(d),p=w||s(d)||u(d);if(h=r(h,4),m==null){var x=d&&d.constructor;p?m=w?new x:[]:l(d)?m=o(x)?t(i(d)):{}:m={}}return(p?e:n)(d,function(g,y,N){return h(m,g,y,N)}),m}return $n=c,$n}var Vn,Rs;function Y0(){if(Rs)return Vn;Rs=1;var e=zl(),t=Xa(),n=Ll(),r=wl(),i=t(function(a){return n(e(a,1,r,!0))});return Vn=i,Vn}var On,As;function X0(){if(As)return On;As=1;var e=$l();function t(n,r){return e(r,function(i){return n[i]})}return On=t,On}var Fn,Ms;function Tc(){if(Ms)return Fn;Ms=1;var e=X0(),t=Za();function n(r){return r==null?[]:e(r,t(r))}return Fn=n,Fn}var Bn,Is;function we(){if(Is)return Bn;Is=1;var e;if(typeof wi=="function")try{e={clone:L0(),constant:Ka(),each:kc(),filter:$a(),has:Sc(),isArray:It(),isEmpty:V0(),isFunction:Ya(),isUndefined:jc(),keys:Za(),map:Qa(),reduce:Cc(),size:G0(),transform:W0(),union:Y0(),values:Tc()}}catch{}return e||(e=window._),Bn=e,Bn}var Hn,Ps;function Ni(){if(Ps)return Hn;Ps=1;var e=we();Hn=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var h=arguments,m=this;return e.each(c,function(w){h.length>1?m.setNode(w,d):m.setNode(w)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var h=function(m){d.removeEdge(d._edgeObjs[m])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(m){d.setParent(m)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,x){c(x)&&d.setNode(x,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,h.edge(p))});var m={};function w(p){var x=h.parent(p);return x===void 0||d.hasNode(x)?(m[p]=x,x):x in m?m[x]:w(x)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,w(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var h=this,m=arguments;return e.reduce(c,function(w,p){return m.length>1?h.setEdge(w,p,d):h.setEdge(w,p),p}),this},i.prototype.setEdge=function(){var c,d,h,m,w=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,h=p.name,arguments.length===2&&(m=arguments[1],w=!0)):(c=p,d=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],w=!0)),c=""+c,d=""+d,e.isUndefined(h)||(h=""+h);var x=o(this._isDirected,c,d,h);if(e.has(this._edgeLabels,x))return w&&(this._edgeLabels[x]=m),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[x]=w?m:this._defaultEdgeLabelFn(c,d,h);var g=l(this._isDirected,c,d,h);return c=g.v,d=g.w,Object.freeze(g),this._edgeObjs[x]=g,a(this._preds[d],c),a(this._sucs[c],d),this._in[d][x]=g,this._out[c][x]=g,this._edgeCount++,this},i.prototype.edge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return this._edgeLabels[m]},i.prototype.hasEdge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return e.has(this._edgeLabels,m)},i.prototype.removeEdge=function(c,d,h){var m=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,h),w=this._edgeObjs[m];return w&&(c=w.v,d=w.w,delete this._edgeLabels[m],delete this._edgeObjs[m],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][m],delete this._out[c][m],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var h=this._in[c];if(h){var m=e.values(h);return d?e.filter(m,function(w){return w.v===d}):m}},i.prototype.outEdges=function(c,d){var h=this._out[c];if(h){var m=e.values(h);return d?e.filter(m,function(w){return w.w===d}):m}},i.prototype.nodeEdges=function(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))};function a(c,d){c[d]?c[d]++:c[d]=1}function s(c,d){--c[d]||delete c[d]}function o(c,d,h,m){var w=""+d,p=""+h;if(!c&&w>p){var x=w;w=p,p=x}return w+r+p+r+(e.isUndefined(m)?t:m)}function l(c,d,h,m){var w=""+d,p=""+h;if(!c&&w>p){var x=w;w=p,p=x}var g={v:w,w:p};return m&&(g.name=m),g}function u(c,d){return o(c,d.v,d.w,d.name)}return Hn}var Un,qs;function Z0(){return qs||(qs=1,Un="2.1.8"),Un}var Gn,Ds;function K0(){return Ds||(Ds=1,Gn={Graph:Ni(),version:Z0()}),Gn}var Wn,zs;function Q0(){if(zs)return Wn;zs=1;var e=we(),t=Ni();Wn={write:n,read:a};function n(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:i(s)};return e.isUndefined(s.graph())||(o.value=e.clone(s.graph())),o}function r(s){return e.map(s.nodes(),function(o){var l=s.node(o),u=s.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(s){return e.map(s.edges(),function(o){var l=s.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function a(s){var o=new t(s.options).setGraph(s.value);return e.each(s.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(s.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Wn}var Yn,Ls;function J0(){if(Ls)return Yn;Ls=1;var e=we();Yn=t;function t(n){var r={},i=[],a;function s(o){e.has(r,o)||(r[o]=!0,a.push(o),e.each(n.successors(o),s),e.each(n.predecessors(o),s))}return e.each(n.nodes(),function(o){a=[],s(o),a.length&&i.push(a)}),i}return Yn}var Xn,$s;function Rc(){if($s)return Xn;$s=1;var e=we();Xn=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,s=a.length;return i[n]=s,a.push({key:n,priority:r}),this._decrease(s),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,s=n;i<r.length&&(s=r[i].priority<r[s].priority?i:s,a<r.length&&(s=r[a].priority<r[s].priority?a:s),s!==n&&(this._swap(n,s),this._heapify(s)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,s=i[n],o=i[r];i[n]=o,i[r]=s,a[o.key]=n,a[s.key]=r},Xn}var Zn,Vs;function Ac(){if(Vs)return Zn;Vs=1;var e=we(),t=Rc();Zn=r;var n=e.constant(1);function r(a,s,o,l){return i(a,String(s),o||n,l||function(u){return a.outEdges(u)})}function i(a,s,o,l){var u={},c=new t,d,h,m=function(w){var p=w.v!==d?w.v:w.w,x=u[p],g=o(w),y=h.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+g);y<x.distance&&(x.distance=y,x.predecessor=d,c.decrease(p,y))};for(a.nodes().forEach(function(w){var p=w===s?0:Number.POSITIVE_INFINITY;u[w]={distance:p},c.add(w,p)});c.size()>0&&(d=c.removeMin(),h=u[d],h.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(m);return u}return Zn}var Kn,Os;function ep(){if(Os)return Kn;Os=1;var e=Ac(),t=we();Kn=n;function n(r,i,a){return t.transform(r.nodes(),function(s,o){s[o]=e(r,o,i,a)},{})}return Kn}var Qn,Fs;function Mc(){if(Fs)return Qn;Fs=1;var e=we();Qn=t;function t(n){var r=0,i=[],a={},s=[];function o(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){e.has(a,h)?a[h].onStack&&(u.lowlink=Math.min(u.lowlink,a[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,a[h].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),a[d].onStack=!1,c.push(d);while(l!==d);s.push(c)}}return n.nodes().forEach(function(l){e.has(a,l)||o(l)}),s}return Qn}var Jn,Bs;function tp(){if(Bs)return Jn;Bs=1;var e=we(),t=Mc();Jn=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Jn}var er,Hs;function np(){if(Hs)return er;Hs=1;var e=we();er=n;var t=e.constant(1);function n(i,a,s){return r(i,a||t,s||function(o){return i.outEdges(o)})}function r(i,a,s){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(c){var d=c.v===u?c.w:c.v,h=a(c);o[u][d]={distance:h,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var h=o[d];l.forEach(function(m){var w=h[u],p=c[m],x=h[m],g=w.distance+p.distance;g<x.distance&&(x.distance=g,x.predecessor=p.predecessor)})})}),o}return er}var tr,Us;function Ic(){if(Us)return tr;Us=1;var e=we();tr=t,t.CycleException=n;function t(r){var i={},a={},s=[];function o(l){if(e.has(a,l))throw new n;e.has(i,l)||(a[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete a[l],s.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return s}function n(){}return n.prototype=new Error,tr}var nr,Gs;function rp(){if(Gs)return nr;Gs=1;var e=Ic();nr=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return nr}var rr,Ws;function Pc(){if(Ws)return rr;Ws=1;var e=we();rr=t;function t(r,i,a){e.isArray(i)||(i=[i]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,s,o)}),o}function n(r,i,a,s,o,l){e.has(s,i)||(s[i]=!0,a||l.push(i),e.each(o(i),function(u){n(r,u,a,s,o,l)}),a&&l.push(i))}return rr}var ir,Ys;function ip(){if(Ys)return ir;Ys=1;var e=Pc();ir=t;function t(n,r){return e(n,r,"post")}return ir}var sr,Xs;function sp(){if(Xs)return sr;Xs=1;var e=Pc();sr=t;function t(n,r){return e(n,r,"pre")}return sr}var ar,Zs;function ap(){if(Zs)return ar;Zs=1;var e=we(),t=Ni(),n=Rc();ar=r;function r(i,a){var s=new t,o={},l=new n,u;function c(h){var m=h.v===u?h.w:h.v,w=l.priority(m);if(w!==void 0){var p=a(h);p<w&&(o[m]=u,l.decrease(m,p))}}if(i.nodeCount()===0)return s;e.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))s.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return s}return ar}var or,Ks;function op(){return Ks||(Ks=1,or={components:J0(),dijkstra:Ac(),dijkstraAll:ep(),findCycles:tp(),floydWarshall:np(),isAcyclic:rp(),postorder:ip(),preorder:sp(),prim:ap(),tarjan:Mc(),topsort:Ic()}),or}var cr,Qs;function cp(){if(Qs)return cr;Qs=1;var e=K0();return cr={Graph:e.Graph,json:Q0(),alg:op(),version:e.version},cr}var lr,Js;function Se(){if(Js)return lr;Js=1;var e;if(typeof wi=="function")try{e=cp()}catch{}return e||(e=window.graphlib),lr=e,lr}var ur,ea;function lp(){if(ea)return ur;ea=1;var e=za(),t=1,n=4;function r(i){return e(i,t|n)}return ur=r,ur}var dr,ta;function up(){if(ta)return dr;ta=1;var e=Xa(),t=Ol(),n=Vl(),r=Va(),i=Object.prototype,a=i.hasOwnProperty,s=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var h=l[u],m=r(h),w=-1,p=m.length;++w<p;){var x=m[w],g=o[x];(g===void 0||t(g,i[x])&&!a.call(o,x))&&(o[x]=h[x])}return o});return dr=s,dr}var fr,na;function dp(){if(na)return fr;na=1;var e=Fl(),t=_c(),n=Va();function r(i,a){return i==null?i:e(i,t(a),n)}return fr=r,fr}var hr,ra;function fp(){if(ra)return hr;ra=1;function e(t,n,r){for(var i=-1,a=t.length,s=n.length,o={};++i<a;){var l=i<s?n[i]:void 0;r(o,t[i],l)}return o}return hr=e,hr}var mr,ia;function hp(){if(ia)return mr;ia=1;var e=Nl(),t=fp();function n(r,i){return t(r||[],i||[],e)}return mr=n,mr}var pr,sa;function ae(){if(sa)return pr;sa=1;var e;if(typeof wi=="function")try{e={cloneDeep:lp(),constant:Ka(),defaults:up(),each:kc(),filter:$a(),find:Gl(),flatten:_l(),forEach:Ec(),forIn:dp(),has:Sc(),isUndefined:jc(),last:Bl(),map:Qa(),mapValues:Wl(),max:Yl(),merge:El(),min:Xl(),minBy:Ql(),now:Zl(),pick:kl(),range:Kl(),reduce:Cc(),sortBy:Hl(),uniqueId:Sl(),values:Tc(),zipObject:hp()}}catch{}return e||(e=window._),pr=e,pr}var gr,aa;function mp(){if(aa)return gr;aa=1,gr=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return gr}var yr,oa;function pp(){if(oa)return yr;oa=1;var e=ae(),t=Se().Graph,n=mp();yr=i;var r=e.constant(1);function i(u,c){if(u.nodeCount()<=1)return[];var d=o(u,c||r),h=a(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(h,function(m){return u.outEdges(m.v,m.w)}),!0)}function a(u,c,d){for(var h=[],m=c[c.length-1],w=c[0],p;u.nodeCount();){for(;p=w.dequeue();)s(u,c,d,p);for(;p=m.dequeue();)s(u,c,d,p);if(u.nodeCount()){for(var x=c.length-2;x>0;--x)if(p=c[x].dequeue(),p){h=h.concat(s(u,c,d,p,!0));break}}}return h}function s(u,c,d,h,m){var w=m?[]:void 0;return e.forEach(u.inEdges(h.v),function(p){var x=u.edge(p),g=u.node(p.v);m&&w.push({v:p.v,w:p.w}),g.out-=x,l(c,d,g)}),e.forEach(u.outEdges(h.v),function(p){var x=u.edge(p),g=p.w,y=u.node(g);y.in-=x,l(c,d,y)}),u.removeNode(h.v),w}function o(u,c){var d=new t,h=0,m=0;e.forEach(u.nodes(),function(x){d.setNode(x,{v:x,in:0,out:0})}),e.forEach(u.edges(),function(x){var g=d.edge(x.v,x.w)||0,y=c(x),N=g+y;d.setEdge(x.v,x.w,N),m=Math.max(m,d.node(x.v).out+=y),h=Math.max(h,d.node(x.w).in+=y)});var w=e.range(m+h+3).map(function(){return new n}),p=h+1;return e.forEach(d.nodes(),function(x){l(w,p,d.node(x))}),{graph:d,buckets:w,zeroIdx:p}}function l(u,c,d){d.out?d.in?u[d.out-d.in+c].enqueue(d):u[u.length-1].enqueue(d):u[0].enqueue(d)}return yr}var xr,ca;function gp(){if(ca)return xr;ca=1;var e=ae(),t=pp();xr={run:n,undo:i};function n(a){var s=a.graph().acyclicer==="greedy"?t(a,o(a)):r(a);e.forEach(s,function(l){var u=a.edge(l);a.removeEdge(l),u.forwardName=l.name,u.reversed=!0,a.setEdge(l.w,l.v,u,e.uniqueId("rev"))});function o(l){return function(u){return l.edge(u).weight}}}function r(a){var s=[],o={},l={};function u(c){e.has(l,c)||(l[c]=!0,o[c]=!0,e.forEach(a.outEdges(c),function(d){e.has(o,d.w)?s.push(d):u(d.w)}),delete o[c])}return e.forEach(a.nodes(),u),s}function i(a){e.forEach(a.edges(),function(s){var o=a.edge(s);if(o.reversed){a.removeEdge(s);var l=o.forwardName;delete o.reversed,delete o.forwardName,a.setEdge(s.w,s.v,o,l)}})}return xr}var vr,la;function ye(){if(la)return vr;la=1;var e=ae(),t=Se().Graph;vr={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:s,intersectRect:o,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:c,addBorderNode:d,maxRank:h,partition:m,time:w,notime:p};function n(x,g,y,N){var b;do b=e.uniqueId(N);while(x.hasNode(b));return y.dummy=g,x.setNode(b,y),b}function r(x){var g=new t().setGraph(x.graph());return e.forEach(x.nodes(),function(y){g.setNode(y,x.node(y))}),e.forEach(x.edges(),function(y){var N=g.edge(y.v,y.w)||{weight:0,minlen:1},b=x.edge(y);g.setEdge(y.v,y.w,{weight:N.weight+b.weight,minlen:Math.max(N.minlen,b.minlen)})}),g}function i(x){var g=new t({multigraph:x.isMultigraph()}).setGraph(x.graph());return e.forEach(x.nodes(),function(y){x.children(y).length||g.setNode(y,x.node(y))}),e.forEach(x.edges(),function(y){g.setEdge(y,x.edge(y))}),g}function a(x){var g=e.map(x.nodes(),function(y){var N={};return e.forEach(x.outEdges(y),function(b){N[b.w]=(N[b.w]||0)+x.edge(b).weight}),N});return e.zipObject(x.nodes(),g)}function s(x){var g=e.map(x.nodes(),function(y){var N={};return e.forEach(x.inEdges(y),function(b){N[b.v]=(N[b.v]||0)+x.edge(b).weight}),N});return e.zipObject(x.nodes(),g)}function o(x,g){var y=x.x,N=x.y,b=g.x-y,_=g.y-N,E=x.width/2,k=x.height/2;if(!b&&!_)throw new Error("Not possible to find intersection inside of the rectangle");var A,S;return Math.abs(_)*E>Math.abs(b)*k?(_<0&&(k=-k),A=k*b/_,S=k):(b<0&&(E=-E),A=E,S=E*_/b),{x:y+A,y:N+S}}function l(x){var g=e.map(e.range(h(x)+1),function(){return[]});return e.forEach(x.nodes(),function(y){var N=x.node(y),b=N.rank;e.isUndefined(b)||(g[b][N.order]=y)}),g}function u(x){var g=e.min(e.map(x.nodes(),function(y){return x.node(y).rank}));e.forEach(x.nodes(),function(y){var N=x.node(y);e.has(N,"rank")&&(N.rank-=g)})}function c(x){var g=e.min(e.map(x.nodes(),function(_){return x.node(_).rank})),y=[];e.forEach(x.nodes(),function(_){var E=x.node(_).rank-g;y[E]||(y[E]=[]),y[E].push(_)});var N=0,b=x.graph().nodeRankFactor;e.forEach(y,function(_,E){e.isUndefined(_)&&E%b!==0?--N:N&&e.forEach(_,function(k){x.node(k).rank+=N})})}function d(x,g,y,N){var b={width:0,height:0};return arguments.length>=4&&(b.rank=y,b.order=N),n(x,"border",b,g)}function h(x){return e.max(e.map(x.nodes(),function(g){var y=x.node(g).rank;if(!e.isUndefined(y))return y}))}function m(x,g){var y={lhs:[],rhs:[]};return e.forEach(x,function(N){g(N)?y.lhs.push(N):y.rhs.push(N)}),y}function w(x,g){var y=e.now();try{return g()}finally{console.log(x+" time: "+(e.now()-y)+"ms")}}function p(x,g){return g()}return vr}var br,ua;function yp(){if(ua)return br;ua=1;var e=ae(),t=ye();br={run:n,undo:i};function n(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){r(a,s)})}function r(a,s){var o=s.v,l=a.node(o).rank,u=s.w,c=a.node(u).rank,d=s.name,h=a.edge(s),m=h.labelRank;if(c!==l+1){a.removeEdge(s);var w,p,x;for(x=0,++l;l<c;++x,++l)h.points=[],p={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},w=t.addDummyNode(a,"edge",p,"_d"),l===m&&(p.width=h.width,p.height=h.height,p.dummy="edge-label",p.labelpos=h.labelpos),a.setEdge(o,w,{weight:h.weight},d),x===0&&a.graph().dummyChains.push(w),o=w;a.setEdge(o,u,{weight:h.weight},d)}}function i(a){e.forEach(a.graph().dummyChains,function(s){var o=a.node(s),l=o.edgeLabel,u;for(a.setEdge(o.edgeObj,l);o.dummy;)u=a.successors(s)[0],a.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=a.node(s)})}return br}var wr,da;function en(){if(da)return wr;da=1;var e=ae();wr={longestPath:t,slack:n};function t(r){var i={};function a(s){var o=r.node(s);if(e.has(i,s))return o.rank;i[s]=!0;var l=e.min(e.map(r.outEdges(s),function(u){return a(u.w)-r.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),o.rank=l}e.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return wr}var Nr,fa;function qc(){if(fa)return Nr;fa=1;var e=ae(),t=Se().Graph,n=en().slack;Nr=r;function r(o){var l=new t({directed:!1}),u=o.nodes()[0],c=o.nodeCount();l.setNode(u,{});for(var d,h;i(l,o)<c;)d=a(l,o),h=l.hasNode(d.v)?n(o,d):-n(o,d),s(l,o,h);return l}function i(o,l){function u(c){e.forEach(l.nodeEdges(c),function(d){var h=d.v,m=c===h?d.w:h;!o.hasNode(m)&&!n(l,d)&&(o.setNode(m,{}),o.setEdge(c,m,{}),u(m))})}return e.forEach(o.nodes(),u),o.nodeCount()}function a(o,l){return e.minBy(l.edges(),function(u){if(o.hasNode(u.v)!==o.hasNode(u.w))return n(l,u)})}function s(o,l,u){e.forEach(o.nodes(),function(c){l.node(c).rank+=u})}return Nr}var _r,ha;function xp(){if(ha)return _r;ha=1;var e=ae(),t=qc(),n=en().slack,r=en().longestPath,i=Se().alg.preorder,a=Se().alg.postorder,s=ye().simplify;_r=o,o.initLowLimValues=d,o.initCutValues=l,o.calcCutValue=c,o.leaveEdge=m,o.enterEdge=w,o.exchangeEdges=p;function o(N){N=s(N),r(N);var b=t(N);d(b),l(b,N);for(var _,E;_=m(b);)E=w(b,N,_),p(b,N,_,E)}function l(N,b){var _=a(N,N.nodes());_=_.slice(0,_.length-1),e.forEach(_,function(E){u(N,b,E)})}function u(N,b,_){var E=N.node(_),k=E.parent;N.edge(_,k).cutvalue=c(N,b,_)}function c(N,b,_){var E=N.node(_),k=E.parent,A=!0,S=b.edge(_,k),C=0;return S||(A=!1,S=b.edge(k,_)),C=S.weight,e.forEach(b.nodeEdges(_),function(q){var $=q.v===_,L=$?q.w:q.v;if(L!==k){var v=$===A,R=b.edge(q).weight;if(C+=v?R:-R,g(N,_,L)){var T=N.edge(_,L).cutvalue;C+=v?-T:T}}}),C}function d(N,b){arguments.length<2&&(b=N.nodes()[0]),h(N,{},1,b)}function h(N,b,_,E,k){var A=_,S=N.node(E);return b[E]=!0,e.forEach(N.neighbors(E),function(C){e.has(b,C)||(_=h(N,b,_,C,E))}),S.low=A,S.lim=_++,k?S.parent=k:delete S.parent,_}function m(N){return e.find(N.edges(),function(b){return N.edge(b).cutvalue<0})}function w(N,b,_){var E=_.v,k=_.w;b.hasEdge(E,k)||(E=_.w,k=_.v);var A=N.node(E),S=N.node(k),C=A,q=!1;A.lim>S.lim&&(C=S,q=!0);var $=e.filter(b.edges(),function(L){return q===y(N,N.node(L.v),C)&&q!==y(N,N.node(L.w),C)});return e.minBy($,function(L){return n(b,L)})}function p(N,b,_,E){var k=_.v,A=_.w;N.removeEdge(k,A),N.setEdge(E.v,E.w,{}),d(N),l(N,b),x(N,b)}function x(N,b){var _=e.find(N.nodes(),function(k){return!b.node(k).parent}),E=i(N,_);E=E.slice(1),e.forEach(E,function(k){var A=N.node(k).parent,S=b.edge(k,A),C=!1;S||(S=b.edge(A,k),C=!0),b.node(k).rank=b.node(A).rank+(C?S.minlen:-S.minlen)})}function g(N,b,_){return N.hasEdge(b,_)}function y(N,b,_){return _.low<=b.lim&&b.lim<=_.lim}return _r}var Er,ma;function vp(){if(ma)return Er;ma=1;var e=en(),t=e.longestPath,n=qc(),r=xp();Er=i;function i(l){switch(l.graph().ranker){case"network-simplex":o(l);break;case"tight-tree":s(l);break;case"longest-path":a(l);break;default:o(l)}}var a=t;function s(l){t(l),n(l)}function o(l){r(l)}return Er}var kr,pa;function bp(){if(pa)return kr;pa=1;var e=ae();kr=t;function t(i){var a=r(i);e.forEach(i.graph().dummyChains,function(s){for(var o=i.node(s),l=o.edgeObj,u=n(i,a,l.v,l.w),c=u.path,d=u.lca,h=0,m=c[h],w=!0;s!==l.w;){if(o=i.node(s),w){for(;(m=c[h])!==d&&i.node(m).maxRank<o.rank;)h++;m===d&&(w=!1)}if(!w){for(;h<c.length-1&&i.node(m=c[h+1]).minRank<=o.rank;)h++;m=c[h]}i.setParent(s,m),s=i.successors(s)[0]}})}function n(i,a,s,o){var l=[],u=[],c=Math.min(a[s].low,a[o].low),d=Math.max(a[s].lim,a[o].lim),h,m;h=s;do h=i.parent(h),l.push(h);while(h&&(a[h].low>c||d>a[h].lim));for(m=h,h=o;(h=i.parent(h))!==m;)u.push(h);return{path:l.concat(u.reverse()),lca:m}}function r(i){var a={},s=0;function o(l){var u=s;e.forEach(i.children(l),o),a[l]={low:u,lim:s++}}return e.forEach(i.children(),o),a}return kr}var Sr,ga;function wp(){if(ga)return Sr;ga=1;var e=ae(),t=ye();Sr={run:n,cleanup:s};function n(o){var l=t.addDummyNode(o,"root",{},"_root"),u=i(o),c=e.max(e.values(u))-1,d=2*c+1;o.graph().nestingRoot=l,e.forEach(o.edges(),function(m){o.edge(m).minlen*=d});var h=a(o)+1;e.forEach(o.children(),function(m){r(o,l,d,h,c,u,m)}),o.graph().nodeRankFactor=d}function r(o,l,u,c,d,h,m){var w=o.children(m);if(!w.length){m!==l&&o.setEdge(l,m,{weight:0,minlen:u});return}var p=t.addBorderNode(o,"_bt"),x=t.addBorderNode(o,"_bb"),g=o.node(m);o.setParent(p,m),g.borderTop=p,o.setParent(x,m),g.borderBottom=x,e.forEach(w,function(y){r(o,l,u,c,d,h,y);var N=o.node(y),b=N.borderTop?N.borderTop:y,_=N.borderBottom?N.borderBottom:y,E=N.borderTop?c:2*c,k=b!==_?1:d-h[m]+1;o.setEdge(p,b,{weight:E,minlen:k,nestingEdge:!0}),o.setEdge(_,x,{weight:E,minlen:k,nestingEdge:!0})}),o.parent(m)||o.setEdge(l,p,{weight:0,minlen:d+h[m]})}function i(o){var l={};function u(c,d){var h=o.children(c);h&&h.length&&e.forEach(h,function(m){u(m,d+1)}),l[c]=d}return e.forEach(o.children(),function(c){u(c,1)}),l}function a(o){return e.reduce(o.edges(),function(l,u){return l+o.edge(u).weight},0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,e.forEach(o.edges(),function(u){var c=o.edge(u);c.nestingEdge&&o.removeEdge(u)})}return Sr}var jr,ya;function Np(){if(ya)return jr;ya=1;var e=ae(),t=ye();jr=n;function n(i){function a(s){var o=i.children(s),l=i.node(s);if(o.length&&e.forEach(o,a),e.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,c=l.maxRank+1;u<c;++u)r(i,"borderLeft","_bl",s,l,u),r(i,"borderRight","_br",s,l,u)}}e.forEach(i.children(),a)}function r(i,a,s,o,l,u){var c={width:0,height:0,rank:u,borderType:a},d=l[a][u-1],h=t.addDummyNode(i,"border",c,s);l[a][u]=h,i.setParent(h,o),d&&i.setEdge(d,h,{weight:1})}return jr}var Cr,xa;function _p(){if(xa)return Cr;xa=1;var e=ae();Cr={adjust:t,undo:n};function t(u){var c=u.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(u)}function n(u){var c=u.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(u),(c==="lr"||c==="rl")&&(o(u),r(u))}function r(u){e.forEach(u.nodes(),function(c){i(u.node(c))}),e.forEach(u.edges(),function(c){i(u.edge(c))})}function i(u){var c=u.width;u.width=u.height,u.height=c}function a(u){e.forEach(u.nodes(),function(c){s(u.node(c))}),e.forEach(u.edges(),function(c){var d=u.edge(c);e.forEach(d.points,s),e.has(d,"y")&&s(d)})}function s(u){u.y=-u.y}function o(u){e.forEach(u.nodes(),function(c){l(u.node(c))}),e.forEach(u.edges(),function(c){var d=u.edge(c);e.forEach(d.points,l),e.has(d,"x")&&l(d)})}function l(u){var c=u.x;u.x=u.y,u.y=c}return Cr}var Tr,va;function Ep(){if(va)return Tr;va=1;var e=ae();Tr=t;function t(n){var r={},i=e.filter(n.nodes(),function(u){return!n.children(u).length}),a=e.max(e.map(i,function(u){return n.node(u).rank})),s=e.map(e.range(a+1),function(){return[]});function o(u){if(!e.has(r,u)){r[u]=!0;var c=n.node(u);s[c.rank].push(u),e.forEach(n.successors(u),o)}}var l=e.sortBy(i,function(u){return n.node(u).rank});return e.forEach(l,o),s}return Tr}var Rr,ba;function kp(){if(ba)return Rr;ba=1;var e=ae();Rr=t;function t(r,i){for(var a=0,s=1;s<i.length;++s)a+=n(r,i[s-1],i[s]);return a}function n(r,i,a){for(var s=e.zipObject(a,e.map(a,function(h,m){return m})),o=e.flatten(e.map(i,function(h){return e.sortBy(e.map(r.outEdges(h),function(m){return{pos:s[m.w],weight:r.edge(m).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var u=2*l-1;l-=1;var c=e.map(new Array(u),function(){return 0}),d=0;return e.forEach(o.forEach(function(h){var m=h.pos+l;c[m]+=h.weight;for(var w=0;m>0;)m%2&&(w+=c[m+1]),m=m-1>>1,c[m]+=h.weight;d+=h.weight*w})),d}return Rr}var Ar,wa;function Sp(){if(wa)return Ar;wa=1;var e=ae();Ar=t;function t(n,r){return e.map(r,function(i){var a=n.inEdges(i);if(a.length){var s=e.reduce(a,function(o,l){var u=n.edge(l),c=n.node(l.v);return{sum:o.sum+u.weight*c.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:i,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:i}})}return Ar}var Mr,Na;function jp(){if(Na)return Mr;Na=1;var e=ae();Mr=t;function t(i,a){var s={};e.forEach(i,function(l,u){var c=s[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};e.isUndefined(l.barycenter)||(c.barycenter=l.barycenter,c.weight=l.weight)}),e.forEach(a.edges(),function(l){var u=s[l.v],c=s[l.w];!e.isUndefined(u)&&!e.isUndefined(c)&&(c.indegree++,u.out.push(s[l.w]))});var o=e.filter(s,function(l){return!l.indegree});return n(o)}function n(i){var a=[];function s(u){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&r(u,c)}}function o(u){return function(c){c.in.push(u),--c.indegree===0&&i.push(c)}}for(;i.length;){var l=i.pop();a.push(l),e.forEach(l.in.reverse(),s(l)),e.forEach(l.out,o(l))}return e.map(e.filter(a,function(u){return!u.merged}),function(u){return e.pick(u,["vs","i","barycenter","weight"])})}function r(i,a){var s=0,o=0;i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=s/o,i.weight=o,i.i=Math.min(a.i,i.i),a.merged=!0}return Mr}var Ir,_a;function Cp(){if(_a)return Ir;_a=1;var e=ae(),t=ye();Ir=n;function n(a,s){var o=t.partition(a,function(p){return e.has(p,"barycenter")}),l=o.lhs,u=e.sortBy(o.rhs,function(p){return-p.i}),c=[],d=0,h=0,m=0;l.sort(i(!!s)),m=r(c,u,m),e.forEach(l,function(p){m+=p.vs.length,c.push(p.vs),d+=p.barycenter*p.weight,h+=p.weight,m=r(c,u,m)});var w={vs:e.flatten(c,!0)};return h&&(w.barycenter=d/h,w.weight=h),w}function r(a,s,o){for(var l;s.length&&(l=e.last(s)).i<=o;)s.pop(),a.push(l.vs),o++;return o}function i(a){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:a?o.i-s.i:s.i-o.i}}return Ir}var Pr,Ea;function Tp(){if(Ea)return Pr;Ea=1;var e=ae(),t=Sp(),n=jp(),r=Cp();Pr=i;function i(o,l,u,c){var d=o.children(l),h=o.node(l),m=h?h.borderLeft:void 0,w=h?h.borderRight:void 0,p={};m&&(d=e.filter(d,function(_){return _!==m&&_!==w}));var x=t(o,d);e.forEach(x,function(_){if(o.children(_.v).length){var E=i(o,_.v,u,c);p[_.v]=E,e.has(E,"barycenter")&&s(_,E)}});var g=n(x,u);a(g,p);var y=r(g,c);if(m&&(y.vs=e.flatten([m,y.vs,w],!0),o.predecessors(m).length)){var N=o.node(o.predecessors(m)[0]),b=o.node(o.predecessors(w)[0]);e.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+N.order+b.order)/(y.weight+2),y.weight+=2}return y}function a(o,l){e.forEach(o,function(u){u.vs=e.flatten(u.vs.map(function(c){return l[c]?l[c].vs:c}),!0)})}function s(o,l){e.isUndefined(o.barycenter)?(o.barycenter=l.barycenter,o.weight=l.weight):(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight)}return Pr}var qr,ka;function Rp(){if(ka)return qr;ka=1;var e=ae(),t=Se().Graph;qr=n;function n(i,a,s){var o=r(i),l=new t({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(u){return i.node(u)});return e.forEach(i.nodes(),function(u){var c=i.node(u),d=i.parent(u);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(l.setNode(u),l.setParent(u,d||o),e.forEach(i[s](u),function(h){var m=h.v===u?h.w:h.v,w=l.edge(m,u),p=e.isUndefined(w)?0:w.weight;l.setEdge(m,u,{weight:i.edge(h).weight+p})}),e.has(c,"minRank")&&l.setNode(u,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),l}function r(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return qr}var Dr,Sa;function Ap(){if(Sa)return Dr;Sa=1;var e=ae();Dr=t;function t(n,r,i){var a={},s;e.forEach(i,function(o){for(var l=n.parent(o),u,c;l;){if(u=n.parent(l),u?(c=a[u],a[u]=l):(c=s,s=l),c&&c!==l){r.setEdge(c,l);return}l=u}})}return Dr}var zr,ja;function Mp(){if(ja)return zr;ja=1;var e=ae(),t=Ep(),n=kp(),r=Tp(),i=Rp(),a=Ap(),s=Se().Graph,o=ye();zr=l;function l(h){var m=o.maxRank(h),w=u(h,e.range(1,m+1),"inEdges"),p=u(h,e.range(m-1,-1,-1),"outEdges"),x=t(h);d(h,x);for(var g=Number.POSITIVE_INFINITY,y,N=0,b=0;b<4;++N,++b){c(N%2?w:p,N%4>=2),x=o.buildLayerMatrix(h);var _=n(h,x);_<g&&(b=0,y=e.cloneDeep(x),g=_)}d(h,y)}function u(h,m,w){return e.map(m,function(p){return i(h,p,w)})}function c(h,m){var w=new s;e.forEach(h,function(p){var x=p.graph().root,g=r(p,x,w,m);e.forEach(g.vs,function(y,N){p.node(y).order=N}),a(p,w,g.vs)})}function d(h,m){e.forEach(m,function(w){e.forEach(w,function(p,x){h.node(p).order=x})})}return zr}var Lr,Ca;function Ip(){if(Ca)return Lr;Ca=1;var e=ae(),t=Se().Graph,n=ye();Lr={positionX:w,findType1Conflicts:r,findType2Conflicts:i,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:d,balance:m};function r(g,y){var N={};function b(_,E){var k=0,A=0,S=_.length,C=e.last(E);return e.forEach(E,function(q,$){var L=a(g,q),v=L?g.node(L).order:S;(L||q===C)&&(e.forEach(E.slice(A,$+1),function(R){e.forEach(g.predecessors(R),function(T){var V=g.node(T),F=V.order;(F<k||v<F)&&!(V.dummy&&g.node(R).dummy)&&s(N,T,R)})}),A=$+1,k=v)}),E}return e.reduce(y,b),N}function i(g,y){var N={};function b(E,k,A,S,C){var q;e.forEach(e.range(k,A),function($){q=E[$],g.node(q).dummy&&e.forEach(g.predecessors(q),function(L){var v=g.node(L);v.dummy&&(v.order<S||v.order>C)&&s(N,L,q)})})}function _(E,k){var A=-1,S,C=0;return e.forEach(k,function(q,$){if(g.node(q).dummy==="border"){var L=g.predecessors(q);L.length&&(S=g.node(L[0]).order,b(k,C,$,A,S),C=$,A=S)}b(k,C,k.length,S,E.length)}),k}return e.reduce(y,_),N}function a(g,y){if(g.node(y).dummy)return e.find(g.predecessors(y),function(N){return g.node(N).dummy})}function s(g,y,N){if(y>N){var b=y;y=N,N=b}var _=g[y];_||(g[y]=_={}),_[N]=!0}function o(g,y,N){if(y>N){var b=y;y=N,N=b}return e.has(g[y],N)}function l(g,y,N,b){var _={},E={},k={};return e.forEach(y,function(A){e.forEach(A,function(S,C){_[S]=S,E[S]=S,k[S]=C})}),e.forEach(y,function(A){var S=-1;e.forEach(A,function(C){var q=b(C);if(q.length){q=e.sortBy(q,function(T){return k[T]});for(var $=(q.length-1)/2,L=Math.floor($),v=Math.ceil($);L<=v;++L){var R=q[L];E[C]===C&&S<k[R]&&!o(N,C,R)&&(E[R]=C,E[C]=_[C]=_[R],S=k[R])}}})}),{root:_,align:E}}function u(g,y,N,b,_){var E={},k=c(g,y,N,_),A=_?"borderLeft":"borderRight";function S($,L){for(var v=k.nodes(),R=v.pop(),T={};R;)T[R]?$(R):(T[R]=!0,v.push(R),v=v.concat(L(R))),R=v.pop()}function C($){E[$]=k.inEdges($).reduce(function(L,v){return Math.max(L,E[v.v]+k.edge(v))},0)}function q($){var L=k.outEdges($).reduce(function(R,T){return Math.min(R,E[T.w]-k.edge(T))},Number.POSITIVE_INFINITY),v=g.node($);L!==Number.POSITIVE_INFINITY&&v.borderType!==A&&(E[$]=Math.max(E[$],L))}return S(C,k.predecessors.bind(k)),S(q,k.successors.bind(k)),e.forEach(b,function($){E[$]=E[N[$]]}),E}function c(g,y,N,b){var _=new t,E=g.graph(),k=p(E.nodesep,E.edgesep,b);return e.forEach(y,function(A){var S;e.forEach(A,function(C){var q=N[C];if(_.setNode(q),S){var $=N[S],L=_.edge($,q);_.setEdge($,q,Math.max(k(g,C,S),L||0))}S=C})}),_}function d(g,y){return e.minBy(e.values(y),function(N){var b=Number.NEGATIVE_INFINITY,_=Number.POSITIVE_INFINITY;return e.forIn(N,function(E,k){var A=x(g,k)/2;b=Math.max(E+A,b),_=Math.min(E-A,_)}),b-_})}function h(g,y){var N=e.values(y),b=e.min(N),_=e.max(N);e.forEach(["u","d"],function(E){e.forEach(["l","r"],function(k){var A=E+k,S=g[A],C;if(S!==y){var q=e.values(S);C=k==="l"?b-e.min(q):_-e.max(q),C&&(g[A]=e.mapValues(S,function($){return $+C}))}})})}function m(g,y){return e.mapValues(g.ul,function(N,b){if(y)return g[y.toLowerCase()][b];var _=e.sortBy(e.map(g,b));return(_[1]+_[2])/2})}function w(g){var y=n.buildLayerMatrix(g),N=e.merge(r(g,y),i(g,y)),b={},_;e.forEach(["u","d"],function(k){_=k==="u"?y:e.values(y).reverse(),e.forEach(["l","r"],function(A){A==="r"&&(_=e.map(_,function($){return e.values($).reverse()}));var S=(k==="u"?g.predecessors:g.successors).bind(g),C=l(g,_,N,S),q=u(g,_,C.root,C.align,A==="r");A==="r"&&(q=e.mapValues(q,function($){return-$})),b[k+A]=q})});var E=d(g,b);return h(b,E),m(b,g.graph().align)}function p(g,y,N){return function(b,_,E){var k=b.node(_),A=b.node(E),S=0,C;if(S+=k.width/2,e.has(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":C=-k.width/2;break;case"r":C=k.width/2;break}if(C&&(S+=N?C:-C),C=0,S+=(k.dummy?y:g)/2,S+=(A.dummy?y:g)/2,S+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":C=A.width/2;break;case"r":C=-A.width/2;break}return C&&(S+=N?C:-C),C=0,S}}function x(g,y){return g.node(y).width}return Lr}var $r,Ta;function Pp(){if(Ta)return $r;Ta=1;var e=ae(),t=ye(),n=Ip().positionX;$r=r;function r(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(n(a),function(s,o){a.node(o).x=s})}function i(a){var s=t.buildLayerMatrix(a),o=a.graph().ranksep,l=0;e.forEach(s,function(u){var c=e.max(e.map(u,function(d){return a.node(d).height}));e.forEach(u,function(d){a.node(d).y=l+c/2}),l+=c+o})}return $r}var Vr,Ra;function qp(){if(Ra)return Vr;Ra=1;var e=ae(),t=gp(),n=yp(),r=vp(),i=ye().normalizeRanks,a=bp(),s=ye().removeEmptyRanks,o=wp(),l=Np(),u=_p(),c=Mp(),d=Pp(),h=ye(),m=Se().Graph;Vr=w;function w(j,I){var z=I&&I.debugTiming?h.time:h.notime;z("layout",function(){var B=z("  buildLayoutGraph",function(){return S(j)});z("  runLayout",function(){p(B,z)}),z("  updateInputGraph",function(){x(j,B)})})}function p(j,I){I("    makeSpaceForEdgeLabels",function(){C(j)}),I("    removeSelfEdges",function(){M(j)}),I("    acyclic",function(){t.run(j)}),I("    nestingGraph.run",function(){o.run(j)}),I("    rank",function(){r(h.asNonCompoundGraph(j))}),I("    injectEdgeLabelProxies",function(){q(j)}),I("    removeEmptyRanks",function(){s(j)}),I("    nestingGraph.cleanup",function(){o.cleanup(j)}),I("    normalizeRanks",function(){i(j)}),I("    assignRankMinMax",function(){$(j)}),I("    removeEdgeLabelProxies",function(){L(j)}),I("    normalize.run",function(){n.run(j)}),I("    parentDummyChains",function(){a(j)}),I("    addBorderSegments",function(){l(j)}),I("    order",function(){c(j)}),I("    insertSelfEdges",function(){O(j)}),I("    adjustCoordinateSystem",function(){u.adjust(j)}),I("    position",function(){d(j)}),I("    positionSelfEdges",function(){H(j)}),I("    removeBorderNodes",function(){F(j)}),I("    normalize.undo",function(){n.undo(j)}),I("    fixupEdgeLabelCoords",function(){T(j)}),I("    undoCoordinateSystem",function(){u.undo(j)}),I("    translateGraph",function(){v(j)}),I("    assignNodeIntersects",function(){R(j)}),I("    reversePoints",function(){V(j)}),I("    acyclic.undo",function(){t.undo(j)})}function x(j,I){e.forEach(j.nodes(),function(z){var B=j.node(z),W=I.node(z);B&&(B.x=W.x,B.y=W.y,I.children(z).length&&(B.width=W.width,B.height=W.height))}),e.forEach(j.edges(),function(z){var B=j.edge(z),W=I.edge(z);B.points=W.points,e.has(W,"x")&&(B.x=W.x,B.y=W.y)}),j.graph().width=I.graph().width,j.graph().height=I.graph().height}var g=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},N=["acyclicer","ranker","rankdir","align"],b=["width","height"],_={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function S(j){var I=new m({multigraph:!0,compound:!0}),z=G(j.graph());return I.setGraph(e.merge({},y,U(z,g),e.pick(z,N))),e.forEach(j.nodes(),function(B){var W=G(j.node(B));I.setNode(B,e.defaults(U(W,b),_)),I.setParent(B,j.parent(B))}),e.forEach(j.edges(),function(B){var W=G(j.edge(B));I.setEdge(B,e.merge({},k,U(W,E),e.pick(W,A)))}),I}function C(j){var I=j.graph();I.ranksep/=2,e.forEach(j.edges(),function(z){var B=j.edge(z);B.minlen*=2,B.labelpos.toLowerCase()!=="c"&&(I.rankdir==="TB"||I.rankdir==="BT"?B.width+=B.labeloffset:B.height+=B.labeloffset)})}function q(j){e.forEach(j.edges(),function(I){var z=j.edge(I);if(z.width&&z.height){var B=j.node(I.v),W=j.node(I.w),X={rank:(W.rank-B.rank)/2+B.rank,e:I};h.addDummyNode(j,"edge-proxy",X,"_ep")}})}function $(j){var I=0;e.forEach(j.nodes(),function(z){var B=j.node(z);B.borderTop&&(B.minRank=j.node(B.borderTop).rank,B.maxRank=j.node(B.borderBottom).rank,I=e.max(I,B.maxRank))}),j.graph().maxRank=I}function L(j){e.forEach(j.nodes(),function(I){var z=j.node(I);z.dummy==="edge-proxy"&&(j.edge(z.e).labelRank=z.rank,j.removeNode(I))})}function v(j){var I=Number.POSITIVE_INFINITY,z=0,B=Number.POSITIVE_INFINITY,W=0,X=j.graph(),K=X.marginx||0,ne=X.marginy||0;function ce(re){var ee=re.x,ie=re.y,me=re.width,te=re.height;I=Math.min(I,ee-me/2),z=Math.max(z,ee+me/2),B=Math.min(B,ie-te/2),W=Math.max(W,ie+te/2)}e.forEach(j.nodes(),function(re){ce(j.node(re))}),e.forEach(j.edges(),function(re){var ee=j.edge(re);e.has(ee,"x")&&ce(ee)}),I-=K,B-=ne,e.forEach(j.nodes(),function(re){var ee=j.node(re);ee.x-=I,ee.y-=B}),e.forEach(j.edges(),function(re){var ee=j.edge(re);e.forEach(ee.points,function(ie){ie.x-=I,ie.y-=B}),e.has(ee,"x")&&(ee.x-=I),e.has(ee,"y")&&(ee.y-=B)}),X.width=z-I+K,X.height=W-B+ne}function R(j){e.forEach(j.edges(),function(I){var z=j.edge(I),B=j.node(I.v),W=j.node(I.w),X,K;z.points?(X=z.points[0],K=z.points[z.points.length-1]):(z.points=[],X=W,K=B),z.points.unshift(h.intersectRect(B,X)),z.points.push(h.intersectRect(W,K))})}function T(j){e.forEach(j.edges(),function(I){var z=j.edge(I);if(e.has(z,"x"))switch((z.labelpos==="l"||z.labelpos==="r")&&(z.width-=z.labeloffset),z.labelpos){case"l":z.x-=z.width/2+z.labeloffset;break;case"r":z.x+=z.width/2+z.labeloffset;break}})}function V(j){e.forEach(j.edges(),function(I){var z=j.edge(I);z.reversed&&z.points.reverse()})}function F(j){e.forEach(j.nodes(),function(I){if(j.children(I).length){var z=j.node(I),B=j.node(z.borderTop),W=j.node(z.borderBottom),X=j.node(e.last(z.borderLeft)),K=j.node(e.last(z.borderRight));z.width=Math.abs(K.x-X.x),z.height=Math.abs(W.y-B.y),z.x=X.x+z.width/2,z.y=B.y+z.height/2}}),e.forEach(j.nodes(),function(I){j.node(I).dummy==="border"&&j.removeNode(I)})}function M(j){e.forEach(j.edges(),function(I){if(I.v===I.w){var z=j.node(I.v);z.selfEdges||(z.selfEdges=[]),z.selfEdges.push({e:I,label:j.edge(I)}),j.removeEdge(I)}})}function O(j){var I=h.buildLayerMatrix(j);e.forEach(I,function(z){var B=0;e.forEach(z,function(W,X){var K=j.node(W);K.order=X+B,e.forEach(K.selfEdges,function(ne){h.addDummyNode(j,"selfedge",{width:ne.label.width,height:ne.label.height,rank:K.rank,order:X+ ++B,e:ne.e,label:ne.label},"_se")}),delete K.selfEdges})})}function H(j){e.forEach(j.nodes(),function(I){var z=j.node(I);if(z.dummy==="selfedge"){var B=j.node(z.e.v),W=B.x+B.width/2,X=B.y,K=z.x-W,ne=B.height/2;j.setEdge(z.e,z.label),j.removeNode(I),z.label.points=[{x:W+2*K/3,y:X-ne},{x:W+5*K/6,y:X-ne},{x:W+K,y:X},{x:W+5*K/6,y:X+ne},{x:W+2*K/3,y:X+ne}],z.label.x=z.x,z.label.y=z.y}})}function U(j,I){return e.mapValues(e.pick(j,I),Number)}function G(j){var I={};return e.forEach(j,function(z,B){I[B.toLowerCase()]=z}),I}return Vr}var Or,Aa;function Dp(){if(Aa)return Or;Aa=1;var e=ae(),t=ye(),n=Se().Graph;Or={debugOrdering:r};function r(i){var a=t.buildLayerMatrix(i),s=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+i.node(o).rank)}),e.forEach(i.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),e.forEach(a,function(o,l){var u="layer"+l;s.setNode(u,{rank:"same"}),e.reduce(o,function(c,d){return s.setEdge(c,d,{style:"invis"}),d})}),s}return Or}var Fr,Ma;function zp(){return Ma||(Ma=1,Fr="0.8.5"),Fr}var Br,Ia;function Lp(){return Ia||(Ia=1,Br={graphlib:Se(),layout:qp(),debug:Dp(),util:{time:ye().time,notime:ye().notime},version:zp()}),Br}var $p=Lp();const Pa=Da($p),Vp=({data:e})=>f.jsxs("div",{className:"px-4 py-2 shadow-md rounded-md bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[f.jsx(Fe,{type:"target",position:Y.Left,className:"w-2 h-2 !bg-blue-500 dark:!bg-blue-400"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("div",{className:"font-bold text-sm text-center text-gray-800 dark:text-gray-200",children:e.label}),f.jsxs("div",{className:"flex justify-center items-center mt-2 space-x-4",children:[f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Count"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.count})]}),e.avgDuration&&f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Avg. Time"}),f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.avgDuration})]})]})]}),f.jsx(Fe,{type:"source",position:Y.Right,className:"w-2 h-2 !bg-blue-500 dark:!bg-blue-400"})]}),Op=P.memo(Vp),Fp=({data:e})=>f.jsxs("div",{className:"px-4 py-2 shadow-md rounded-md bg-blue-100 dark:bg-blue-900 border border-blue-300 dark:border-blue-700",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("div",{className:"font-bold text-sm text-center text-blue-800 dark:text-blue-200",children:e.label}),f.jsx("div",{className:"flex justify-center items-center mt-2",children:f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Count"}),f.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:e.count})]})})]}),f.jsx(Fe,{type:"source",position:Y.Right,className:"w-2 h-2 !bg-blue-500 dark:!bg-blue-400"})]}),Bp=P.memo(Fp),Hp=({data:e})=>f.jsxs("div",{className:"px-4 py-2 shadow-md rounded-md bg-green-100 dark:bg-green-900 border border-green-300 dark:border-green-700",children:[f.jsx(Fe,{type:"target",position:Y.Left,className:"w-2 h-2 !bg-green-500 dark:!bg-green-400"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("div",{className:"font-bold text-sm text-center text-green-800 dark:text-green-200",children:e.label}),f.jsx("div",{className:"flex justify-center items-center mt-2",children:f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Count"}),f.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:e.count})]})})]})]}),Up=P.memo(Hp),Gp=({data:e})=>{var m,w,p,x,g,y,N,b;const[t,n,r]=h0([]),[i,a,s]=m0([]),[o,l]=P.useState({nodeSpacing:50,rankSpacing:200,direction:"LR",edgeCurvature:.5,minNodeWidth:150,abstractionLevel:100}),u={activity:Op,start:Bp,end:Up};P.useEffect(()=>{if(!e||!e.processMap)return;const _=e.processMap,E=(100-o.abstractionLevel)/100,k=_.nodes.filter(v=>v.type==="start"||v.type==="end"||v.frequency/_.maxFrequency>=E),A=new Set(k.map(v=>v.id)),S=_.edges.filter(v=>A.has(v.source)&&A.has(v.target)&&v.frequency/_.maxFrequency>=E),C=k.map(v=>({id:v.id,type:v.type||"activity",data:{label:v.label,count:v.count,frequency:v.frequency,avgDuration:v.avgDuration,type:v.type},position:{x:0,y:0}})),q=S.map(v=>({id:v.id,source:v.source,target:v.target,animated:!1,label:`${v.count}`,data:{count:v.count,frequency:v.frequency,avgDuration:v.avgDuration},style:{strokeWidth:Math.max(1,Math.log(v.count)*.5)}})),{nodes:$,edges:L}=c(C,q,o);n($),a(L)},[e,o,n,a]);const c=(_,E,k)=>{const A=new Pa.graphlib.Graph;return A.setDefaultEdgeLabel(()=>({})),A.setGraph({rankdir:k.direction,nodesep:k.nodeSpacing,ranksep:k.rankSpacing,edgesep:k.nodeSpacing/2}),_.forEach(C=>{A.setNode(C.id,{width:k.minNodeWidth,height:60})}),E.forEach(C=>{A.setEdge(C.source,C.target)}),Pa.layout(A),{nodes:_.map(C=>{const q=A.node(C.id);return{...C,position:{x:q.x-k.minNodeWidth/2,y:q.y-30}}}),edges:E}},d=(_,E)=>{l(k=>({...k,[_]:E}))},h=_=>{l(E=>({...E,direction:_}))};return f.jsxs("div",{className:"space-y-6",children:[f.jsx(oe,{className:"h-[calc(100vh-300px)] min-h-[600px]",children:f.jsxs("div",{className:"flex h-full",children:[f.jsx("div",{className:"w-64 p-4 border-r border-gray-200 dark:border-gray-700 overflow-y-auto",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Layout Direction"}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>h("LR"),className:`p-2 rounded ${o.direction==="LR"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,title:"Left to Right",children:f.jsx(Q,{icon:"carbon:arrow-right",className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>h("TB"),className:`p-2 rounded ${o.direction==="TB"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,title:"Top to Bottom",children:f.jsx(Q,{icon:"carbon:arrow-down",className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>h("RL"),className:`p-2 rounded ${o.direction==="RL"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,title:"Right to Left",children:f.jsx(Q,{icon:"carbon:arrow-left",className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>h("BT"),className:`p-2 rounded ${o.direction==="BT"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}`,title:"Bottom to Top",children:f.jsx(Q,{icon:"carbon:arrow-up",className:"w-5 h-5"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Abstraction Level"}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[f.jsx("span",{children:"Detailed"}),f.jsx("span",{children:"Abstract"})]}),f.jsx("input",{type:"range",min:"0",max:"100",value:o.abstractionLevel,onChange:_=>d("abstractionLevel",parseInt(_.target.value)),className:"w-full"})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Node Spacing"}),f.jsx("input",{type:"range",min:"20",max:"100",value:o.nodeSpacing,onChange:_=>d("nodeSpacing",parseInt(_.target.value)),className:"w-full"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rank Spacing"}),f.jsx("input",{type:"range",min:"100",max:"300",value:o.rankSpacing,onChange:_=>d("rankSpacing",parseInt(_.target.value)),className:"w-full"})]})]})}),f.jsx("div",{className:"flex-1 h-full",children:f.jsxs(yc,{nodes:t,edges:i,onNodesChange:r,onEdgesChange:s,nodeTypes:u,fitView:!0,attributionPosition:"bottom-right",minZoom:.2,maxZoom:2,children:[f.jsx(z0,{color:"#f8f8f8",gap:16}),f.jsx(A0,{}),f.jsx(E0,{nodeColor:_=>{switch(_.type){case"start":return"#4682B4";case"end":return"#20B2AA";default:return"#5F9EA0"}},maskColor:"rgba(240, 240, 240, 0.6)"})]})})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(oe,{title:"Process Statistics",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cases"}),f.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((w=(m=e==null?void 0:e.stats)==null?void 0:m.cases)==null?void 0:w.count)||0}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total patient cases"})]}),f.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Completion Rate"}),f.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[((x=(p=e==null?void 0:e.stats)==null?void 0:p.cases)==null?void 0:x.completionRate)||0,"%"]}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cases completed"})]}),f.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Avg. Process Time"}),f.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:((y=(g=e==null?void 0:e.stats)==null?void 0:g.time)==null?void 0:y.avgProcessTime)||"0 hrs"}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Per patient case"})]}),f.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-lg",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Avg. Wait Time"}),f.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:((b=(N=e==null?void 0:e.stats)==null?void 0:N.time)==null?void 0:b.avgWaitTime)||"0 hrs"}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Between activities"})]})]})}),f.jsx(oe,{title:"Top Bottlenecks",isSubpanel:!0,dropLightIntensity:"medium",children:f.jsxs("div",{className:"space-y-4",children:[((e==null?void 0:e.bottlenecks)||[]).slice(0,3).map((_,E)=>f.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[f.jsx("div",{className:`flex-shrink-0 p-2 rounded-full mr-3 ${E===0?"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-300":E===1?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-300":"bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-300"}`,children:f.jsx(Q,{icon:"carbon:warning-alt",className:"w-5 h-5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:_.activity}),f.jsxs("div",{className:"mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400",children:[f.jsxs("span",{className:"mr-2",children:["Wait: ",_.waitTime]}),f.jsxs("span",{children:["Impact: ",_.impact,"%"]})]})]})]},E)),(!(e!=null&&e.bottlenecks)||e.bottlenecks.length===0)&&f.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No bottleneck data available"})]})})]})]})},Dc=({data:e})=>{const t=[{id:"variant-1",name:"Primary Path",frequency:68,steps:5,avgDuration:"3.2 days",color:"green"},{id:"variant-2",name:"Secondary Path",frequency:22,steps:7,avgDuration:"4.5 days",color:"blue"},{id:"variant-3",name:"Complex Path",frequency:10,steps:9,avgDuration:"6.8 days",color:"orange"}];return f.jsxs("div",{className:"space-y-6",children:[f.jsx(oe,{title:"Process Variants Analysis",isSubpanel:!1,children:f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"Process Variants Overview"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"This analysis identifies the different paths patients take through the process. Understanding variants helps identify opportunities for standardization and optimization."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h4",{className:"font-medium",children:"Total Variants"}),f.jsx(Q,{icon:"carbon:flow",className:"h-5 w-5 text-blue-500"})]}),f.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h4",{className:"font-medium",children:"Primary Variant %"}),f.jsx(Q,{icon:"carbon:chart-line",className:"h-5 w-5 text-green-500"})]}),f.jsxs("p",{className:"text-2xl font-bold",children:[t[0].frequency,"%"]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h4",{className:"font-medium",children:"Variant Complexity"}),f.jsx(Q,{icon:"carbon:chart-evaluation",className:"h-5 w-5 text-orange-500"})]}),f.jsx("p",{className:"text-2xl font-bold",children:"Medium"})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Variant"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Frequency"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Steps"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg. Duration"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(n=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`h-3 w-3 rounded-full bg-${n.color}-500 mr-2`}),f.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:n.name})]})}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[f.jsxs("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:[n.frequency,"%"]}),f.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2.5 mt-1",children:f.jsx("div",{className:`bg-${n.color}-500 h-2.5 rounded-full`,style:{width:`${n.frequency}%`}})})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:n.steps}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:n.avgDuration}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[f.jsx("button",{className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3",children:"View"}),f.jsx("button",{className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Compare"})]})]},n.id))})]})})]})}),f.jsx(oe,{title:"Variant Visualization",isSubpanel:!1,children:f.jsx("div",{className:"p-4 flex justify-center items-center h-64 bg-gray-50 dark:bg-gray-700 rounded",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Q,{icon:"carbon:chart-network",className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select a variant from the table above to visualize its path"})]})})})]})};Dc.propTypes={data:ue.object.isRequired};const zc=({data:e})=>{const t=[{id:"throughput",name:"Patient Throughput",value:"142",unit:"patients/day",trend:"up",change:"+8%",icon:"carbon:user-multiple"},{id:"cycle-time",name:"Average Cycle Time",value:"3.2",unit:"days",trend:"down",change:"-12%",icon:"carbon:time"},{id:"wait-time",name:"Average Wait Time",value:"47",unit:"minutes",trend:"down",change:"-15%",icon:"carbon:hourglass"},{id:"utilization",name:"Resource Utilization",value:"78",unit:"%",trend:"up",change:"+5%",icon:"carbon:chart-evaluation"}],n=[{name:"Emergency",performance:92,color:"green"},{name:"Surgery",performance:87,color:"blue"},{name:"Medical/Surgical",performance:76,color:"yellow"},{name:"ICU",performance:95,color:"green"},{name:"Cardiology",performance:82,color:"blue"}];return f.jsxs("div",{className:"space-y-6",children:[f.jsx(oe,{title:"Performance Overview",isSubpanel:!1,children:f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"Performance Metrics"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Key performance indicators for the selected patient flow process. Metrics are compared to the previous time period."})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:t.map(r=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300",children:r.name}),f.jsx(Q,{icon:r.icon,className:"h-5 w-5 text-blue-500"})]}),f.jsxs("div",{className:"flex items-end",children:[f.jsx("p",{className:"text-2xl font-bold mr-2",children:r.value}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:r.unit})]}),f.jsxs("div",{className:`flex items-center mt-2 ${r.trend==="up"?"text-green-500":"text-red-500"}`,children:[f.jsx(Q,{icon:r.trend==="up"?"carbon:arrow-up":"carbon:arrow-down",className:"h-4 w-4 mr-1"}),f.jsx("span",{className:"text-sm",children:r.change})]})]},r.id))})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(oe,{title:"Departmental Performance",isSubpanel:!1,children:f.jsx("div",{className:"p-4",children:f.jsx("div",{className:"space-y-4",children:n.map(r=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("h4",{className:"font-medium",children:r.name}),f.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${r.performance>=90?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":r.performance>=80?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:[r.performance,"/100"]})]}),f.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2.5",children:f.jsx("div",{className:`bg-${r.color}-500 h-2.5 rounded-full`,style:{width:`${r.performance}%`}})})]},r.name))})})}),f.jsx(oe,{title:"Performance Trends",isSubpanel:!1,children:f.jsx("div",{className:"p-4 flex justify-center items-center h-64 bg-gray-50 dark:bg-gray-700 rounded",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Q,{icon:"carbon:chart-line",className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Performance trend visualization will be displayed here"})]})})})]}),f.jsx(oe,{title:"Improvement Opportunities",isSubpanel:!1,children:f.jsxs("div",{className:"p-4",children:[f.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-500 p-4 mb-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Q,{icon:"carbon:idea",className:"h-5 w-5 text-blue-500"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Reduce Wait Times in Medical/Surgical"}),f.jsx("div",{className:"mt-2 text-sm text-blue-700 dark:text-blue-300",children:f.jsx("p",{children:"Analysis suggests that adding one additional nurse during peak hours could reduce wait times by up to 25%."})})]})]})}),f.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 border-l-4 border-blue-500 p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Q,{icon:"carbon:idea",className:"h-5 w-5 text-blue-500"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Optimize Discharge Process"}),f.jsx("div",{className:"mt-2 text-sm text-blue-700 dark:text-blue-300",children:f.jsx("p",{children:"Standardizing the discharge documentation process could improve cycle time by approximately 18%."})})]})]})})]})})]})};zc.propTypes={data:ue.object.isRequired};const Lc=({data:e})=>{const t=[{id:"scenario-1",name:"Resource Reallocation",description:"Reallocate nursing staff from low-demand areas to high-demand areas during peak hours",impact:{throughput:"+12%",waitTime:"-18%",cycleTime:"-8%",cost:"-2%"},difficulty:"Medium",timeframe:"Short-term"},{id:"scenario-2",name:"Process Standardization",description:"Implement standardized discharge protocols across all departments",impact:{throughput:"+5%",waitTime:"-10%",cycleTime:"-15%",cost:"-7%"},difficulty:"Medium",timeframe:"Medium-term"},{id:"scenario-3",name:"Technology Enhancement",description:"Deploy mobile notification system for care team coordination",impact:{throughput:"+8%",waitTime:"-25%",cycleTime:"-12%",cost:"+3%"},difficulty:"High",timeframe:"Medium-term"}],n=[{name:"Average Length of Stay",current:"4.2 days",optimized:"3.5 days",improvement:"16.7%"},{name:"Patient Throughput",current:"142/day",optimized:"165/day",improvement:"16.2%"},{name:"Resource Utilization",current:"78%",optimized:"85%",improvement:"9.0%"},{name:"Average Wait Time",current:"47 min",optimized:"32 min",improvement:"31.9%"}];return f.jsxs("div",{className:"space-y-6",children:[f.jsx(oe,{title:"Optimization Scenarios",isSubpanel:!1,children:f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-lg font-medium mb-2",children:"Process Optimization Recommendations"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Based on analysis of your patient flow data, the following optimization scenarios could improve efficiency and patient experience."})]}),f.jsx("div",{className:"space-y-4",children:t.map(r=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-lg",children:r.name}),f.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:r.description})]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded text-xs",children:r.difficulty}),f.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200 rounded text-xs",children:r.timeframe})]})]}),f.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Throughput"}),f.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:r.impact.throughput})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Wait Time"}),f.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:r.impact.waitTime})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cycle Time"}),f.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:r.impact.cycleTime})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cost"}),f.jsx("p",{className:`text-lg font-semibold ${r.impact.cost.startsWith("-")?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:r.impact.cost})]})]}),f.jsx("div",{className:"mt-4 flex justify-end",children:f.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:"Run Simulation"})})]},r.id))})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(oe,{title:"Current vs. Optimized Metrics",isSubpanel:!1,children:f.jsx("div",{className:"p-4",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Metric"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Current"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Optimized"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Improvement"})]})}),f.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.map((r,i)=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r.current}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.optimized}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 dark:text-green-400",children:r.improvement})]},i))})]})})}),f.jsx(oe,{title:"Optimization Simulation",isSubpanel:!1,children:f.jsx("div",{className:"p-4 flex justify-center items-center h-64 bg-gray-50 dark:bg-gray-700 rounded",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Q,{icon:"carbon:chart-custom",className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Select a scenario to run a simulation and visualize the optimized process"})]})})})]}),f.jsx(oe,{title:"Implementation Roadmap",isSubpanel:!1,children:f.jsx("div",{className:"p-4",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute h-full w-0.5 bg-blue-200 dark:bg-blue-800 left-6 top-0"}),f.jsx("div",{className:"relative z-10 mb-8",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300",children:f.jsx(Q,{icon:"carbon:analytics",className:"h-6 w-6"})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("h4",{className:"text-lg font-medium",children:"Phase 1: Analysis & Planning"}),f.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Detailed analysis of current process, stakeholder alignment, and resource planning."}),f.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Timeframe: 2-4 weeks"})]})]})}),f.jsx("div",{className:"relative z-10 mb-8",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300",children:f.jsx(Q,{icon:"carbon:development",className:"h-6 w-6"})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("h4",{className:"text-lg font-medium",children:"Phase 2: Pilot Implementation"}),f.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Implement changes in a controlled environment, gather feedback, and refine approach."}),f.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Timeframe: 4-6 weeks"})]})]})}),f.jsx("div",{className:"relative z-10 mb-8",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300",children:f.jsx(Q,{icon:"carbon:deployment-policy",className:"h-6 w-6"})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("h4",{className:"text-lg font-medium",children:"Phase 3: Full Deployment"}),f.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Organization-wide implementation with training and change management support."}),f.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Timeframe: 2-3 months"})]})]})}),f.jsx("div",{className:"relative z-10",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300",children:f.jsx(Q,{icon:"carbon:chart-evaluation",className:"h-6 w-6"})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("h4",{className:"text-lg font-medium",children:"Phase 4: Monitoring & Refinement"}),f.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Continuous monitoring of KPIs, gathering feedback, and iterative improvements."}),f.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Timeframe: Ongoing"})]})]})})]})})})]})};Lc.propTypes={data:ue.object.isRequired};const Wp=({activeView:e,filters:t})=>{const{selectedLocation:n,dateRange:r}=xl(),[i,a]=P.useState(e||"overview"),[s,o]=P.useState(!1),[l,u]=P.useState(t||{selectedHospital:"",selectedLocation:"",selectedDepartment:"",selectedUnit:"",selectedPatientType:"",dateRange:r,showComparison:!1,comparisonDateRange:{startDate:new Date(2024,0,1),endDate:new Date(2024,5,30)}});P.useEffect(()=>{u(t||(E=>({...E,dateRange:r})))},[r,t]),P.useEffect(()=>{e&&a(e)},[e]);const{data:c,isLoading:d,error:h,refresh:m,derivedMetrics:w,hasData:p}=cu(l),x=E=>{u(E)},g=[{title:"Analysis",items:[{id:"overview",label:"Overview",icon:"carbon:dashboard"},{id:"statistics",label:"Statistics",icon:"carbon:chart-line"},{id:"variants",label:"Variants",icon:"carbon:flow"},{id:"performance",label:"Performance",icon:"carbon:chart-evaluation"},{id:"optimization",label:"Optimization",icon:"carbon:optimize"}]}],y=E=>{a(E)},N=()=>{if(d)return f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-healthcare-primary dark:border-healthcare-primary-dark"})});if(h)return f.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded relative",role:"alert",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Patient Flow Data"}),f.jsx("div",{className:"mt-2 text-sm text-red-700",children:h.message||"Failed to load patient flow data. Please try again later."}),f.jsx("div",{className:"mt-4",children:f.jsx("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Retry"})})]})]})});if(!p)return f.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 text-yellow-700 dark:text-yellow-200 px-4 py-3 rounded relative",role:"alert",children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No Data Available"}),f.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-200",children:"There is no patient flow data available for the selected filters. Please try different filters or contact support if you believe this is an error."}),f.jsx("div",{className:"mt-4",children:f.jsx("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 dark:bg-yellow-800 dark:text-yellow-100 dark:hover:bg-yellow-700",children:"Refresh Data"})})]})]})});if(i==="process-map")return f.jsx(oe,{title:"",children:f.jsx(Gp,{data:c})});switch(i){case"overview":return f.jsx(Ur,{data:c,derivedMetrics:w});case"statistics":return f.jsx(to,{data:c});case"variants":return f.jsx(Dc,{data:c});case"performance":return f.jsx(zc,{data:c});case"optimization":return f.jsx(Lc,{data:c});default:return f.jsx(Ur,{data:c,derivedMetrics:w})}},b=()=>{o(!s)},_=()=>f.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 h-full",children:f.jsx("div",{className:"space-y-1",children:g.map(E=>f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2",children:E.title}),f.jsx("div",{className:"space-y-1",children:E.items.map(k=>f.jsxs("button",{onClick:()=>y(k.id),className:`flex items-center w-full px-3 py-2 text-sm font-medium rounded-md transition-colors duration-150 ${i===k.id?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[k.icon&&f.jsx("span",{className:"mr-3",children:f.jsx(Q,{icon:k.icon,className:"h-5 w-5"})}),k.label]},k.id))})]},E.title))})});return f.jsxs("div",{className:"w-full",children:[f.jsx("div",{className:"mb-4 md:hidden",children:f.jsx("button",{onClick:b,className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:s?"Hide Filters":"Show Filters"})}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[f.jsxs("div",{className:"md:w-64 flex-shrink-0 space-y-6",children:[f.jsx("div",{className:"hidden md:block sticky top-4",children:f.jsx(_,{})}),f.jsx("div",{className:`${s?"":"hidden md:block"} sticky top-4 mt-6`,children:f.jsx(ji,{children:f.jsx(vl,{locations:Object.values((c==null?void 0:c.locations)||{}).map(E=>({...E,name:E.name||E.fullName||"Unknown Location"})),services:Object.keys((c==null?void 0:c.departments)||{}),providers:Object.values((c==null?void 0:c.units)||{}).map(E=>({...E,id:E.id||"",name:E.name||"Unknown Unit",department:E.department||""})),onFilterChange:x,initialFilters:l})})})]}),f.jsx("div",{className:"flex-grow",children:f.jsx(ji,{children:f.jsx(Jl,{mode:"wait",children:f.jsx(Ee.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.3},className:"w-full",children:N()},i)})})})]})]})};Wp.propTypes={activeView:ue.string,filters:ue.shape({selectedHospital:ue.string,selectedLocation:ue.string,selectedDepartment:ue.string,selectedUnit:ue.string,selectedPatientType:ue.string,dateRange:ue.shape({startDate:ue.instanceOf(Date),endDate:ue.instanceOf(Date)}),showComparison:ue.bool,comparisonDateRange:ue.shape({startDate:ue.instanceOf(Date),endDate:ue.instanceOf(Date)})})};export{z0 as B,A0 as C,Fe as H,Qt as M,Wp as P,yc as R,m0 as a,Hh as b,E0 as c,Pa as d,h0 as u};
