import{j as t}from"./app-DNCPaP7U.js";import{u as F,H as g}from"./useDarkMode-Cjnn_MHf.js";import{R as L,L as T,C as z,X as K,Y as R,T as G,a as V,d as C}from"./LineChart-BiJvPHt8.js";import{A as x}from"./Area-Cf-Jitxr.js";const H=({data:i,height:D=300,target:d=80,criticalThreshold:b=10,warningThreshold:v=20,ariaLabel:w="Line chart showing demand and capacity trends"})=>{const[y]=F(),f=g[y?"dark":"light"],e={...f,...g,critical:g.error},E=f.border,m=f.text,W=f.surface,u=f.text,N=f.background,O=()=>{if(!n)return[];const o=[];return i.forEach((r,l)=>{const a=r.capacity-r.demand;if(a<=b){const s=e.critical;o.push({x1:l,x2:l+1,fill:s.startsWith("rgb")?`rgba(${s.replace("rgb(","").replace(")","")}, 0.1)`:"rgba(211, 47, 47, 0.1)"})}else if(a<=v){const s=e.warning||"#ED6C02";o.push({x1:l,x2:l+1,fill:typeof s=="string"&&s.startsWith("rgb")?`rgba(${s.replace("rgb(","").replace(")","")}, 0.1)`:"rgba(237, 108, 2, 0.1)"})}}),o};if(!(i!=null&&i.length))return null;const n="demand"in i[0]&&"capacity"in i[0],h="value"in i[0],j="staffed"in i[0]&&"unstaffed"in i[0],p=!n&&!h&&!j,S=p?Object.keys(i[0]).filter(o=>o!=="month"):[],k=h?i.reduce((o,r)=>o+r.value,0)/i.length:null,A=({active:o,payload:r,label:l})=>{if(o&&r&&r.length){const a=r[0].payload;return t.jsxs("div",{className:"p-3 shadow-lg rounded-lg border",style:{backgroundColor:W,color:u,borderColor:e.border},role:"tooltip","aria-live":"polite",children:[t.jsx("p",{className:"font-medium",children:l}),t.jsx("div",{className:"mt-2 space-y-1",children:p?r.map((s,c)=>t.jsxs("p",{className:"text-sm",style:{color:s.color},children:[s.name,": ",s.value]},c)):n?r.map((s,c)=>t.jsxs("p",{className:"text-sm",style:{color:s.color},children:[s.name,": ",s.value]},c)):j?r.map((s,c)=>t.jsxs("p",{className:"text-sm",style:{color:s.color},children:[s.name,": ",s.value,"%"]},c)):h&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-sm",children:["Utilization:",t.jsxs("span",{className:"font-medium ml-1",children:[a.value,"%"]}),t.jsxs("span",{className:"ml-2 text-xs",style:{color:a.value>=d?e.success||"#2E7D32":e.critical},children:["(",a.value>=d?"âœ“":`${(d-a.value).toFixed(1)}% below target`,")"]})]}),t.jsxs("p",{className:"text-xs",children:["Target: ",d,"%"]}),a.breakdown&&t.jsxs("div",{className:"mt-2 pt-2 border-t",style:{borderColor:e.border},children:[t.jsx("p",{className:"text-xs font-medium mb-1",children:"Breakdown:"}),Object.entries(a.breakdown).map(([s,c])=>t.jsxs("p",{className:"text-xs",children:[s,": ",t.jsxs("span",{className:"font-medium",children:[c,"%"]})]},s))]})]})})]})}return null};return t.jsx("div",{className:"w-full",style:{height:`${D}px`,backgroundColor:N},role:"img","aria-label":w,children:t.jsx(L,{width:"100%",height:"100%",children:t.jsxs(T,{data:i,margin:{top:30,right:40,left:40,bottom:80},role:"presentation",children:[t.jsx("defs",{children:n?t.jsxs(t.Fragment,{children:[t.jsxs("linearGradient",{id:"colorDemand",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:e.warning||"#ED6C02",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:e.warning||"#ED6C02",stopOpacity:.1})]}),t.jsxs("linearGradient",{id:"colorCapacity",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:e.info||"#0288D1",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:e.info||"#0288D1",stopOpacity:.1})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:e.info||"#0288D1",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:e.info||"#0288D1",stopOpacity:.1})]}),t.jsxs("linearGradient",{id:"colorStaffed",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:e.success||"#2E7D32",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:e.success||"#2E7D32",stopOpacity:.1})]}),t.jsxs("linearGradient",{id:"colorUnstaffed",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:e.warning||"#ED6C02",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:e.warning||"#ED6C02",stopOpacity:.1})]})]})}),t.jsx(z,{strokeDasharray:"3 3",stroke:E,strokeOpacity:y?.2:1}),n&&O().map((o,r)=>t.jsx("rect",{x:o.x1,width:o.x2-o.x1,y:0,height:"100%",fill:o.fill,className:"threshold-region"},r)),t.jsx(K,{dataKey:n?"date":"month",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fill:m,fontSize:14},tickSize:10}),t.jsx(R,{domain:p?["auto","auto"]:["dataMin - 10","dataMax + 10"],tick:{fill:m,fontSize:14},tickSize:10,width:60,label:{value:p?"Value":"Beds",angle:-90,position:"insideLeft",style:{fill:m}},role:"presentation","aria-label":p?"Vital sign values":"Number of beds"}),t.jsx(G,{content:t.jsx(A,{}),role:"tooltip","aria-live":"polite"}),t.jsx(V,{wrapperStyle:{fontSize:"14px",color:u,paddingBottom:"20px"},verticalAlign:"top",role:"list",formatter:o=>t.jsx("span",{role:"listitem",style:{color:u},children:o})}),p&&S.map((o,r)=>{const l=["#ef4444","#3b82f6","#10b981","#f59e0b"];return t.jsx(x,{type:"monotone",dataKey:o,name:o,stroke:l[r%l.length],strokeWidth:2,dot:{r:4,strokeWidth:2},activeDot:{r:6,strokeWidth:2}},o)}),h&&t.jsxs(t.Fragment,{children:[d&&t.jsx(C,{y:d,stroke:e.critical,strokeDasharray:"3 3",label:{value:"Target",position:"right",fill:e.critical,fontSize:14}}),k&&t.jsx(C,{y:k,stroke:e.info||"#0288D1",strokeDasharray:"3 3",label:{value:"Average",position:"right",fill:e.info||"#0288D1",fontSize:14}}),t.jsx(x,{type:"monotone",dataKey:"value",stroke:e.info||"#0288D1",strokeWidth:3,fill:"url(#colorValue)",dot:{r:6,strokeWidth:2,fill:e.info||"#0288D1"},activeDot:{r:8,strokeWidth:2,fill:e.info||"#0288D1"}})]}),n&&t.jsxs(t.Fragment,{children:[t.jsx(x,{type:"monotone",dataKey:"demand",name:"Predicted Demand",stroke:e.warning||"#ED6C02",strokeWidth:3,fill:"url(#colorDemand)",dot:{r:6,strokeWidth:2,fill:e.warning||"#ED6C02"},activeDot:{r:8,strokeWidth:2,fill:e.warning||"#ED6C02"}}),t.jsx(x,{type:"monotone",dataKey:"capacity",name:"Available Capacity",stroke:e.info||"#0288D1",strokeWidth:3,fill:"url(#colorCapacity)",dot:{r:6,strokeWidth:2,fill:e.info||"#0288D1"},activeDot:{r:8,strokeWidth:2,fill:e.info||"#0288D1"}})]}),j&&t.jsxs(t.Fragment,{children:[t.jsx(x,{type:"monotone",dataKey:"staffed",name:"Staffed",stroke:e.success||"#2E7D32",strokeWidth:3,fill:"url(#colorStaffed)",dot:{r:6,strokeWidth:2,fill:e.success||"#2E7D32"},activeDot:{r:8,strokeWidth:2,fill:e.success||"#2E7D32"}}),t.jsx(x,{type:"monotone",dataKey:"unstaffed",name:"Unstaffed",stroke:e.warning||"#ED6C02",strokeWidth:3,fill:"url(#colorUnstaffed)",dot:{r:6,strokeWidth:2,fill:e.warning||"#ED6C02"},activeDot:{r:8,strokeWidth:2,fill:e.warning||"#ED6C02"}})]})]})})})};export{H as L};
