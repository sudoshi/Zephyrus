import{K as S,r as i,j as e,$ as b,S as C}from"./app-DNCPaP7U.js";import{I as o}from"./InputError-C0abPSKR.js";import{I as l}from"./InputLabel-B2fR4fPq.js";import{P as I}from"./PrimaryButton-CBRwOkVO.js";import{T as u}from"./TextInput-wwBnQhns.js";import{U as k}from"./UserAvatar-DdRArJVQ.js";import{z as w}from"./transition-l3QoJGEh.js";function A({mustVerifyEmail:p,status:h,className:j=""}){const t=S().props.auth.user,[r,n]=i.useState({name:t.name,username:t.username,email:t.email}),[m,v]=i.useState({}),[g,c]=i.useState(!1),[y,d]=i.useState(!1),N=async a=>{var s,f;a.preventDefault(),c(!0);try{await C.patch("/profile",r),d(!0),setTimeout(()=>d(!1),2e3)}catch(x){(f=(s=x.response)==null?void 0:s.data)!=null&&f.errors&&v(x.response.data.errors)}finally{c(!1)}};return e.jsxs("section",{className:j,children:[e.jsxs("header",{className:"flex items-center gap-4",children:[e.jsx(k,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your account's profile information and email address."})]})]}),e.jsxs("form",{onSubmit:N,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"Name"}),e.jsx(u,{id:"name",className:"mt-1 block w-full",value:r.name,onChange:a=>n(s=>({...s,name:a.target.value})),required:!0,isFocused:!0,autoComplete:"name"}),e.jsx(o,{className:"mt-2",message:m.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"username",value:"Username"}),e.jsx(u,{id:"username",className:"mt-1 block w-full",value:r.username,onChange:a=>n(s=>({...s,username:a.target.value})),required:!0,autoComplete:"username"}),e.jsx(o,{className:"mt-2",message:m.username})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",value:"Email"}),e.jsx(u,{id:"email",type:"email",className:"mt-1 block w-full",value:r.email,onChange:a=>n(s=>({...s,email:a.target.value})),required:!0,autoComplete:"username"}),e.jsx(o,{className:"mt-2",message:m.email})]}),p&&t.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-2 text-sm text-gray-800",children:["Your email address is unverified.",e.jsx(b,{href:"/email/verification-notification",method:"post",as:"button",className:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Click here to re-send the verification email."})]}),h==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(I,{disabled:g,children:"Save"}),e.jsx(w,{show:y,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Saved."})})]})]})]})}export{A as default};
