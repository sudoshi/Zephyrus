import{r as n,j as e,L as g}from"./app-DNCPaP7U.js";import{D as v}from"./DashboardLayout-BfUOEmbm.js";import{C as s}from"./Card-Bb1H85Wn.js";import{I as i}from"./iconify-CuDxMG-b.js";import{m as f,a as y}from"./room-status-CiRoKIFm.js";import{P as N}from"./PageContentLayout-DDKRpoW7.js";import"./useDarkMode-Cjnn_MHf.js";import"./TopNavigation-BPEMQkzy.js";import"./UserAvatar-DdRArJVQ.js";import"./DarkModeToggle-oH18ZJvw.js";import"./useFocusVisible-KZXt4Cm4.js";import"./portal-B_iHtz37.js";import"./transition-l3QoJGEh.js";const p=()=>{const[x,b]=n.useState(f),[r,k]=n.useState(y),[o,w]=n.useState(!1),[d,_]=n.useState(null),h=t=>{switch(t){case"In Progress":return"bg-green-100 text-green-800";case"Turnover":return"bg-yellow-100 text-yellow-800";case"Available":return"bg-blue-100 text-blue-800";case"Delayed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=t=>t>=100?"bg-red-600":t>=90?"bg-yellow-600":"bg-green-600",u=(t,a)=>{if(!t||!a)return 0;const c=new Date(t),j=(new Date-c)/1e3/60;return Math.min(Math.round(j/a*100),100)},l=t=>{const a=Math.floor(t/60),c=t%60;return a>0?`${a}h ${c}m`:`${c}m`};return o?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):d?e.jsxs("div",{className:"p-6 text-center text-red-600",children:[e.jsx(i,{icon:"heroicons:exclamation-circle",className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:d})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(s,{children:e.jsx(s.Content,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Overall Utilization"}),e.jsxs("div",{className:"mt-1 text-2xl font-semibold",children:[r.overall_utilization,"%"]})]}),e.jsx("div",{className:"p-3 bg-healthcare-info bg-opacity-10 dark:bg-healthcare-info-dark dark:bg-opacity-20 rounded-full",children:e.jsx(i,{icon:"heroicons:chart-bar",className:"w-6 h-6 text-healthcare-info dark:text-healthcare-info-dark"})})]})})}),e.jsx(s,{children:e.jsx(s.Content,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Average Turnover"}),e.jsxs("div",{className:"mt-1 text-2xl font-semibold",children:[r.average_turnover,"m"]})]}),e.jsx("div",{className:"p-3 bg-healthcare-success bg-opacity-10 dark:bg-healthcare-success-dark dark:bg-opacity-20 rounded-full",children:e.jsx(i,{icon:"heroicons:clock",className:"w-6 h-6 text-healthcare-success dark:text-healthcare-success-dark"})})]})})}),e.jsx(s,{children:e.jsx(s.Content,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"On-Time Starts"}),e.jsxs("div",{className:"mt-1 text-2xl font-semibold",children:[r.on_time_starts,"/",r.on_time_starts+r.late_starts]})]}),e.jsx("div",{className:"p-3 bg-healthcare-warning bg-opacity-10 dark:bg-healthcare-warning-dark dark:bg-opacity-20 rounded-full",children:e.jsx(i,{icon:"heroicons:check-circle",className:"w-6 h-6 text-healthcare-warning dark:text-healthcare-warning-dark"})})]})})}),e.jsx(s,{children:e.jsx(s.Content,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Delays Today"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold",children:r.delays_today})]}),e.jsx("div",{className:"p-3 bg-healthcare-critical bg-opacity-10 dark:bg-healthcare-critical-dark dark:bg-opacity-20 rounded-full",children:e.jsx(i,{icon:"heroicons:exclamation-triangle",className:"w-6 h-6 text-healthcare-critical dark:text-healthcare-critical-dark"})})]})})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-6",children:x.map(t=>{const a=t.current_case?u(t.or_in_time,t.current_case.estimated_duration):0;return e.jsxs(s,{children:[e.jsx(s.Header,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(s.Title,{children:t.room_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(t.status)}`,children:t.status})]}),t.status==="In Progress"&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Case Time"}),e.jsx("div",{className:"text-healthcare-success dark:text-healthcare-success-dark font-medium",children:l(Math.round((new Date-new Date(t.or_in_time))/1e3/60))})]})]})}),e.jsxs(s.Content,{children:[t.current_case?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.current_case.procedure_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.current_case.surgeon_name," • ",t.current_case.service_name]})]}),e.jsxs("div",{className:"relative pt-1",children:[e.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[e.jsx("div",{children:e.jsx("span",{className:"text-xs font-semibold inline-block text-gray-600",children:"Progress"})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs font-semibold inline-block text-gray-600",children:[a,"%"]})})]}),e.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-gray-200",children:e.jsx("div",{style:{width:`${a}%`},className:`shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ${m(a)}`})})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Estimated Duration: ",l(t.current_case.estimated_duration)]})]}):t.next_case?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Next Case"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.next_case.procedure_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(t.next_case.scheduled_start_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," • ",l(t.next_case.estimated_duration)]})]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No cases scheduled"}),e.jsxs("div",{className:"mt-4 pt-4 border-t grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Today"}),e.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[t.utilization.today,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Week"}),e.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[t.utilization.week,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Month"}),e.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[t.utilization.month,"%"]})]})]})]})]},t.room_id)})})]})},U=()=>e.jsxs(v,{children:[e.jsx(g,{title:"Room Status - ZephyrusOR"}),e.jsx(N,{title:"Operating Room Status",subtitle:"Real-time status and progress of all operating rooms",children:e.jsx(p,{})})]});export{U as default};
