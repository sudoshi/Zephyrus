import{r as l,j as e,L as D}from"./app-DNCPaP7U.js";import{D as M}from"./DashboardLayout-BfUOEmbm.js";import{C as v}from"./Card-Bb1H85Wn.js";import{P as w}from"./PrimaryButton-CBRwOkVO.js";import{S as o,a as g,m as k}from"./cases-WZ7qXQk7.js";import{I as f}from"./iconify-CuDxMG-b.js";import{M as P}from"./Modal-Fb8p8NaI.js";import{m as S}from"./dashboard-DsuhOCS6.js";import{P as T}from"./PageContentLayout-DDKRpoW7.js";import"./useDarkMode-Cjnn_MHf.js";import"./TopNavigation-BPEMQkzy.js";import"./UserAvatar-DdRArJVQ.js";import"./DarkModeToggle-oH18ZJvw.js";import"./useFocusVisible-KZXt4Cm4.js";import"./portal-B_iHtz37.js";import"./transition-l3QoJGEh.js";import"./hidden-BGYz94zY.js";import"./dialog-DfxhGoaS.js";const E=({isOpen:b,onClose:c,onSubmit:N,initialData:d=null})=>{const[a,j]=l.useState({patient_name:"",mrn:"",procedure_name:"",service_id:"",room_id:"",primary_surgeon_id:"",surgery_date:"",scheduled_start_time:"",estimated_duration:"",case_class:"",asa_rating:"",case_type:"",patient_class:"",notes:""}),_=[{room_id:1,name:"OR-1"},{room_id:2,name:"OR-2"},{room_id:3,name:"OR-3"},{room_id:4,name:"OR-4"},{room_id:5,name:"OR-5"}],m=[{provider_id:1,name:"Dr. Sarah Johnson"},{provider_id:2,name:"Dr. Michael Smith"},{provider_id:3,name:"Dr. James Wilson"},{provider_id:4,name:"Dr. Emily Brown"}];l.useEffect(()=>{j(d?{...d,surgery_date:d.surgery_date,scheduled_start_time:d.scheduled_start_time.split("T")[1].substring(0,5),estimated_duration:Math.round(d.estimated_duration/60)}:{patient_name:"",mrn:"",procedure_name:"",service_id:"",room_id:"",primary_surgeon_id:"",surgery_date:new Date().toISOString().split("T")[0],scheduled_start_time:"",estimated_duration:"",case_class:"",asa_rating:"",case_type:"",patient_class:"",notes:""})},[d]);const r=(s,p)=>{j(h=>({...h,[s]:p}))},x=async s=>{var h,y,u;s.preventDefault();const p={...a,estimated_duration:parseInt(a.estimated_duration)*60,scheduled_start_time:`${a.surgery_date}T${a.scheduled_start_time}:00`,service_name:(h=S.find(t=>t.service_id.toString()===a.service_id))==null?void 0:h.name,room_name:(y=_.find(t=>t.room_id.toString()===a.room_id))==null?void 0:y.name,surgeon_name:(u=m.find(t=>t.provider_id.toString()===a.primary_surgeon_id))==null?void 0:u.name};await N(p)};return e.jsx(P,{show:b,onClose:c,maxWidth:"2xl",children:e.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d?"Edit Case":"Add New Case"}),e.jsx("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-gray-500",children:e.jsx(f,{icon:"heroicons:x-mark",className:"w-6 h-6"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name"}),e.jsx("input",{type:"text",value:a.patient_name,onChange:s=>r("patient_name",s.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRN"}),e.jsx("input",{type:"text",value:a.mrn,onChange:s=>r("mrn",s.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),e.jsx(o,{value:a.service_id,onChange:s=>r("service_id",s),options:S.map(s=>({label:s.name,value:s.service_id.toString()}))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Procedure"}),e.jsx("input",{type:"text",value:a.procedure_name,onChange:s=>r("procedure_name",s.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Surgeon"}),e.jsx(o,{value:a.primary_surgeon_id,onChange:s=>r("primary_surgeon_id",s),options:m.map(s=>({label:s.name,value:s.provider_id.toString()}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room"}),e.jsx(o,{value:a.room_id,onChange:s=>r("room_id",s),options:_.map(s=>({label:s.name,value:s.room_id.toString()}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surgery Date"}),e.jsx("input",{type:"date",value:a.surgery_date,onChange:s=>r("surgery_date",s.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:a.scheduled_start_time,onChange:s=>r("scheduled_start_time",s.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Duration (hours)"}),e.jsx("input",{type:"number",min:"0.5",step:"0.5",value:a.estimated_duration,onChange:s=>r("estimated_duration",s.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Case Class"}),e.jsx(o,{value:a.case_class,onChange:s=>r("case_class",s),options:g.caseClasses})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ASA Rating"}),e.jsx(o,{value:a.asa_rating,onChange:s=>r("asa_rating",s),options:g.asaRatings})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Case Type"}),e.jsx(o,{value:a.case_type,onChange:s=>r("case_type",s),options:g.caseTypes})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Class"}),e.jsx(o,{value:a.patient_class,onChange:s=>r("patient_class",s),options:g.patientClasses})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:s=>r("notes",s.target.value),rows:3,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-6 pt-4 border-t",children:[e.jsx(w,{type:"button",onClick:c,className:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx(w,{type:"submit",children:d?"Update Case":"Create Case"})]})]})})},A=()=>{const[b,c]=l.useState(k),[N,d]=l.useState(!1),[a,j]=l.useState(null),[_,m]=l.useState(!1),[r,x]=l.useState(null),[s,p]=l.useState({date:new Date().toISOString().split("T")[0],status:"",service:"",room:""}),h=[{room_id:1,name:"OR-1"},{room_id:2,name:"OR-2"},{room_id:3,name:"OR-3"},{room_id:4,name:"OR-4"},{room_id:5,name:"OR-5"}];l.useEffect(()=>{const t=k.filter(i=>{const n=i.surgery_date===s.date,C=!s.status||i.status===s.status,R=!s.service||i.service_id.toString()===s.service,O=!s.room||i.room_id.toString()===s.room;return n&&C&&R&&O});c(t)},[s]);const y=t=>{switch(t){case"Scheduled":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-green-100 text-green-800";case"Completed":return"bg-gray-100 text-gray-800";case"Delayed":return"bg-yellow-100 text-yellow-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=(t,i)=>{p(n=>({...n,[t]:i}))};return N?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"})}):a?e.jsxs("div",{className:"p-6 text-center text-red-600",children:[e.jsx(f,{icon:"heroicons:exclamation-circle",className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:a})]}):e.jsxs(v,{children:[e.jsx(v.Header,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v.Title,{children:"OR Cases"}),e.jsx(v.Description,{children:"Manage and track surgical cases"})]}),e.jsxs(w,{onClick:()=>{x(null),m(!0)},children:[e.jsx(f,{icon:"heroicons:plus",className:"w-5 h-5 mr-2"}),"Add Case"]})]})}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:s.date,onChange:t=>u("date",t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx(o,{value:s.status,onChange:t=>u("status",t),options:[{label:"All Statuses",value:""},...g.statuses]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),e.jsx(o,{value:s.service,onChange:t=>u("service",t),options:[{label:"All Services",value:""},...S.map(t=>({label:t.name,value:t.service_id.toString()}))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room"}),e.jsx(o,{value:s.room,onChange:t=>u("room",t),options:[{label:"All Rooms",value:""},...h.map(t=>({label:t.name,value:t.room_id.toString()}))]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Procedure"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Surgeon"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:new Date(t.scheduled_start_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),e.jsxs("div",{className:"text-gray-500",children:[Math.round(t.estimated_duration/60)," hrs"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:t.patient_name}),e.jsx("div",{className:"text-gray-500",children:t.mrn})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:t.procedure_name}),e.jsx("div",{className:"text-gray-500",children:t.service_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium",children:t.surgeon_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium",children:t.room_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y(t.status)}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>{x(t),m(!0)},className:"text-indigo-600 hover:text-indigo-900",children:e.jsx(f,{icon:"heroicons:pencil",className:"w-4 h-4"})})})]},t.case_id))})]})}),e.jsx(E,{isOpen:_,onClose:()=>{m(!1),x(null)},initialData:r,onSubmit:async t=>{try{if(r)c(i=>i.map(n=>n.case_id===r.case_id?{...n,...t}:n));else{const i={case_id:Math.max(...b.map(n=>n.case_id))+1,...t,status:"Scheduled"};c(n=>[...n,i])}m(!1),x(null)}catch(i){console.error("Error saving case:",i)}}})]})},ee=()=>e.jsxs(M,{children:[e.jsx(D,{title:"OR Cases - ZephyrusOR"}),e.jsx(T,{title:"Cases",subtitle:"View and manage surgical cases",children:e.jsx(A,{})})]});export{ee as default};
