import{r as p,j as e}from"./app-DNCPaP7U.js";import{R as F}from"./RTDCPageLayout-CkY9OsVd.js";import{C as v}from"./Card-Bb1H85Wn.js";import{s as k,a as z,g as L}from"./rtdc-DT7HapzR.js";import{I as u}from"./iconify-CuDxMG-b.js";import{T as q}from"./TrendChart-Dr5a1YVE.js";import"./DashboardLayout-BfUOEmbm.js";import"./useDarkMode-Cjnn_MHf.js";import"./TopNavigation-BPEMQkzy.js";import"./UserAvatar-DdRArJVQ.js";import"./DarkModeToggle-oH18ZJvw.js";import"./useFocusVisible-KZXt4Cm4.js";import"./portal-B_iHtz37.js";import"./transition-l3QoJGEh.js";import"./PageContentLayout-DDKRpoW7.js";import"./LineChart-BiJvPHt8.js";import"./clsx-B-dksMZM.js";import"./_baseAssignValue-CSgy8S_V.js";import"./find-CT4xMDYu.js";const _=(s,y=60)=>{const c=new Date,o=[];let m;switch(s){case"24h":for(let i=24;i>=0;i--)m=new Date(c.getTime()-i*60*60*1e3),o.push(m);break;case"7d":for(let i=7*24;i>=0;i-=4)m=new Date(c.getTime()-i*60*60*1e3),o.push(m);break;case"30d":for(let i=30;i>=0;i--)m=new Date(c.getTime()-i*24*60*60*1e3),o.push(m);break}return o},G=(s,y)=>{const c={imaging:"imaging",therapy:"therapy",support:"support"},o={imaging:{baseline:45,dayShift:s>=8&&s<18?30:0,eveningShift:s>=18&&s<22?15:0,nightShift:s>=22||s<8?-15:0,peakHours:[10,14]},therapy:{baseline:40,dayShift:s>=8&&s<17?35:-30,peakHours:[9,13,15]},support:{baseline:35,dayShift:s>=6&&s<22?25:-15,peakHours:[9,14,19]}},m=c[y]||"support",i=o[m];let h=i.baseline;return h+=i.dayShift||0,h+=i.eveningShift||0,h+=i.nightShift||0,i.peakHours.includes(s)&&(h+=20),h},J=(s,y)=>{const c=(Math.random()-.5)*.2*s,o=new Date().getDay(),m=o===0||o===6?-10:0,h=new Date().getDate()<=5?10:0;return Math.max(15,Math.round(s+c+m+h))},K=(s,y="24h")=>{const c=_(y),o=s==="imaging"?"imaging":s==="therapy"?"therapy":"support";return c.map(m=>{const i=m.getHours(),h=G(i,o),M=J(h);return{time:m.toISOString(),value:M,isWeekend:m.getDay()===0||m.getDay()===6,shift:i>=7&&i<15?"day":i>=15&&i<23?"evening":"night"}})},Q=(s,y="24h")=>{const c={};return Object.entries(s.services).forEach(([o,m])=>{if(m){const i=k.find(h=>h.id===o);i&&(c[o]=K(i.category,y))}}),c},X=s=>{if(!s||s.length<2)return"stable";const y=s.slice(-6),c=y.slice(0,3).reduce((i,h)=>i+h.value,0)/3,m=y.slice(-3).reduce((i,h)=>i+h.value,0)/3-c;return Math.abs(m)<5?"stable":m>0?"increasing":"decreasing"},Y=s=>{if(!s||s.length===0)return[];const y=Math.max(...s.map(c=>c.value))*.9;return s.filter(c=>c.value>=y).map(c=>new Date(c.time).toLocaleTimeString())},Z=s=>{if(!s||s.length===0)return 0;const y=s.reduce((c,o)=>c+o.value,0);return Math.round(y/(s.length*60)*100)},C={generateServiceTrend:K,generateUnitTrends:Q,analyzeTrend:X,getPeakTimes:Y,calculateUtilization:Z},I=[{id:"24h",label:"Last 24 Hours"},{id:"7d",label:"Last 7 Days"},{id:"30d",label:"Last 30 Days"}],ee=[{id:"chart",label:"Chart View",icon:"heroicons:chart-bar"},{id:"table",label:"Table View",icon:"heroicons:table-cells"}],te=({isOpen:s,onClose:y,data:c,units:o})=>{var $,R;const[m,i]=p.useState("24h"),[h,M]=p.useState("chart"),[j,A]=p.useState(null),[T,U]=p.useState(null),[w,D]=p.useState(null),[O,V]=p.useState("time");p.useEffect(()=>{var r,d;if(s&&((r=c==null?void 0:c.allTrends)==null?void 0:r.length)>0){const t=c.allTrends[0];D(t.trend);const a=o==null?void 0:o.find(n=>n.name===t.unitName);if(a){A(a);const n=(d=Object.entries(a.services).find(([b,x])=>{const g=k.find(f=>f.id===b);return(g==null?void 0:g.name)===t.serviceName}))==null?void 0:d[0];n&&U(n)}i("24h")}},[s,c,o]),p.useEffect(()=>{var r,d;if(j&&T){const t=k.find(a=>a.id===T);if(t){const a=(d=(r=c==null?void 0:c.allTrends)==null?void 0:r.find(n=>n.unitName===j.name&&n.serviceName===t.name))==null?void 0:d.trend;if(a)D(a);else{const n=C.generateServiceTrend(t.category,m);D(n)}}}},[j,T,m,c]),p.useMemo(()=>j?Object.entries(j.services).filter(([r,d])=>d).map(([r])=>{const d=k.find(t=>t.id===r);return{id:r,name:(d==null?void 0:d.name)||r,category:d==null?void 0:d.category}}):[],[j]);const N=p.useMemo(()=>{if(!w)return[];const r=[...w];switch(O){case"value":return r.sort((t,a)=>a.value-t.value);case"trend":const d=C.analyzeTrend(r);return d==="increasing"?r.sort((t,a)=>a.value-t.value):d==="decreasing"?r.sort((t,a)=>t.value-a.value):r;default:return r.sort((t,a)=>new Date(t.time)-new Date(a.time))}},[w,O]),l=p.useMemo(()=>{if(!(N!=null&&N.length))return null;const r=N.map(d=>d.value);return{min:Math.min(...r),max:Math.max(...r),avg:Math.round(r.reduce((d,t)=>d+t,0)/r.length),peak:N.reduce((d,t)=>t.value>d.value?t:d,N[0]),utilization:C.calculateUtilization(N),trend:C.analyzeTrend(N),peakTimes:C.getPeakTimes(N)}},[N]);return s?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black/30 transition-opacity"}),e.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-6xl bg-white dark:bg-gray-800 rounded-xl shadow-2xl transform transition-all",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{icon:"heroicons:chart-bar",className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Service Wait Time Trends"})]}),e.jsxs("button",{onClick:y,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(u,{icon:"heroicons:x-mark",className:"w-6 h-6"})]})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Unit"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:(j==null?void 0:j.id)||"",onChange:r=>{const d=o==null?void 0:o.find(t=>t.id.toString()===r.target.value);A(d),U(null)},className:"w-full pl-10 pr-4 py-2 text-sm font-medium rounded-md border bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors appearance-none",children:[e.jsx("option",{value:"",children:"Select a unit"}),o==null?void 0:o.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx(u,{icon:"heroicons:building-office-2",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"}),e.jsx(u,{icon:"heroicons:chevron-down",className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Service"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:T||"",onChange:r=>U(r.target.value),disabled:!j,className:`w-full pl-10 pr-4 py-2 text-sm font-medium rounded-md border transition-colors appearance-none ${j?"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"} border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500`,children:[e.jsx("option",{value:"",children:"Select a service"}),Object.entries(z).map(([r,d])=>e.jsx("optgroup",{label:d.name,children:d.services.map(t=>{const a=k.find(n=>n.id===t);return e.jsx("option",{value:t,children:(a==null?void 0:a.name)||t},t)})},r))]}),e.jsx(u,{icon:T?(($=k.find(r=>r.id===T))==null?void 0:$.category)==="imaging"?"heroicons:photo":((R=k.find(r=>r.id===T))==null?void 0:R.category)==="therapy"?"heroicons:heart":"heroicons:cog":"heroicons:squares-2x2",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"}),e.jsx(u,{icon:"heroicons:chevron-down",className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"})]})]})]}),j&&T&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("div",{className:"flex rounded-lg shadow-sm",children:I.map(r=>e.jsx("button",{onClick:()=>i(r.id),className:`px-4 py-2 text-sm font-medium ${m===r.id?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"} border border-gray-200 dark:border-gray-600 first:rounded-l-lg last:rounded-r-lg -ml-px first:ml-0 transition-colors`,children:r.label},r.id))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex rounded-lg shadow-sm",children:ee.map(r=>e.jsxs("button",{onClick:()=>M(r.id),className:`inline-flex items-center px-4 py-2 text-sm font-medium ${h===r.id?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"} border border-gray-200 dark:border-gray-600 first:rounded-l-lg last:rounded-r-lg -ml-px first:ml-0 transition-colors`,children:[e.jsx(u,{icon:r.icon,className:"w-5 h-5 mr-2"}),r.label]},r.id))}),e.jsxs("div",{className:"relative ml-4",children:[e.jsxs("select",{value:O,onChange:r=>V(r.target.value),className:"block pl-10 pr-4 py-2 text-sm font-medium rounded-md border bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors appearance-none",children:[e.jsx("option",{value:"time",children:"Sort by Time"}),e.jsx("option",{value:"value",children:"Sort by Wait Time"}),e.jsx("option",{value:"trend",children:"Sort by Trend"})]}),e.jsx(u,{icon:"heroicons:arrows-up-down",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"}),e.jsx(u,{icon:"heroicons:chevron-down",className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 dark:text-gray-400 pointer-events-none"})]})]})]})]})]}),j&&T&&w&&e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3 bg-white dark:bg-gray-900 rounded-lg shadow p-4",children:h==="chart"?e.jsx("div",{className:"h-[400px]",children:e.jsx(q,{data:N,series:[{dataKey:"value",name:"Wait Time",color:"#3B82F6"}],xAxis:{dataKey:"time"},yAxis:{domain:["auto","auto"],label:"Minutes"},referenceLines:[{y:60,color:"rgb(34, 197, 94)",strokeDasharray:"3 3",label:"Goal: 60 min"}]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Wait Time (min)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:N.map((r,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:new Date(r.time).toLocaleTimeString()}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-100",children:r.value}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.value>120?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":r.value>90?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":r.value>60?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:r.value>120?"Critical":r.value>90?"Warning":r.value>60?"Moderate":"Normal"})})]},d))})]})})}),e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Summary Statistics"}),e.jsxs("dl",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average Wait Time"}),e.jsxs("dd",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:[l==null?void 0:l.avg," min"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Min"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[l==null?void 0:l.min," min"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Max"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[l==null?void 0:l.max," min"]})]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Utilization Rate"}),e.jsxs("dd",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[l==null?void 0:l.utilization,"%"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Trend"}),e.jsxs("dd",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center",children:[e.jsx(u,{icon:(l==null?void 0:l.trend)==="increasing"?"heroicons:arrow-trending-up":(l==null?void 0:l.trend)==="decreasing"?"heroicons:arrow-trending-down":"heroicons:minus",className:`w-5 h-5 mr-1 ${(l==null?void 0:l.trend)==="increasing"?"text-red-500":(l==null?void 0:l.trend)==="decreasing"?"text-green-500":"text-gray-500"}`}),(l==null?void 0:l.trend.charAt(0).toUpperCase())+(l==null?void 0:l.trend.slice(1))]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Peak Times"}),e.jsx("div",{className:"space-y-2",children:l==null?void 0:l.peakTimes.map((r,d)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(u,{icon:"heroicons:clock",className:"w-4 h-4 mr-2 text-indigo-500"}),r]},d))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Service Thresholds"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Critical"}),e.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"> 120 min"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Warning"}),e.jsx("span",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"90-120 min"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Moderate"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"60-90 min"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Normal"}),e.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"< 60 min"})]})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date().toLocaleTimeString()]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:()=>{},children:[e.jsx(u,{icon:"heroicons:document-arrow-down",className:"w-5 h-5 mr-2"}),"Export Data"]}),e.jsx("button",{className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:y,children:"Done"})]})]})]})})]}):null},H=s=>s>120?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":s>90?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":s>60?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",E=()=>Math.random()>.5?"up":"down",W=()=>`${Math.floor(Math.random()*10)+1}%`,ve=()=>{const[s,y]=p.useState("table"),[c,o]=p.useState(null),[m,i]=p.useState(null),[h,M]=p.useState(!1),[j,A]=p.useState(!1),[T,U]=p.useState(null),[w,D]=p.useState(()=>L()),[O,V]=p.useState(new Date);p.useEffect(()=>{D(L());const t=setInterval(()=>{D(L()),V(new Date)},3e4);return()=>clearInterval(t)},[]);const l=(()=>{let t=0,a=0,n=0,b=0;const x={};if(!w||!Array.isArray(w))return{totalRequests:0,criticalDelays:0,resourceUtilization:0,crossDepartmentImpact:0};if(w.forEach(g=>{!g||!g.services||Object.entries(g.services||{}).forEach(([f,S])=>{if(S){t++;const B=k.find(P=>P.id===f);if(B){const P=B.category==="imaging"?120:90;S.value>P&&a++}x[f]||(x[f]=0),x[f]+=Math.floor(Math.random()*10)+1,b+=Math.floor(Math.random()*2)}})}),t>0){const g=Object.values(x).reduce((f,S)=>f+S,0);n=Math.min(g/t*5,100)}return{totalRequests:t,criticalDelays:a,resourceUtilization:Math.round(n),crossDepartmentImpact:b}})(),$=[{label:"Critical Delays",value:l.criticalDelays.toString(),trend:E(),delta:W(),icon:"heroicons:exclamation-triangle",color:"healthcare-critical",description:"Services over threshold"},{label:"Active Requests",value:l.totalRequests.toString(),trend:E(),delta:W(),icon:"heroicons:clipboard-document-list",color:"healthcare-info",description:"Current active service requests"},{label:"Resource Utilization",value:`${l.resourceUtilization}%`,trend:E(),delta:W(),icon:"heroicons:chart-pie",color:"healthcare-warning",description:"Average utilization across services"},{label:"Cross-Dept Impact",value:l.crossDepartmentImpact.toString(),trend:E(),delta:W(),icon:"heroicons:building-office-2",color:"healthcare-success",description:"Departments experiencing delays"}],R=t=>t!=null&&t.trend?e.jsx(q,{data:t.trend,series:[{dataKey:"value",name:"Wait Time",color:"#3B82F6"}],xAxis:{dataKey:"time"},yAxis:{domain:["auto","auto"]},height:200}):null,r=()=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(t=>e.jsxs(v,{className:"group hover:shadow-xl transition-all duration-300 cursor-pointer healthcare-card border border-gray-200 dark:border-gray-700",onClick:()=>o(t),children:[e.jsx(v.Header,{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(v.Title,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:t.name}),e.jsx(u,{icon:"heroicons:chevron-right",className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-transform group-hover:translate-x-1"})]})}),e.jsx(v.Content,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:Object.entries(z).map(([a,n])=>{const b=Object.entries(t.services).filter(([x,g])=>{var f;return g&&((f=k.find(S=>S.id===x))==null?void 0:f.category)===a});return b.length===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:n.name}),e.jsx("div",{className:"grid gap-2",children:b.map(([x,g])=>{const f=k.find(S=>S.id===x);return e.jsxs("div",{className:`flex items-center p-2.5 rounded-lg ${H(g.value)} transition-all duration-200 hover:scale-[1.02] cursor-pointer relative group/service`,onClick:S=>{S.stopPropagation(),i(m===x?null:x)},children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{icon:g.value>120?"heroicons:exclamation-circle":g.value>90?"heroicons:clock":"heroicons:check-circle",className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:(f==null?void 0:f.name)||x})]}),e.jsxs("div",{className:"ml-auto flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-semibold tabular-nums",children:g.value}),e.jsx("span",{className:"text-xs opacity-75",children:"min"})]}),e.jsxs("div",{className:"absolute invisible group-hover/service:visible opacity-0 group-hover/service:opacity-100 transition-all duration-200 z-10 bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded shadow-lg whitespace-nowrap",children:["Avg Time: ",f==null?void 0:f.avgTime]})]},x)})})]},a)})})})]},t.id))}),d=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 healthcare-card",children:[e.jsxs("thead",{className:"bg-gray-50 dark:bg-gray-800",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-100 w-32",children:"Unit"}),Object.entries(z).map(([t,a])=>e.jsx("th",{colSpan:a.services.length,className:"px-4 py-3 text-center text-sm font-semibold text-gray-900 dark:text-gray-100 border-l border-gray-200 dark:border-gray-700",children:a.name},t))]}),e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800"}),Object.values(z).flatMap(t=>t.services.map(a=>{const n=k.find(b=>b.id===a);return e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center cursor-pointer group",onClick:()=>i(m===a?null:a),children:[e.jsx(u,{icon:"heroicons:chevron-right",className:`w-4 h-4 mr-1 transition-transform ${m===a?"rotate-90":""}`}),(n==null?void 0:n.name)||a]})},a)}))]})]}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-900",children:w.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors",onClick:()=>o(t),children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-gray-100 whitespace-nowrap",children:t.name}),Object.values(z).flatMap(a=>a.services.map(n=>{const b=t.services[n],x=k.find(g=>g.id===n);return e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100 border-l border-gray-200 dark:border-gray-700",children:b?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{onClick:g=>{g.stopPropagation(),i(m===n?null:n)},className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 ${H(b.value)}`,children:[e.jsx("span",{children:b.value}),e.jsx("span",{className:"text-xs opacity-75",children:"min"})]}),m===n&&e.jsxs("div",{className:"absolute z-10 w-64 p-4 bg-healthcare-surface dark:bg-healthcare-surface-dark rounded-lg shadow-xl border mt-2",children:[e.jsx("h4",{className:"text-md font-semibold mb-2",children:x==null?void 0:x.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:x==null?void 0:x.description}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("strong",{children:"Current Wait:"})," ",b.value," min"]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("strong",{children:"Average Time:"})," ",x==null?void 0:x.avgTime]}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Criteria:"})," ",x==null?void 0:x.criteria.join(", ")]}),h&&e.jsx("div",{className:"mt-4",children:e.jsx(q,{data:C.generateServiceTrend(x.category),series:[{dataKey:"value",name:"Wait Time",color:"#3B82F6"}],xAxis:{dataKey:"time"},yAxis:{domain:["auto","auto"]},height:200})})]})]}):e.jsx("span",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"N/A"})},n)}))]},t.id))})]})});return e.jsxs(F,{title:"Ancillary Services",subtitle:"Monitor and track hospital support services",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:$.map((t,a)=>e.jsx(v,{children:e.jsx(v.Content,{children:e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`bg-${t.color} bg-opacity-10 dark:bg-opacity-20 p-2 rounded-lg group-hover:bg-opacity-20 dark:group-hover:bg-opacity-30 transition-colors duration-300`,children:e.jsx(u,{icon:t.icon,className:`w-6 h-6 text-${t.color} dark:text-${t.color}-dark`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark transition-colors duration-300",children:t.label}),e.jsx("div",{className:"text-xl font-bold text-healthcare-text-primary dark:text-healthcare-text-primary-dark transition-colors duration-300",children:t.value}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("div",{className:`flex items-center ${t.trend==="up"?"text-healthcare-success dark:text-healthcare-success-dark":"text-healthcare-critical dark:text-healthcare-critical-dark"} transition-colors duration-300`,children:[e.jsx(u,{icon:t.trend==="up"?"heroicons:arrow-up":"heroicons:arrow-down",className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:t.delta})]}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark transition-colors duration-300 mt-1",children:"vs. last hour"})]})]})})},a))}),e.jsxs(v,{className:"healthcare-card",children:[e.jsxs(v.Header,{className:"flex items-center justify-between",children:[e.jsx(v.Title,{children:"Service Details"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:`inline-flex items-center px-4 py-2 ${s==="table"?"healthcare-button-primary":"healthcare-button-secondary"} text-sm font-medium rounded-l-md`,onClick:()=>y("table"),children:[e.jsx(u,{icon:"heroicons:table",className:"w-5 h-5 mr-2"}),"Table View"]}),e.jsxs("button",{className:`inline-flex items-center px-4 py-2 ${s==="matrix"?"healthcare-button-primary":"healthcare-button-secondary"} text-sm font-medium rounded-r-md -ml-px`,onClick:()=>y("matrix"),children:[e.jsx(u,{icon:"heroicons:view-grid",className:"w-5 h-5 mr-2"}),"Matrix View"]}),e.jsxs("button",{className:"ml-2 inline-flex items-center px-4 py-2 healthcare-button healthcare-button-primary text-sm font-medium rounded-md",onClick:()=>{const t=[];w.forEach(a=>{Object.entries(a.services).forEach(([n,b])=>{if(b){const x=k.find(g=>g.id===n);if(x){const g=C.generateServiceTrend(x.category);t.push({unitName:a.name,serviceName:x.name,trend:g})}}})}),t.length>0&&U({trend:t[0].trend,title:"Service Wait Times",allTrends:t}),A(!0)},children:[e.jsx(u,{icon:"heroicons:chart-bar",className:"w-5 h-5 mr-2"}),"Show Trends"]})]})]}),e.jsx(v.Content,{children:s==="table"?d():r()})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:()=>o(null),children:e.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:e.jsxs("div",{className:"relative bg-healthcare-surface dark:bg-healthcare-surface-dark rounded-lg shadow-xl w-full max-w-6xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"px-6 py-4 border-b border-healthcare-border dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:[c.name," - Detailed View"]}),e.jsxs("button",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark hover:text-healthcare-text-primary dark:hover:text-healthcare-text-primary-dark transition-colors duration-200",onClick:()=>o(null),children:[e.jsx("span",{className:"sr-only",children:"Close"}),"Ã—"]})]}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries(c.services).filter(([t,a])=>a).map(([t,a])=>{const n=k.find(b=>b.id===t);return e.jsxs(v,{className:"healthcare-card",children:[e.jsx(v.Header,{children:e.jsx(v.Title,{children:n==null?void 0:n.name})}),e.jsxs(v.Content,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${H(a.value)}`,children:["Current Wait: ",a.value," min"]})}),e.jsx("p",{className:"text-sm mb-2",children:n==null?void 0:n.description}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("strong",{children:"Average Time:"})," ",n==null?void 0:n.avgTime]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("strong",{children:"Criteria:"})," ",n==null?void 0:n.criteria.join(", ")]}),h&&R(a)]})]},t)})})}),e.jsx("div",{className:"px-6 py-3 border-t border-healthcare-border dark:border-gray-700",children:e.jsxs("button",{className:"inline-flex items-center px-4 py-2 healthcare-button-primary text-sm font-medium rounded-md hover:bg-blue-700",onClick:()=>M(!h),children:[e.jsx(u,{icon:"heroicons:chart-bar",className:"w-5 h-5 mr-2"}),"Toggle Trends"]})})]})})}),e.jsx(te,{isOpen:j,onClose:()=>A(!1),data:T,units:w})]})};export{ve as default};
