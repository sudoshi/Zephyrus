import{R as C,r as s}from"./app-DNCPaP7U.js";const T=typeof document<"u"?C.useLayoutEffect:()=>{};function S(e){const n=s.useRef(null);return T(()=>{n.current=e},[e]),s.useCallback((...t)=>{const r=n.current;return r==null?void 0:r(...t)},[])}const v=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},c=e=>e&&"window"in e&&e.window===e?e:v(e).defaultView||window;function w(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function L(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function f(e){let n=null;return()=>(n==null&&(n=e()),n)}const x=f(function(){return L(/^Mac/i)}),A=f(function(){return L(/^iPhone/i)}),I=f(function(){return L(/^iPad/i)||x()&&navigator.maxTouchPoints>1}),N=f(function(){return A()||I()}),Y=f(function(){return w(/AppleWebKit/i)&&!K()}),K=f(function(){return w(/Chrome/i)}),M=f(function(){return w(/Android/i)}),q=f(function(){return w(/Firefox/i)});function B(e){return e.mozInputSource===0&&e.isTrusted?!0:M()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function J(e){return!M()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}class O{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function _(e){let n=s.useRef({isFocused:!1,observer:null});T(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=S(r=>{e==null||e(r)});return s.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let a=r.target,i=u=>{n.current.isFocused=!1,a.disabled&&t(new O("blur",u)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};a.addEventListener("focusout",i,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&a.disabled){var u;(u=n.current.observer)===null||u===void 0||u.disconnect();let $=a===document.activeElement?null:document.activeElement;a.dispatchEvent(new FocusEvent("blur",{relatedTarget:$})),a.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:$}))}}),n.current.observer.observe(a,{attributes:!0,attributeFilter:["disabled"]})}},[t])}function Q(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:a}=e;const i=s.useCallback(d=>{if(d.target===d.currentTarget)return r&&r(d),a&&a(!1),!0},[r,a]),u=_(i),$=s.useCallback(d=>{const D=v(d.target);d.target===d.currentTarget&&D.activeElement===d.target&&(t&&t(d),a&&a(!0),u(d))},[a,t,u]);return{focusProps:{onFocus:!n&&(t||a||r)?$:void 0,onBlur:!n&&(r||a)?i:void 0}}}let b=null,E=new Set,p=new Map,l=!1,h=!1;const j={Tab:!0,Escape:!0};function m(e,n){for(let t of E)t(e,n)}function R(e){return!(e.metaKey||!x()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function g(e){l=!0,R(e)&&(b="keyboard",m("keyboard",e))}function o(e){b="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(l=!0,m("pointer",e))}function k(e){B(e)&&(l=!0,b="virtual")}function P(e){e.target===window||e.target===document||(!l&&!h&&(b="virtual",m("virtual",e)),l=!1,h=!1)}function F(){l=!1,h=!0}function y(e){if(typeof window>"u"||p.get(c(e)))return;const n=c(e),t=v(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){l=!0,r.apply(this,arguments)},t.addEventListener("keydown",g,!0),t.addEventListener("keyup",g,!0),t.addEventListener("click",k,!0),n.addEventListener("focus",P,!0),n.addEventListener("blur",F,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",o,!0),t.addEventListener("pointermove",o,!0),t.addEventListener("pointerup",o,!0)):(t.addEventListener("mousedown",o,!0),t.addEventListener("mousemove",o,!0),t.addEventListener("mouseup",o,!0)),n.addEventListener("beforeunload",()=>{H(e)},{once:!0}),p.set(n,{focus:r})}const H=(e,n)=>{const t=c(e),r=v(e);n&&r.removeEventListener("DOMContentLoaded",n),p.has(t)&&(t.HTMLElement.prototype.focus=p.get(t).focus,r.removeEventListener("keydown",g,!0),r.removeEventListener("keyup",g,!0),r.removeEventListener("click",k,!0),t.removeEventListener("focus",P,!0),t.removeEventListener("blur",F,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",o,!0),r.removeEventListener("pointermove",o,!0),r.removeEventListener("pointerup",o,!0)):(r.removeEventListener("mousedown",o,!0),r.removeEventListener("mousemove",o,!0),r.removeEventListener("mouseup",o,!0)),p.delete(t))};function W(e){const n=v(e);let t;return n.readyState!=="loading"?y(e):(t=()=>{y(e)},n.addEventListener("DOMContentLoaded",t)),()=>H(e,t)}typeof document<"u"&&W();function U(){return b!=="pointer"}function X(){return b}function Z(e){b=e,m(e,null)}const V=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function z(e,n,t){var r;const a=typeof window<"u"?c(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?c(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,u=typeof window<"u"?c(t==null?void 0:t.target).HTMLElement:HTMLElement,$=typeof window<"u"?c(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||(t==null?void 0:t.target)instanceof a&&!V.has(t==null||(r=t.target)===null||r===void 0?void 0:r.type)||(t==null?void 0:t.target)instanceof i||(t==null?void 0:t.target)instanceof u&&(t==null?void 0:t.target.isContentEditable),!(e&&n==="keyboard"&&t instanceof $&&!j[t.key])}function ee(e,n,t){y(),s.useEffect(()=>{let r=(a,i)=>{z(!!(t!=null&&t.isTextInput),a,i)&&e(U())};return E.add(r),()=>{E.delete(r)}},n)}export{S as $,T as a,q as b,Y as c,x as d,I as e,N as f,v as g,J as h,B as i,c as j,X as k,Q as l,Z as m,_ as n,U as o,ee as p};
