import{l as On,R as Bl,r as D,d as Mn,j as n,P as C,L as Sx}from"./app-DNCPaP7U.js";import{D as Ax}from"./DashboardLayout-BfUOEmbm.js";import{M as ai,u as Dx,a as Rx,b as Px,R as Ex,B as Lx,C as Ix,c as Ox,H as ue,d as Fl}from"./PatientFlowDashboard-CrCqOlQJ.js";import{P as Mx}from"./ProcessIntelligenceModal-BOvIjIc6.js";import{P as Ue}from"./Panel-DEM8HheS.js";import{I as Vt}from"./iconify-CuDxMG-b.js";import{A as Bx}from"./AnalyticsContext-DCNkK6OB.js";import{u as li}from"./AuthenticatedLayout-bVzRFQ8r.js";import{D as Bn}from"./ToggleSwitch-wWvkbsAB.js";import"./uniqueId-S-XtUeLk.js";import{F as Fx}from"./filter-CKwhiPJ7.js";import{C as Wx}from"./HierarchicalFilters-D21C3-_q.js";import{C as $x}from"./chevron-down-h_OS1dfS.js";import{C as Fn}from"./calendar-CYnYG7qc.js";import{f as Wn}from"./format-D9ti-yNI.js";import{g as Wl}from"./chartTheme-DgA_-sjg.js";import{T as Ux}from"./TabNavigation-CocRP9X6.js";import{m as ni}from"./proxy-nweJ2GES.js";import"./useDarkMode-Cjnn_MHf.js";import"./TopNavigation-BPEMQkzy.js";import"./UserAvatar-DdRArJVQ.js";import"./DarkModeToggle-oH18ZJvw.js";import"./useFocusVisible-KZXt4Cm4.js";import"./portal-B_iHtz37.js";import"./transition-l3QoJGEh.js";import"./ErrorBoundary-ti8iig1M.js";import"./_baseAssignValue-CSgy8S_V.js";import"./find-CT4xMDYu.js";import"./minBy-Cw0Xx7RL.js";import"./index-BILkJVdl.js";import"./create-factory-CkrcLOT8.js";import"./x-DW-vgWTY.js";import"./createLucideIcon-Ce72M_cX.js";import"./refresh-cw-D_7-zI1F.js";import"./triangle-alert-LJX56qae.js";import"./circle-alert-aHEkhLu9.js";import"./circle-check-big-BCZ6Q16e.js";import"./users-C4ziYTDi.js";import"./trending-up-CsRcKsV0.js";import"./trending-down-C5tGC1Jc.js";import"./LineChart-BiJvPHt8.js";import"./clsx-B-dksMZM.js";import"./target-nI30E0SG.js";import"./BarChart-BfzQ1Suh.js";import"./AreaChart-CLiXbhtt.js";import"./Area-Cf-Jitxr.js";import"./activity-mHS_QB-I.js";import"./arrow-right-xdyR-px0.js";import"./chevron-right-BJBpZWeq.js";import"./create-visual-element-BEDpu-j8.js";var Gr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Hx=Gr.exports,$l;function qx(){return $l||($l=1,function(u,pe){(function(){var c,R="4.17.21",L=200,Te="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",A="Expected a function",le="Invalid `variable` option passed into `_.template`",z="__lodash_hash_undefined__",Z=500,ne="__lodash_placeholder__",ee=1,he=2,ge=4,Ce=1,He=2,ce=1,Se=2,G=4,we=8,U=16,J=32,se=64,oe=128,ke=256,xt=512,w=30,Pe="...",Fe=800,N=16,T=1,te=2,ie=3,Y=1/0,de=9007199254740991,It=17976931348623157e292,Ee=NaN,g=4294967295,P=g-1,fe=g>>>1,pt=[["ary",oe],["bind",ce],["bindKey",Se],["curry",we],["curryRight",U],["flip",xt],["partial",J],["partialRight",se],["rearg",ke]],Ae="[object Arguments]",at="[object Array]",Kt="[object AsyncFunction]",Le="[object Boolean]",Ye="[object Date]",tt="[object DOMException]",lt="[object Error]",Rt="[object Function]",mr="[object GeneratorFunction]",Ve="[object Map]",Ot="[object Number]",Dr="[object Null]",We="[object Object]",h="[object Promise]",_="[object Proxy]",B="[object RegExp]",I="[object Set]",me="[object String]",Ie="[object Symbol]",be="[object Undefined]",gt="[object WeakMap]",Tt="[object WeakSet]",Ze="[object ArrayBuffer]",qe="[object DataView]",Xt="[object Float32Array]",Oe="[object Float64Array]",Mt="[object Int8Array]",ct="[object Int16Array]",xr="[object Int32Array]",$n="[object Uint8Array]",Un="[object Uint8ClampedArray]",Hn="[object Uint16Array]",qn="[object Uint32Array]",Vl=/\b__p \+= '';/g,Kl=/\b(__p \+=) '' \+/g,Xl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oi=/&(?:amp|lt|gt|quot|#39);/g,di=/[&<>"']/g,Yl=RegExp(oi.source),Zl=RegExp(di.source),Jl=/<%-([\s\S]+?)%>/g,Ql=/<%([\s\S]+?)%>/g,ui=/<%=([\s\S]+?)%>/g,ec=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tc=/^\w*$/,rc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zn=/[\\^$.*+?()[\]{}|]/g,nc=RegExp(zn.source),Gn=/^\s+/,sc=/\s/,ic=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ac=/\{\n\/\* \[wrapped with (.+)\] \*/,lc=/,? & /,cc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oc=/[()=,{}\[\]\/\s]/,dc=/\\(\\)?/g,uc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hi=/\w*$/,hc=/^[-+]0x[0-9a-f]+$/i,fc=/^0b[01]+$/i,mc=/^\[object .+?Constructor\]$/,xc=/^0o[0-7]+$/i,pc=/^(?:0|[1-9]\d*)$/,gc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vr=/($^)/,vc=/['\n\r\u2028\u2029\\]/g,Kr="\\ud800-\\udfff",yc="\\u0300-\\u036f",bc="\\ufe20-\\ufe2f",_c="\\u20d0-\\u20ff",fi=yc+bc+_c,mi="\\u2700-\\u27bf",xi="a-z\\xdf-\\xf6\\xf8-\\xff",wc="\\xac\\xb1\\xd7\\xf7",kc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nc="\\u2000-\\u206f",jc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pi="A-Z\\xc0-\\xd6\\xd8-\\xde",gi="\\ufe0e\\ufe0f",vi=wc+kc+Nc+jc,Vn="['’]",Tc="["+Kr+"]",yi="["+vi+"]",Xr="["+fi+"]",bi="\\d+",Cc="["+mi+"]",_i="["+xi+"]",wi="[^"+Kr+vi+bi+mi+xi+pi+"]",Kn="\\ud83c[\\udffb-\\udfff]",Sc="(?:"+Xr+"|"+Kn+")",ki="[^"+Kr+"]",Xn="(?:\\ud83c[\\udde6-\\uddff]){2}",Yn="[\\ud800-\\udbff][\\udc00-\\udfff]",pr="["+pi+"]",Ni="\\u200d",ji="(?:"+_i+"|"+wi+")",Ac="(?:"+pr+"|"+wi+")",Ti="(?:"+Vn+"(?:d|ll|m|re|s|t|ve))?",Ci="(?:"+Vn+"(?:D|LL|M|RE|S|T|VE))?",Si=Sc+"?",Ai="["+gi+"]?",Dc="(?:"+Ni+"(?:"+[ki,Xn,Yn].join("|")+")"+Ai+Si+")*",Rc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Di=Ai+Si+Dc,Ec="(?:"+[Cc,Xn,Yn].join("|")+")"+Di,Lc="(?:"+[ki+Xr+"?",Xr,Xn,Yn,Tc].join("|")+")",Ic=RegExp(Vn,"g"),Oc=RegExp(Xr,"g"),Zn=RegExp(Kn+"(?="+Kn+")|"+Lc+Di,"g"),Mc=RegExp([pr+"?"+_i+"+"+Ti+"(?="+[yi,pr,"$"].join("|")+")",Ac+"+"+Ci+"(?="+[yi,pr+ji,"$"].join("|")+")",pr+"?"+ji+"+"+Ti,pr+"+"+Ci,Pc,Rc,bi,Ec].join("|"),"g"),Bc=RegExp("["+Ni+Kr+fi+gi+"]"),Fc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$c=-1,ye={};ye[Xt]=ye[Oe]=ye[Mt]=ye[ct]=ye[xr]=ye[$n]=ye[Un]=ye[Hn]=ye[qn]=!0,ye[Ae]=ye[at]=ye[Ze]=ye[Le]=ye[qe]=ye[Ye]=ye[lt]=ye[Rt]=ye[Ve]=ye[Ot]=ye[We]=ye[B]=ye[I]=ye[me]=ye[gt]=!1;var ve={};ve[Ae]=ve[at]=ve[Ze]=ve[qe]=ve[Le]=ve[Ye]=ve[Xt]=ve[Oe]=ve[Mt]=ve[ct]=ve[xr]=ve[Ve]=ve[Ot]=ve[We]=ve[B]=ve[I]=ve[me]=ve[Ie]=ve[$n]=ve[Un]=ve[Hn]=ve[qn]=!0,ve[lt]=ve[Rt]=ve[gt]=!1;var Uc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Hc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gc=parseFloat,Vc=parseInt,Ri=typeof On=="object"&&On&&On.Object===Object&&On,Kc=typeof self=="object"&&self&&self.Object===Object&&self,ze=Ri||Kc||Function("return this")(),Jn=pe&&!pe.nodeType&&pe,ir=Jn&&!0&&u&&!u.nodeType&&u,Pi=ir&&ir.exports===Jn,Qn=Pi&&Ri.process,vt=function(){try{var f=ir&&ir.require&&ir.require("util").types;return f||Qn&&Qn.binding&&Qn.binding("util")}catch{}}(),Ei=vt&&vt.isArrayBuffer,Li=vt&&vt.isDate,Ii=vt&&vt.isMap,Oi=vt&&vt.isRegExp,Mi=vt&&vt.isSet,Bi=vt&&vt.isTypedArray;function ot(f,p,x){switch(x.length){case 0:return f.call(p);case 1:return f.call(p,x[0]);case 2:return f.call(p,x[0],x[1]);case 3:return f.call(p,x[0],x[1],x[2])}return f.apply(p,x)}function Xc(f,p,x,j){for(var F=-1,Q=f==null?0:f.length;++F<Q;){var Me=f[F];p(j,Me,x(Me),f)}return j}function yt(f,p){for(var x=-1,j=f==null?0:f.length;++x<j&&p(f[x],x,f)!==!1;);return f}function Yc(f,p){for(var x=f==null?0:f.length;x--&&p(f[x],x,f)!==!1;);return f}function Fi(f,p){for(var x=-1,j=f==null?0:f.length;++x<j;)if(!p(f[x],x,f))return!1;return!0}function Yt(f,p){for(var x=-1,j=f==null?0:f.length,F=0,Q=[];++x<j;){var Me=f[x];p(Me,x,f)&&(Q[F++]=Me)}return Q}function Yr(f,p){var x=f==null?0:f.length;return!!x&&gr(f,p,0)>-1}function es(f,p,x){for(var j=-1,F=f==null?0:f.length;++j<F;)if(x(p,f[j]))return!0;return!1}function _e(f,p){for(var x=-1,j=f==null?0:f.length,F=Array(j);++x<j;)F[x]=p(f[x],x,f);return F}function Zt(f,p){for(var x=-1,j=p.length,F=f.length;++x<j;)f[F+x]=p[x];return f}function ts(f,p,x,j){var F=-1,Q=f==null?0:f.length;for(j&&Q&&(x=f[++F]);++F<Q;)x=p(x,f[F],F,f);return x}function Zc(f,p,x,j){var F=f==null?0:f.length;for(j&&F&&(x=f[--F]);F--;)x=p(x,f[F],F,f);return x}function rs(f,p){for(var x=-1,j=f==null?0:f.length;++x<j;)if(p(f[x],x,f))return!0;return!1}var Jc=ns("length");function Qc(f){return f.split("")}function eo(f){return f.match(cc)||[]}function Wi(f,p,x){var j;return x(f,function(F,Q,Me){if(p(F,Q,Me))return j=Q,!1}),j}function Zr(f,p,x,j){for(var F=f.length,Q=x+(j?1:-1);j?Q--:++Q<F;)if(p(f[Q],Q,f))return Q;return-1}function gr(f,p,x){return p===p?fo(f,p,x):Zr(f,$i,x)}function to(f,p,x,j){for(var F=x-1,Q=f.length;++F<Q;)if(j(f[F],p))return F;return-1}function $i(f){return f!==f}function Ui(f,p){var x=f==null?0:f.length;return x?is(f,p)/x:Ee}function ns(f){return function(p){return p==null?c:p[f]}}function ss(f){return function(p){return f==null?c:f[p]}}function Hi(f,p,x,j,F){return F(f,function(Q,Me,xe){x=j?(j=!1,Q):p(x,Q,Me,xe)}),x}function ro(f,p){var x=f.length;for(f.sort(p);x--;)f[x]=f[x].value;return f}function is(f,p){for(var x,j=-1,F=f.length;++j<F;){var Q=p(f[j]);Q!==c&&(x=x===c?Q:x+Q)}return x}function as(f,p){for(var x=-1,j=Array(f);++x<f;)j[x]=p(x);return j}function no(f,p){return _e(p,function(x){return[x,f[x]]})}function qi(f){return f&&f.slice(0,Ki(f)+1).replace(Gn,"")}function dt(f){return function(p){return f(p)}}function ls(f,p){return _e(p,function(x){return f[x]})}function Rr(f,p){return f.has(p)}function zi(f,p){for(var x=-1,j=f.length;++x<j&&gr(p,f[x],0)>-1;);return x}function Gi(f,p){for(var x=f.length;x--&&gr(p,f[x],0)>-1;);return x}function so(f,p){for(var x=f.length,j=0;x--;)f[x]===p&&++j;return j}var io=ss(Uc),ao=ss(Hc);function lo(f){return"\\"+zc[f]}function co(f,p){return f==null?c:f[p]}function vr(f){return Bc.test(f)}function oo(f){return Fc.test(f)}function uo(f){for(var p,x=[];!(p=f.next()).done;)x.push(p.value);return x}function cs(f){var p=-1,x=Array(f.size);return f.forEach(function(j,F){x[++p]=[F,j]}),x}function Vi(f,p){return function(x){return f(p(x))}}function Jt(f,p){for(var x=-1,j=f.length,F=0,Q=[];++x<j;){var Me=f[x];(Me===p||Me===ne)&&(f[x]=ne,Q[F++]=x)}return Q}function Jr(f){var p=-1,x=Array(f.size);return f.forEach(function(j){x[++p]=j}),x}function ho(f){var p=-1,x=Array(f.size);return f.forEach(function(j){x[++p]=[j,j]}),x}function fo(f,p,x){for(var j=x-1,F=f.length;++j<F;)if(f[j]===p)return j;return-1}function mo(f,p,x){for(var j=x+1;j--;)if(f[j]===p)return j;return j}function yr(f){return vr(f)?po(f):Jc(f)}function Ct(f){return vr(f)?go(f):Qc(f)}function Ki(f){for(var p=f.length;p--&&sc.test(f.charAt(p)););return p}var xo=ss(qc);function po(f){for(var p=Zn.lastIndex=0;Zn.test(f);)++p;return p}function go(f){return f.match(Zn)||[]}function vo(f){return f.match(Mc)||[]}var yo=function f(p){p=p==null?ze:br.defaults(ze.Object(),p,br.pick(ze,Wc));var x=p.Array,j=p.Date,F=p.Error,Q=p.Function,Me=p.Math,xe=p.Object,os=p.RegExp,bo=p.String,bt=p.TypeError,Qr=x.prototype,_o=Q.prototype,_r=xe.prototype,en=p["__core-js_shared__"],tn=_o.toString,ae=_r.hasOwnProperty,wo=0,Xi=function(){var e=/[^.]+$/.exec(en&&en.keys&&en.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),rn=_r.toString,ko=tn.call(xe),No=ze._,jo=os("^"+tn.call(ae).replace(zn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nn=Pi?p.Buffer:c,Qt=p.Symbol,sn=p.Uint8Array,Yi=nn?nn.allocUnsafe:c,an=Vi(xe.getPrototypeOf,xe),Zi=xe.create,Ji=_r.propertyIsEnumerable,ln=Qr.splice,Qi=Qt?Qt.isConcatSpreadable:c,Pr=Qt?Qt.iterator:c,ar=Qt?Qt.toStringTag:c,cn=function(){try{var e=ur(xe,"defineProperty");return e({},"",{}),e}catch{}}(),To=p.clearTimeout!==ze.clearTimeout&&p.clearTimeout,Co=j&&j.now!==ze.Date.now&&j.now,So=p.setTimeout!==ze.setTimeout&&p.setTimeout,on=Me.ceil,dn=Me.floor,ds=xe.getOwnPropertySymbols,Ao=nn?nn.isBuffer:c,ea=p.isFinite,Do=Qr.join,Ro=Vi(xe.keys,xe),Be=Me.max,Ke=Me.min,Po=j.now,Eo=p.parseInt,ta=Me.random,Lo=Qr.reverse,us=ur(p,"DataView"),Er=ur(p,"Map"),hs=ur(p,"Promise"),wr=ur(p,"Set"),Lr=ur(p,"WeakMap"),Ir=ur(xe,"create"),un=Lr&&new Lr,kr={},Io=hr(us),Oo=hr(Er),Mo=hr(hs),Bo=hr(wr),Fo=hr(Lr),hn=Qt?Qt.prototype:c,Or=hn?hn.valueOf:c,ra=hn?hn.toString:c;function a(e){if(je(e)&&!W(e)&&!(e instanceof K)){if(e instanceof _t)return e;if(ae.call(e,"__wrapped__"))return nl(e)}return new _t(e)}var Nr=function(){function e(){}return function(t){if(!Ne(t))return{};if(Zi)return Zi(t);e.prototype=t;var r=new e;return e.prototype=c,r}}();function fn(){}function _t(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=c}a.templateSettings={escape:Jl,evaluate:Ql,interpolate:ui,variable:"",imports:{_:a}},a.prototype=fn.prototype,a.prototype.constructor=a,_t.prototype=Nr(fn.prototype),_t.prototype.constructor=_t;function K(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Wo(){var e=new K(this.__wrapped__);return e.__actions__=rt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rt(this.__views__),e}function $o(){if(this.__filtered__){var e=new K(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Uo(){var e=this.__wrapped__.value(),t=this.__dir__,r=W(e),s=t<0,i=r?e.length:0,l=eu(0,i,this.__views__),o=l.start,d=l.end,m=d-o,v=s?d:o-1,y=this.__iteratees__,b=y.length,k=0,S=Ke(m,this.__takeCount__);if(!r||!s&&i==m&&S==m)return Ta(e,this.__actions__);var O=[];e:for(;m--&&k<S;){v+=t;for(var H=-1,M=e[v];++H<b;){var V=y[H],X=V.iteratee,ft=V.type,et=X(M);if(ft==te)M=et;else if(!et){if(ft==T)continue e;break e}}O[k++]=M}return O}K.prototype=Nr(fn.prototype),K.prototype.constructor=K;function lr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function Ho(){this.__data__=Ir?Ir(null):{},this.size=0}function qo(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function zo(e){var t=this.__data__;if(Ir){var r=t[e];return r===z?c:r}return ae.call(t,e)?t[e]:c}function Go(e){var t=this.__data__;return Ir?t[e]!==c:ae.call(t,e)}function Vo(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ir&&t===c?z:t,this}lr.prototype.clear=Ho,lr.prototype.delete=qo,lr.prototype.get=zo,lr.prototype.has=Go,lr.prototype.set=Vo;function Bt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function Ko(){this.__data__=[],this.size=0}function Xo(e){var t=this.__data__,r=mn(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():ln.call(t,r,1),--this.size,!0}function Yo(e){var t=this.__data__,r=mn(t,e);return r<0?c:t[r][1]}function Zo(e){return mn(this.__data__,e)>-1}function Jo(e,t){var r=this.__data__,s=mn(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}Bt.prototype.clear=Ko,Bt.prototype.delete=Xo,Bt.prototype.get=Yo,Bt.prototype.has=Zo,Bt.prototype.set=Jo;function Ft(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function Qo(){this.size=0,this.__data__={hash:new lr,map:new(Er||Bt),string:new lr}}function ed(e){var t=Tn(this,e).delete(e);return this.size-=t?1:0,t}function td(e){return Tn(this,e).get(e)}function rd(e){return Tn(this,e).has(e)}function nd(e,t){var r=Tn(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}Ft.prototype.clear=Qo,Ft.prototype.delete=ed,Ft.prototype.get=td,Ft.prototype.has=rd,Ft.prototype.set=nd;function cr(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Ft;++t<r;)this.add(e[t])}function sd(e){return this.__data__.set(e,z),this}function id(e){return this.__data__.has(e)}cr.prototype.add=cr.prototype.push=sd,cr.prototype.has=id;function St(e){var t=this.__data__=new Bt(e);this.size=t.size}function ad(){this.__data__=new Bt,this.size=0}function ld(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function cd(e){return this.__data__.get(e)}function od(e){return this.__data__.has(e)}function dd(e,t){var r=this.__data__;if(r instanceof Bt){var s=r.__data__;if(!Er||s.length<L-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ft(s)}return r.set(e,t),this.size=r.size,this}St.prototype.clear=ad,St.prototype.delete=ld,St.prototype.get=cd,St.prototype.has=od,St.prototype.set=dd;function na(e,t){var r=W(e),s=!r&&fr(e),i=!r&&!s&&sr(e),l=!r&&!s&&!i&&Sr(e),o=r||s||i||l,d=o?as(e.length,bo):[],m=d.length;for(var v in e)(t||ae.call(e,v))&&!(o&&(v=="length"||i&&(v=="offset"||v=="parent")||l&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||Ht(v,m)))&&d.push(v);return d}function sa(e){var t=e.length;return t?e[ks(0,t-1)]:c}function ud(e,t){return Cn(rt(e),or(t,0,e.length))}function hd(e){return Cn(rt(e))}function fs(e,t,r){(r!==c&&!At(e[t],r)||r===c&&!(t in e))&&Wt(e,t,r)}function Mr(e,t,r){var s=e[t];(!(ae.call(e,t)&&At(s,r))||r===c&&!(t in e))&&Wt(e,t,r)}function mn(e,t){for(var r=e.length;r--;)if(At(e[r][0],t))return r;return-1}function fd(e,t,r,s){return er(e,function(i,l,o){t(s,i,r(i),o)}),s}function ia(e,t){return e&&Et(t,$e(t),e)}function md(e,t){return e&&Et(t,st(t),e)}function Wt(e,t,r){t=="__proto__"&&cn?cn(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ms(e,t){for(var r=-1,s=t.length,i=x(s),l=e==null;++r<s;)i[r]=l?c:Ks(e,t[r]);return i}function or(e,t,r){return e===e&&(r!==c&&(e=e<=r?e:r),t!==c&&(e=e>=t?e:t)),e}function wt(e,t,r,s,i,l){var o,d=t&ee,m=t&he,v=t&ge;if(r&&(o=i?r(e,s,i,l):r(e)),o!==c)return o;if(!Ne(e))return e;var y=W(e);if(y){if(o=ru(e),!d)return rt(e,o)}else{var b=Xe(e),k=b==Rt||b==mr;if(sr(e))return Aa(e,d);if(b==We||b==Ae||k&&!i){if(o=m||k?{}:Ka(e),!d)return m?zd(e,md(o,e)):qd(e,ia(o,e))}else{if(!ve[b])return i?e:{};o=nu(e,b,d)}}l||(l=new St);var S=l.get(e);if(S)return S;l.set(e,o),kl(e)?e.forEach(function(M){o.add(wt(M,t,r,M,e,l))}):_l(e)&&e.forEach(function(M,V){o.set(V,wt(M,t,r,V,e,l))});var O=v?m?Ls:Es:m?st:$e,H=y?c:O(e);return yt(H||e,function(M,V){H&&(V=M,M=e[V]),Mr(o,V,wt(M,t,r,V,e,l))}),o}function xd(e){var t=$e(e);return function(r){return aa(r,e,t)}}function aa(e,t,r){var s=r.length;if(e==null)return!s;for(e=xe(e);s--;){var i=r[s],l=t[i],o=e[i];if(o===c&&!(i in e)||!l(o))return!1}return!0}function la(e,t,r){if(typeof e!="function")throw new bt(A);return qr(function(){e.apply(c,r)},t)}function Br(e,t,r,s){var i=-1,l=Yr,o=!0,d=e.length,m=[],v=t.length;if(!d)return m;r&&(t=_e(t,dt(r))),s?(l=es,o=!1):t.length>=L&&(l=Rr,o=!1,t=new cr(t));e:for(;++i<d;){var y=e[i],b=r==null?y:r(y);if(y=s||y!==0?y:0,o&&b===b){for(var k=v;k--;)if(t[k]===b)continue e;m.push(y)}else l(t,b,s)||m.push(y)}return m}var er=La(Pt),ca=La(ps,!0);function pd(e,t){var r=!0;return er(e,function(s,i,l){return r=!!t(s,i,l),r}),r}function xn(e,t,r){for(var s=-1,i=e.length;++s<i;){var l=e[s],o=t(l);if(o!=null&&(d===c?o===o&&!ht(o):r(o,d)))var d=o,m=l}return m}function gd(e,t,r,s){var i=e.length;for(r=$(r),r<0&&(r=-r>i?0:i+r),s=s===c||s>i?i:$(s),s<0&&(s+=i),s=r>s?0:jl(s);r<s;)e[r++]=t;return e}function oa(e,t){var r=[];return er(e,function(s,i,l){t(s,i,l)&&r.push(s)}),r}function Ge(e,t,r,s,i){var l=-1,o=e.length;for(r||(r=iu),i||(i=[]);++l<o;){var d=e[l];t>0&&r(d)?t>1?Ge(d,t-1,r,s,i):Zt(i,d):s||(i[i.length]=d)}return i}var xs=Ia(),da=Ia(!0);function Pt(e,t){return e&&xs(e,t,$e)}function ps(e,t){return e&&da(e,t,$e)}function pn(e,t){return Yt(t,function(r){return qt(e[r])})}function dr(e,t){t=rr(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[Lt(t[r++])];return r&&r==s?e:c}function ua(e,t,r){var s=t(e);return W(e)?s:Zt(s,r(e))}function Je(e){return e==null?e===c?be:Dr:ar&&ar in xe(e)?Qd(e):hu(e)}function gs(e,t){return e>t}function vd(e,t){return e!=null&&ae.call(e,t)}function yd(e,t){return e!=null&&t in xe(e)}function bd(e,t,r){return e>=Ke(t,r)&&e<Be(t,r)}function vs(e,t,r){for(var s=r?es:Yr,i=e[0].length,l=e.length,o=l,d=x(l),m=1/0,v=[];o--;){var y=e[o];o&&t&&(y=_e(y,dt(t))),m=Ke(y.length,m),d[o]=!r&&(t||i>=120&&y.length>=120)?new cr(o&&y):c}y=e[0];var b=-1,k=d[0];e:for(;++b<i&&v.length<m;){var S=y[b],O=t?t(S):S;if(S=r||S!==0?S:0,!(k?Rr(k,O):s(v,O,r))){for(o=l;--o;){var H=d[o];if(!(H?Rr(H,O):s(e[o],O,r)))continue e}k&&k.push(O),v.push(S)}}return v}function _d(e,t,r,s){return Pt(e,function(i,l,o){t(s,r(i),l,o)}),s}function Fr(e,t,r){t=rr(t,e),e=Ja(e,t);var s=e==null?e:e[Lt(Nt(t))];return s==null?c:ot(s,e,r)}function ha(e){return je(e)&&Je(e)==Ae}function wd(e){return je(e)&&Je(e)==Ze}function kd(e){return je(e)&&Je(e)==Ye}function Wr(e,t,r,s,i){return e===t?!0:e==null||t==null||!je(e)&&!je(t)?e!==e&&t!==t:Nd(e,t,r,s,Wr,i)}function Nd(e,t,r,s,i,l){var o=W(e),d=W(t),m=o?at:Xe(e),v=d?at:Xe(t);m=m==Ae?We:m,v=v==Ae?We:v;var y=m==We,b=v==We,k=m==v;if(k&&sr(e)){if(!sr(t))return!1;o=!0,y=!1}if(k&&!y)return l||(l=new St),o||Sr(e)?za(e,t,r,s,i,l):Zd(e,t,m,r,s,i,l);if(!(r&Ce)){var S=y&&ae.call(e,"__wrapped__"),O=b&&ae.call(t,"__wrapped__");if(S||O){var H=S?e.value():e,M=O?t.value():t;return l||(l=new St),i(H,M,r,s,l)}}return k?(l||(l=new St),Jd(e,t,r,s,i,l)):!1}function jd(e){return je(e)&&Xe(e)==Ve}function ys(e,t,r,s){var i=r.length,l=i,o=!s;if(e==null)return!l;for(e=xe(e);i--;){var d=r[i];if(o&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++i<l;){d=r[i];var m=d[0],v=e[m],y=d[1];if(o&&d[2]){if(v===c&&!(m in e))return!1}else{var b=new St;if(s)var k=s(v,y,m,e,t,b);if(!(k===c?Wr(y,v,Ce|He,s,b):k))return!1}}return!0}function fa(e){if(!Ne(e)||lu(e))return!1;var t=qt(e)?jo:mc;return t.test(hr(e))}function Td(e){return je(e)&&Je(e)==B}function Cd(e){return je(e)&&Xe(e)==I}function Sd(e){return je(e)&&En(e.length)&&!!ye[Je(e)]}function ma(e){return typeof e=="function"?e:e==null?it:typeof e=="object"?W(e)?ga(e[0],e[1]):pa(e):Ol(e)}function bs(e){if(!Hr(e))return Ro(e);var t=[];for(var r in xe(e))ae.call(e,r)&&r!="constructor"&&t.push(r);return t}function Ad(e){if(!Ne(e))return uu(e);var t=Hr(e),r=[];for(var s in e)s=="constructor"&&(t||!ae.call(e,s))||r.push(s);return r}function _s(e,t){return e<t}function xa(e,t){var r=-1,s=nt(e)?x(e.length):[];return er(e,function(i,l,o){s[++r]=t(i,l,o)}),s}function pa(e){var t=Os(e);return t.length==1&&t[0][2]?Ya(t[0][0],t[0][1]):function(r){return r===e||ys(r,e,t)}}function ga(e,t){return Bs(e)&&Xa(t)?Ya(Lt(e),t):function(r){var s=Ks(r,e);return s===c&&s===t?Xs(r,e):Wr(t,s,Ce|He)}}function gn(e,t,r,s,i){e!==t&&xs(t,function(l,o){if(i||(i=new St),Ne(l))Dd(e,t,o,r,gn,s,i);else{var d=s?s(Ws(e,o),l,o+"",e,t,i):c;d===c&&(d=l),fs(e,o,d)}},st)}function Dd(e,t,r,s,i,l,o){var d=Ws(e,r),m=Ws(t,r),v=o.get(m);if(v){fs(e,r,v);return}var y=l?l(d,m,r+"",e,t,o):c,b=y===c;if(b){var k=W(m),S=!k&&sr(m),O=!k&&!S&&Sr(m);y=m,k||S||O?W(d)?y=d:De(d)?y=rt(d):S?(b=!1,y=Aa(m,!0)):O?(b=!1,y=Da(m,!0)):y=[]:zr(m)||fr(m)?(y=d,fr(d)?y=Tl(d):(!Ne(d)||qt(d))&&(y=Ka(m))):b=!1}b&&(o.set(m,y),i(y,m,s,l,o),o.delete(m)),fs(e,r,y)}function va(e,t){var r=e.length;if(r)return t+=t<0?r:0,Ht(t,r)?e[t]:c}function ya(e,t,r){t.length?t=_e(t,function(l){return W(l)?function(o){return dr(o,l.length===1?l[0]:l)}:l}):t=[it];var s=-1;t=_e(t,dt(E()));var i=xa(e,function(l,o,d){var m=_e(t,function(v){return v(l)});return{criteria:m,index:++s,value:l}});return ro(i,function(l,o){return Hd(l,o,r)})}function Rd(e,t){return ba(e,t,function(r,s){return Xs(e,s)})}function ba(e,t,r){for(var s=-1,i=t.length,l={};++s<i;){var o=t[s],d=dr(e,o);r(d,o)&&$r(l,rr(o,e),d)}return l}function Pd(e){return function(t){return dr(t,e)}}function ws(e,t,r,s){var i=s?to:gr,l=-1,o=t.length,d=e;for(e===t&&(t=rt(t)),r&&(d=_e(e,dt(r)));++l<o;)for(var m=0,v=t[l],y=r?r(v):v;(m=i(d,y,m,s))>-1;)d!==e&&ln.call(d,m,1),ln.call(e,m,1);return e}function _a(e,t){for(var r=e?t.length:0,s=r-1;r--;){var i=t[r];if(r==s||i!==l){var l=i;Ht(i)?ln.call(e,i,1):Ts(e,i)}}return e}function ks(e,t){return e+dn(ta()*(t-e+1))}function Ed(e,t,r,s){for(var i=-1,l=Be(on((t-e)/(r||1)),0),o=x(l);l--;)o[s?l:++i]=e,e+=r;return o}function Ns(e,t){var r="";if(!e||t<1||t>de)return r;do t%2&&(r+=e),t=dn(t/2),t&&(e+=e);while(t);return r}function q(e,t){return $s(Za(e,t,it),e+"")}function Ld(e){return sa(Ar(e))}function Id(e,t){var r=Ar(e);return Cn(r,or(t,0,r.length))}function $r(e,t,r,s){if(!Ne(e))return e;t=rr(t,e);for(var i=-1,l=t.length,o=l-1,d=e;d!=null&&++i<l;){var m=Lt(t[i]),v=r;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(i!=o){var y=d[m];v=s?s(y,m,d):c,v===c&&(v=Ne(y)?y:Ht(t[i+1])?[]:{})}Mr(d,m,v),d=d[m]}return e}var wa=un?function(e,t){return un.set(e,t),e}:it,Od=cn?function(e,t){return cn(e,"toString",{configurable:!0,enumerable:!1,value:Zs(t),writable:!0})}:it;function Md(e){return Cn(Ar(e))}function kt(e,t,r){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var l=x(i);++s<i;)l[s]=e[s+t];return l}function Bd(e,t){var r;return er(e,function(s,i,l){return r=t(s,i,l),!r}),!!r}function vn(e,t,r){var s=0,i=e==null?s:e.length;if(typeof t=="number"&&t===t&&i<=fe){for(;s<i;){var l=s+i>>>1,o=e[l];o!==null&&!ht(o)&&(r?o<=t:o<t)?s=l+1:i=l}return i}return js(e,t,it,r)}function js(e,t,r,s){var i=0,l=e==null?0:e.length;if(l===0)return 0;t=r(t);for(var o=t!==t,d=t===null,m=ht(t),v=t===c;i<l;){var y=dn((i+l)/2),b=r(e[y]),k=b!==c,S=b===null,O=b===b,H=ht(b);if(o)var M=s||O;else v?M=O&&(s||k):d?M=O&&k&&(s||!S):m?M=O&&k&&!S&&(s||!H):S||H?M=!1:M=s?b<=t:b<t;M?i=y+1:l=y}return Ke(l,P)}function ka(e,t){for(var r=-1,s=e.length,i=0,l=[];++r<s;){var o=e[r],d=t?t(o):o;if(!r||!At(d,m)){var m=d;l[i++]=o===0?0:o}}return l}function Na(e){return typeof e=="number"?e:ht(e)?Ee:+e}function ut(e){if(typeof e=="string")return e;if(W(e))return _e(e,ut)+"";if(ht(e))return ra?ra.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function tr(e,t,r){var s=-1,i=Yr,l=e.length,o=!0,d=[],m=d;if(r)o=!1,i=es;else if(l>=L){var v=t?null:Xd(e);if(v)return Jr(v);o=!1,i=Rr,m=new cr}else m=t?[]:d;e:for(;++s<l;){var y=e[s],b=t?t(y):y;if(y=r||y!==0?y:0,o&&b===b){for(var k=m.length;k--;)if(m[k]===b)continue e;t&&m.push(b),d.push(y)}else i(m,b,r)||(m!==d&&m.push(b),d.push(y))}return d}function Ts(e,t){return t=rr(t,e),e=Ja(e,t),e==null||delete e[Lt(Nt(t))]}function ja(e,t,r,s){return $r(e,t,r(dr(e,t)),s)}function yn(e,t,r,s){for(var i=e.length,l=s?i:-1;(s?l--:++l<i)&&t(e[l],l,e););return r?kt(e,s?0:l,s?l+1:i):kt(e,s?l+1:0,s?i:l)}function Ta(e,t){var r=e;return r instanceof K&&(r=r.value()),ts(t,function(s,i){return i.func.apply(i.thisArg,Zt([s],i.args))},r)}function Cs(e,t,r){var s=e.length;if(s<2)return s?tr(e[0]):[];for(var i=-1,l=x(s);++i<s;)for(var o=e[i],d=-1;++d<s;)d!=i&&(l[i]=Br(l[i]||o,e[d],t,r));return tr(Ge(l,1),t,r)}function Ca(e,t,r){for(var s=-1,i=e.length,l=t.length,o={};++s<i;){var d=s<l?t[s]:c;r(o,e[s],d)}return o}function Ss(e){return De(e)?e:[]}function As(e){return typeof e=="function"?e:it}function rr(e,t){return W(e)?e:Bs(e,t)?[e]:rl(re(e))}var Fd=q;function nr(e,t,r){var s=e.length;return r=r===c?s:r,!t&&r>=s?e:kt(e,t,r)}var Sa=To||function(e){return ze.clearTimeout(e)};function Aa(e,t){if(t)return e.slice();var r=e.length,s=Yi?Yi(r):new e.constructor(r);return e.copy(s),s}function Ds(e){var t=new e.constructor(e.byteLength);return new sn(t).set(new sn(e)),t}function Wd(e,t){var r=t?Ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function $d(e){var t=new e.constructor(e.source,hi.exec(e));return t.lastIndex=e.lastIndex,t}function Ud(e){return Or?xe(Or.call(e)):{}}function Da(e,t){var r=t?Ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ra(e,t){if(e!==t){var r=e!==c,s=e===null,i=e===e,l=ht(e),o=t!==c,d=t===null,m=t===t,v=ht(t);if(!d&&!v&&!l&&e>t||l&&o&&m&&!d&&!v||s&&o&&m||!r&&m||!i)return 1;if(!s&&!l&&!v&&e<t||v&&r&&i&&!s&&!l||d&&r&&i||!o&&i||!m)return-1}return 0}function Hd(e,t,r){for(var s=-1,i=e.criteria,l=t.criteria,o=i.length,d=r.length;++s<o;){var m=Ra(i[s],l[s]);if(m){if(s>=d)return m;var v=r[s];return m*(v=="desc"?-1:1)}}return e.index-t.index}function Pa(e,t,r,s){for(var i=-1,l=e.length,o=r.length,d=-1,m=t.length,v=Be(l-o,0),y=x(m+v),b=!s;++d<m;)y[d]=t[d];for(;++i<o;)(b||i<l)&&(y[r[i]]=e[i]);for(;v--;)y[d++]=e[i++];return y}function Ea(e,t,r,s){for(var i=-1,l=e.length,o=-1,d=r.length,m=-1,v=t.length,y=Be(l-d,0),b=x(y+v),k=!s;++i<y;)b[i]=e[i];for(var S=i;++m<v;)b[S+m]=t[m];for(;++o<d;)(k||i<l)&&(b[S+r[o]]=e[i++]);return b}function rt(e,t){var r=-1,s=e.length;for(t||(t=x(s));++r<s;)t[r]=e[r];return t}function Et(e,t,r,s){var i=!r;r||(r={});for(var l=-1,o=t.length;++l<o;){var d=t[l],m=s?s(r[d],e[d],d,r,e):c;m===c&&(m=e[d]),i?Wt(r,d,m):Mr(r,d,m)}return r}function qd(e,t){return Et(e,Ms(e),t)}function zd(e,t){return Et(e,Ga(e),t)}function bn(e,t){return function(r,s){var i=W(r)?Xc:fd,l=t?t():{};return i(r,e,E(s,2),l)}}function jr(e){return q(function(t,r){var s=-1,i=r.length,l=i>1?r[i-1]:c,o=i>2?r[2]:c;for(l=e.length>3&&typeof l=="function"?(i--,l):c,o&&Qe(r[0],r[1],o)&&(l=i<3?c:l,i=1),t=xe(t);++s<i;){var d=r[s];d&&e(t,d,s,l)}return t})}function La(e,t){return function(r,s){if(r==null)return r;if(!nt(r))return e(r,s);for(var i=r.length,l=t?i:-1,o=xe(r);(t?l--:++l<i)&&s(o[l],l,o)!==!1;);return r}}function Ia(e){return function(t,r,s){for(var i=-1,l=xe(t),o=s(t),d=o.length;d--;){var m=o[e?d:++i];if(r(l[m],m,l)===!1)break}return t}}function Gd(e,t,r){var s=t&ce,i=Ur(e);function l(){var o=this&&this!==ze&&this instanceof l?i:e;return o.apply(s?r:this,arguments)}return l}function Oa(e){return function(t){t=re(t);var r=vr(t)?Ct(t):c,s=r?r[0]:t.charAt(0),i=r?nr(r,1).join(""):t.slice(1);return s[e]()+i}}function Tr(e){return function(t){return ts(Ll(El(t).replace(Ic,"")),e,"")}}function Ur(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Nr(e.prototype),s=e.apply(r,t);return Ne(s)?s:r}}function Vd(e,t,r){var s=Ur(e);function i(){for(var l=arguments.length,o=x(l),d=l,m=Cr(i);d--;)o[d]=arguments[d];var v=l<3&&o[0]!==m&&o[l-1]!==m?[]:Jt(o,m);if(l-=v.length,l<r)return $a(e,t,_n,i.placeholder,c,o,v,c,c,r-l);var y=this&&this!==ze&&this instanceof i?s:e;return ot(y,this,o)}return i}function Ma(e){return function(t,r,s){var i=xe(t);if(!nt(t)){var l=E(r,3);t=$e(t),r=function(d){return l(i[d],d,i)}}var o=e(t,r,s);return o>-1?i[l?t[o]:o]:c}}function Ba(e){return Ut(function(t){var r=t.length,s=r,i=_t.prototype.thru;for(e&&t.reverse();s--;){var l=t[s];if(typeof l!="function")throw new bt(A);if(i&&!o&&jn(l)=="wrapper")var o=new _t([],!0)}for(s=o?s:r;++s<r;){l=t[s];var d=jn(l),m=d=="wrapper"?Is(l):c;m&&Fs(m[0])&&m[1]==(oe|we|J|ke)&&!m[4].length&&m[9]==1?o=o[jn(m[0])].apply(o,m[3]):o=l.length==1&&Fs(l)?o[d]():o.thru(l)}return function(){var v=arguments,y=v[0];if(o&&v.length==1&&W(y))return o.plant(y).value();for(var b=0,k=r?t[b].apply(this,v):y;++b<r;)k=t[b].call(this,k);return k}})}function _n(e,t,r,s,i,l,o,d,m,v){var y=t&oe,b=t&ce,k=t&Se,S=t&(we|U),O=t&xt,H=k?c:Ur(e);function M(){for(var V=arguments.length,X=x(V),ft=V;ft--;)X[ft]=arguments[ft];if(S)var et=Cr(M),mt=so(X,et);if(s&&(X=Pa(X,s,i,S)),l&&(X=Ea(X,l,o,S)),V-=mt,S&&V<v){var Re=Jt(X,et);return $a(e,t,_n,M.placeholder,r,X,Re,d,m,v-V)}var Dt=b?r:this,Gt=k?Dt[e]:e;return V=X.length,d?X=fu(X,d):O&&V>1&&X.reverse(),y&&m<V&&(X.length=m),this&&this!==ze&&this instanceof M&&(Gt=H||Ur(Gt)),Gt.apply(Dt,X)}return M}function Fa(e,t){return function(r,s){return _d(r,e,t(s),{})}}function wn(e,t){return function(r,s){var i;if(r===c&&s===c)return t;if(r!==c&&(i=r),s!==c){if(i===c)return s;typeof r=="string"||typeof s=="string"?(r=ut(r),s=ut(s)):(r=Na(r),s=Na(s)),i=e(r,s)}return i}}function Rs(e){return Ut(function(t){return t=_e(t,dt(E())),q(function(r){var s=this;return e(t,function(i){return ot(i,s,r)})})})}function kn(e,t){t=t===c?" ":ut(t);var r=t.length;if(r<2)return r?Ns(t,e):t;var s=Ns(t,on(e/yr(t)));return vr(t)?nr(Ct(s),0,e).join(""):s.slice(0,e)}function Kd(e,t,r,s){var i=t&ce,l=Ur(e);function o(){for(var d=-1,m=arguments.length,v=-1,y=s.length,b=x(y+m),k=this&&this!==ze&&this instanceof o?l:e;++v<y;)b[v]=s[v];for(;m--;)b[v++]=arguments[++d];return ot(k,i?r:this,b)}return o}function Wa(e){return function(t,r,s){return s&&typeof s!="number"&&Qe(t,r,s)&&(r=s=c),t=zt(t),r===c?(r=t,t=0):r=zt(r),s=s===c?t<r?1:-1:zt(s),Ed(t,r,s,e)}}function Nn(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=jt(t),r=jt(r)),e(t,r)}}function $a(e,t,r,s,i,l,o,d,m,v){var y=t&we,b=y?o:c,k=y?c:o,S=y?l:c,O=y?c:l;t|=y?J:se,t&=~(y?se:J),t&G||(t&=-4);var H=[e,t,i,S,b,O,k,d,m,v],M=r.apply(c,H);return Fs(e)&&Qa(M,H),M.placeholder=s,el(M,e,t)}function Ps(e){var t=Me[e];return function(r,s){if(r=jt(r),s=s==null?0:Ke($(s),292),s&&ea(r)){var i=(re(r)+"e").split("e"),l=t(i[0]+"e"+(+i[1]+s));return i=(re(l)+"e").split("e"),+(i[0]+"e"+(+i[1]-s))}return t(r)}}var Xd=wr&&1/Jr(new wr([,-0]))[1]==Y?function(e){return new wr(e)}:ei;function Ua(e){return function(t){var r=Xe(t);return r==Ve?cs(t):r==I?ho(t):no(t,e(t))}}function $t(e,t,r,s,i,l,o,d){var m=t&Se;if(!m&&typeof e!="function")throw new bt(A);var v=s?s.length:0;if(v||(t&=-97,s=i=c),o=o===c?o:Be($(o),0),d=d===c?d:$(d),v-=i?i.length:0,t&se){var y=s,b=i;s=i=c}var k=m?c:Is(e),S=[e,t,r,s,i,y,b,l,o,d];if(k&&du(S,k),e=S[0],t=S[1],r=S[2],s=S[3],i=S[4],d=S[9]=S[9]===c?m?0:e.length:Be(S[9]-v,0),!d&&t&(we|U)&&(t&=-25),!t||t==ce)var O=Gd(e,t,r);else t==we||t==U?O=Vd(e,t,d):(t==J||t==(ce|J))&&!i.length?O=Kd(e,t,r,s):O=_n.apply(c,S);var H=k?wa:Qa;return el(H(O,S),e,t)}function Ha(e,t,r,s){return e===c||At(e,_r[r])&&!ae.call(s,r)?t:e}function qa(e,t,r,s,i,l){return Ne(e)&&Ne(t)&&(l.set(t,e),gn(e,t,c,qa,l),l.delete(t)),e}function Yd(e){return zr(e)?c:e}function za(e,t,r,s,i,l){var o=r&Ce,d=e.length,m=t.length;if(d!=m&&!(o&&m>d))return!1;var v=l.get(e),y=l.get(t);if(v&&y)return v==t&&y==e;var b=-1,k=!0,S=r&He?new cr:c;for(l.set(e,t),l.set(t,e);++b<d;){var O=e[b],H=t[b];if(s)var M=o?s(H,O,b,t,e,l):s(O,H,b,e,t,l);if(M!==c){if(M)continue;k=!1;break}if(S){if(!rs(t,function(V,X){if(!Rr(S,X)&&(O===V||i(O,V,r,s,l)))return S.push(X)})){k=!1;break}}else if(!(O===H||i(O,H,r,s,l))){k=!1;break}}return l.delete(e),l.delete(t),k}function Zd(e,t,r,s,i,l,o){switch(r){case qe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ze:return!(e.byteLength!=t.byteLength||!l(new sn(e),new sn(t)));case Le:case Ye:case Ot:return At(+e,+t);case lt:return e.name==t.name&&e.message==t.message;case B:case me:return e==t+"";case Ve:var d=cs;case I:var m=s&Ce;if(d||(d=Jr),e.size!=t.size&&!m)return!1;var v=o.get(e);if(v)return v==t;s|=He,o.set(e,t);var y=za(d(e),d(t),s,i,l,o);return o.delete(e),y;case Ie:if(Or)return Or.call(e)==Or.call(t)}return!1}function Jd(e,t,r,s,i,l){var o=r&Ce,d=Es(e),m=d.length,v=Es(t),y=v.length;if(m!=y&&!o)return!1;for(var b=m;b--;){var k=d[b];if(!(o?k in t:ae.call(t,k)))return!1}var S=l.get(e),O=l.get(t);if(S&&O)return S==t&&O==e;var H=!0;l.set(e,t),l.set(t,e);for(var M=o;++b<m;){k=d[b];var V=e[k],X=t[k];if(s)var ft=o?s(X,V,k,t,e,l):s(V,X,k,e,t,l);if(!(ft===c?V===X||i(V,X,r,s,l):ft)){H=!1;break}M||(M=k=="constructor")}if(H&&!M){var et=e.constructor,mt=t.constructor;et!=mt&&"constructor"in e&&"constructor"in t&&!(typeof et=="function"&&et instanceof et&&typeof mt=="function"&&mt instanceof mt)&&(H=!1)}return l.delete(e),l.delete(t),H}function Ut(e){return $s(Za(e,c,al),e+"")}function Es(e){return ua(e,$e,Ms)}function Ls(e){return ua(e,st,Ga)}var Is=un?function(e){return un.get(e)}:ei;function jn(e){for(var t=e.name+"",r=kr[t],s=ae.call(kr,t)?r.length:0;s--;){var i=r[s],l=i.func;if(l==null||l==e)return i.name}return t}function Cr(e){var t=ae.call(a,"placeholder")?a:e;return t.placeholder}function E(){var e=a.iteratee||Js;return e=e===Js?ma:e,arguments.length?e(arguments[0],arguments[1]):e}function Tn(e,t){var r=e.__data__;return au(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Os(e){for(var t=$e(e),r=t.length;r--;){var s=t[r],i=e[s];t[r]=[s,i,Xa(i)]}return t}function ur(e,t){var r=co(e,t);return fa(r)?r:c}function Qd(e){var t=ae.call(e,ar),r=e[ar];try{e[ar]=c;var s=!0}catch{}var i=rn.call(e);return s&&(t?e[ar]=r:delete e[ar]),i}var Ms=ds?function(e){return e==null?[]:(e=xe(e),Yt(ds(e),function(t){return Ji.call(e,t)}))}:ti,Ga=ds?function(e){for(var t=[];e;)Zt(t,Ms(e)),e=an(e);return t}:ti,Xe=Je;(us&&Xe(new us(new ArrayBuffer(1)))!=qe||Er&&Xe(new Er)!=Ve||hs&&Xe(hs.resolve())!=h||wr&&Xe(new wr)!=I||Lr&&Xe(new Lr)!=gt)&&(Xe=function(e){var t=Je(e),r=t==We?e.constructor:c,s=r?hr(r):"";if(s)switch(s){case Io:return qe;case Oo:return Ve;case Mo:return h;case Bo:return I;case Fo:return gt}return t});function eu(e,t,r){for(var s=-1,i=r.length;++s<i;){var l=r[s],o=l.size;switch(l.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Ke(t,e+o);break;case"takeRight":e=Be(e,t-o);break}}return{start:e,end:t}}function tu(e){var t=e.match(ac);return t?t[1].split(lc):[]}function Va(e,t,r){t=rr(t,e);for(var s=-1,i=t.length,l=!1;++s<i;){var o=Lt(t[s]);if(!(l=e!=null&&r(e,o)))break;e=e[o]}return l||++s!=i?l:(i=e==null?0:e.length,!!i&&En(i)&&Ht(o,i)&&(W(e)||fr(e)))}function ru(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&ae.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Ka(e){return typeof e.constructor=="function"&&!Hr(e)?Nr(an(e)):{}}function nu(e,t,r){var s=e.constructor;switch(t){case Ze:return Ds(e);case Le:case Ye:return new s(+e);case qe:return Wd(e,r);case Xt:case Oe:case Mt:case ct:case xr:case $n:case Un:case Hn:case qn:return Da(e,r);case Ve:return new s;case Ot:case me:return new s(e);case B:return $d(e);case I:return new s;case Ie:return Ud(e)}}function su(e,t){var r=t.length;if(!r)return e;var s=r-1;return t[s]=(r>1?"& ":"")+t[s],t=t.join(r>2?", ":" "),e.replace(ic,`{
/* [wrapped with `+t+`] */
`)}function iu(e){return W(e)||fr(e)||!!(Qi&&e&&e[Qi])}function Ht(e,t){var r=typeof e;return t=t??de,!!t&&(r=="number"||r!="symbol"&&pc.test(e))&&e>-1&&e%1==0&&e<t}function Qe(e,t,r){if(!Ne(r))return!1;var s=typeof t;return(s=="number"?nt(r)&&Ht(t,r.length):s=="string"&&t in r)?At(r[t],e):!1}function Bs(e,t){if(W(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ht(e)?!0:tc.test(e)||!ec.test(e)||t!=null&&e in xe(t)}function au(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Fs(e){var t=jn(e),r=a[t];if(typeof r!="function"||!(t in K.prototype))return!1;if(e===r)return!0;var s=Is(r);return!!s&&e===s[0]}function lu(e){return!!Xi&&Xi in e}var cu=en?qt:ri;function Hr(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||_r;return e===r}function Xa(e){return e===e&&!Ne(e)}function Ya(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==c||e in xe(r))}}function ou(e){var t=Rn(e,function(s){return r.size===Z&&r.clear(),s}),r=t.cache;return t}function du(e,t){var r=e[1],s=t[1],i=r|s,l=i<(ce|Se|oe),o=s==oe&&r==we||s==oe&&r==ke&&e[7].length<=t[8]||s==(oe|ke)&&t[7].length<=t[8]&&r==we;if(!(l||o))return e;s&ce&&(e[2]=t[2],i|=r&ce?0:G);var d=t[3];if(d){var m=e[3];e[3]=m?Pa(m,d,t[4]):d,e[4]=m?Jt(e[3],ne):t[4]}return d=t[5],d&&(m=e[5],e[5]=m?Ea(m,d,t[6]):d,e[6]=m?Jt(e[5],ne):t[6]),d=t[7],d&&(e[7]=d),s&oe&&(e[8]=e[8]==null?t[8]:Ke(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function uu(e){var t=[];if(e!=null)for(var r in xe(e))t.push(r);return t}function hu(e){return rn.call(e)}function Za(e,t,r){return t=Be(t===c?e.length-1:t,0),function(){for(var s=arguments,i=-1,l=Be(s.length-t,0),o=x(l);++i<l;)o[i]=s[t+i];i=-1;for(var d=x(t+1);++i<t;)d[i]=s[i];return d[t]=r(o),ot(e,this,d)}}function Ja(e,t){return t.length<2?e:dr(e,kt(t,0,-1))}function fu(e,t){for(var r=e.length,s=Ke(t.length,r),i=rt(e);s--;){var l=t[s];e[s]=Ht(l,r)?i[l]:c}return e}function Ws(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Qa=tl(wa),qr=So||function(e,t){return ze.setTimeout(e,t)},$s=tl(Od);function el(e,t,r){var s=t+"";return $s(e,su(s,mu(tu(s),r)))}function tl(e){var t=0,r=0;return function(){var s=Po(),i=N-(s-r);if(r=s,i>0){if(++t>=Fe)return arguments[0]}else t=0;return e.apply(c,arguments)}}function Cn(e,t){var r=-1,s=e.length,i=s-1;for(t=t===c?s:t;++r<t;){var l=ks(r,i),o=e[l];e[l]=e[r],e[r]=o}return e.length=t,e}var rl=ou(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(rc,function(r,s,i,l){t.push(i?l.replace(dc,"$1"):s||r)}),t});function Lt(e){if(typeof e=="string"||ht(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function hr(e){if(e!=null){try{return tn.call(e)}catch{}try{return e+""}catch{}}return""}function mu(e,t){return yt(pt,function(r){var s="_."+r[0];t&r[1]&&!Yr(e,s)&&e.push(s)}),e.sort()}function nl(e){if(e instanceof K)return e.clone();var t=new _t(e.__wrapped__,e.__chain__);return t.__actions__=rt(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function xu(e,t,r){(r?Qe(e,t,r):t===c)?t=1:t=Be($(t),0);var s=e==null?0:e.length;if(!s||t<1)return[];for(var i=0,l=0,o=x(on(s/t));i<s;)o[l++]=kt(e,i,i+=t);return o}function pu(e){for(var t=-1,r=e==null?0:e.length,s=0,i=[];++t<r;){var l=e[t];l&&(i[s++]=l)}return i}function gu(){var e=arguments.length;if(!e)return[];for(var t=x(e-1),r=arguments[0],s=e;s--;)t[s-1]=arguments[s];return Zt(W(r)?rt(r):[r],Ge(t,1))}var vu=q(function(e,t){return De(e)?Br(e,Ge(t,1,De,!0)):[]}),yu=q(function(e,t){var r=Nt(t);return De(r)&&(r=c),De(e)?Br(e,Ge(t,1,De,!0),E(r,2)):[]}),bu=q(function(e,t){var r=Nt(t);return De(r)&&(r=c),De(e)?Br(e,Ge(t,1,De,!0),c,r):[]});function _u(e,t,r){var s=e==null?0:e.length;return s?(t=r||t===c?1:$(t),kt(e,t<0?0:t,s)):[]}function wu(e,t,r){var s=e==null?0:e.length;return s?(t=r||t===c?1:$(t),t=s-t,kt(e,0,t<0?0:t)):[]}function ku(e,t){return e&&e.length?yn(e,E(t,3),!0,!0):[]}function Nu(e,t){return e&&e.length?yn(e,E(t,3),!0):[]}function ju(e,t,r,s){var i=e==null?0:e.length;return i?(r&&typeof r!="number"&&Qe(e,t,r)&&(r=0,s=i),gd(e,t,r,s)):[]}function sl(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var i=r==null?0:$(r);return i<0&&(i=Be(s+i,0)),Zr(e,E(t,3),i)}function il(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var i=s-1;return r!==c&&(i=$(r),i=r<0?Be(s+i,0):Ke(i,s-1)),Zr(e,E(t,3),i,!0)}function al(e){var t=e==null?0:e.length;return t?Ge(e,1):[]}function Tu(e){var t=e==null?0:e.length;return t?Ge(e,Y):[]}function Cu(e,t){var r=e==null?0:e.length;return r?(t=t===c?1:$(t),Ge(e,t)):[]}function Su(e){for(var t=-1,r=e==null?0:e.length,s={};++t<r;){var i=e[t];s[i[0]]=i[1]}return s}function ll(e){return e&&e.length?e[0]:c}function Au(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var i=r==null?0:$(r);return i<0&&(i=Be(s+i,0)),gr(e,t,i)}function Du(e){var t=e==null?0:e.length;return t?kt(e,0,-1):[]}var Ru=q(function(e){var t=_e(e,Ss);return t.length&&t[0]===e[0]?vs(t):[]}),Pu=q(function(e){var t=Nt(e),r=_e(e,Ss);return t===Nt(r)?t=c:r.pop(),r.length&&r[0]===e[0]?vs(r,E(t,2)):[]}),Eu=q(function(e){var t=Nt(e),r=_e(e,Ss);return t=typeof t=="function"?t:c,t&&r.pop(),r.length&&r[0]===e[0]?vs(r,c,t):[]});function Lu(e,t){return e==null?"":Do.call(e,t)}function Nt(e){var t=e==null?0:e.length;return t?e[t-1]:c}function Iu(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var i=s;return r!==c&&(i=$(r),i=i<0?Be(s+i,0):Ke(i,s-1)),t===t?mo(e,t,i):Zr(e,$i,i,!0)}function Ou(e,t){return e&&e.length?va(e,$(t)):c}var Mu=q(cl);function cl(e,t){return e&&e.length&&t&&t.length?ws(e,t):e}function Bu(e,t,r){return e&&e.length&&t&&t.length?ws(e,t,E(r,2)):e}function Fu(e,t,r){return e&&e.length&&t&&t.length?ws(e,t,c,r):e}var Wu=Ut(function(e,t){var r=e==null?0:e.length,s=ms(e,t);return _a(e,_e(t,function(i){return Ht(i,r)?+i:i}).sort(Ra)),s});function $u(e,t){var r=[];if(!(e&&e.length))return r;var s=-1,i=[],l=e.length;for(t=E(t,3);++s<l;){var o=e[s];t(o,s,e)&&(r.push(o),i.push(s))}return _a(e,i),r}function Us(e){return e==null?e:Lo.call(e)}function Uu(e,t,r){var s=e==null?0:e.length;return s?(r&&typeof r!="number"&&Qe(e,t,r)?(t=0,r=s):(t=t==null?0:$(t),r=r===c?s:$(r)),kt(e,t,r)):[]}function Hu(e,t){return vn(e,t)}function qu(e,t,r){return js(e,t,E(r,2))}function zu(e,t){var r=e==null?0:e.length;if(r){var s=vn(e,t);if(s<r&&At(e[s],t))return s}return-1}function Gu(e,t){return vn(e,t,!0)}function Vu(e,t,r){return js(e,t,E(r,2),!0)}function Ku(e,t){var r=e==null?0:e.length;if(r){var s=vn(e,t,!0)-1;if(At(e[s],t))return s}return-1}function Xu(e){return e&&e.length?ka(e):[]}function Yu(e,t){return e&&e.length?ka(e,E(t,2)):[]}function Zu(e){var t=e==null?0:e.length;return t?kt(e,1,t):[]}function Ju(e,t,r){return e&&e.length?(t=r||t===c?1:$(t),kt(e,0,t<0?0:t)):[]}function Qu(e,t,r){var s=e==null?0:e.length;return s?(t=r||t===c?1:$(t),t=s-t,kt(e,t<0?0:t,s)):[]}function eh(e,t){return e&&e.length?yn(e,E(t,3),!1,!0):[]}function th(e,t){return e&&e.length?yn(e,E(t,3)):[]}var rh=q(function(e){return tr(Ge(e,1,De,!0))}),nh=q(function(e){var t=Nt(e);return De(t)&&(t=c),tr(Ge(e,1,De,!0),E(t,2))}),sh=q(function(e){var t=Nt(e);return t=typeof t=="function"?t:c,tr(Ge(e,1,De,!0),c,t)});function ih(e){return e&&e.length?tr(e):[]}function ah(e,t){return e&&e.length?tr(e,E(t,2)):[]}function lh(e,t){return t=typeof t=="function"?t:c,e&&e.length?tr(e,c,t):[]}function Hs(e){if(!(e&&e.length))return[];var t=0;return e=Yt(e,function(r){if(De(r))return t=Be(r.length,t),!0}),as(t,function(r){return _e(e,ns(r))})}function ol(e,t){if(!(e&&e.length))return[];var r=Hs(e);return t==null?r:_e(r,function(s){return ot(t,c,s)})}var ch=q(function(e,t){return De(e)?Br(e,t):[]}),oh=q(function(e){return Cs(Yt(e,De))}),dh=q(function(e){var t=Nt(e);return De(t)&&(t=c),Cs(Yt(e,De),E(t,2))}),uh=q(function(e){var t=Nt(e);return t=typeof t=="function"?t:c,Cs(Yt(e,De),c,t)}),hh=q(Hs);function fh(e,t){return Ca(e||[],t||[],Mr)}function mh(e,t){return Ca(e||[],t||[],$r)}var xh=q(function(e){var t=e.length,r=t>1?e[t-1]:c;return r=typeof r=="function"?(e.pop(),r):c,ol(e,r)});function dl(e){var t=a(e);return t.__chain__=!0,t}function ph(e,t){return t(e),e}function Sn(e,t){return t(e)}var gh=Ut(function(e){var t=e.length,r=t?e[0]:0,s=this.__wrapped__,i=function(l){return ms(l,e)};return t>1||this.__actions__.length||!(s instanceof K)||!Ht(r)?this.thru(i):(s=s.slice(r,+r+(t?1:0)),s.__actions__.push({func:Sn,args:[i],thisArg:c}),new _t(s,this.__chain__).thru(function(l){return t&&!l.length&&l.push(c),l}))});function vh(){return dl(this)}function yh(){return new _t(this.value(),this.__chain__)}function bh(){this.__values__===c&&(this.__values__=Nl(this.value()));var e=this.__index__>=this.__values__.length,t=e?c:this.__values__[this.__index__++];return{done:e,value:t}}function _h(){return this}function wh(e){for(var t,r=this;r instanceof fn;){var s=nl(r);s.__index__=0,s.__values__=c,t?i.__wrapped__=s:t=s;var i=s;r=r.__wrapped__}return i.__wrapped__=e,t}function kh(){var e=this.__wrapped__;if(e instanceof K){var t=e;return this.__actions__.length&&(t=new K(this)),t=t.reverse(),t.__actions__.push({func:Sn,args:[Us],thisArg:c}),new _t(t,this.__chain__)}return this.thru(Us)}function Nh(){return Ta(this.__wrapped__,this.__actions__)}var jh=bn(function(e,t,r){ae.call(e,r)?++e[r]:Wt(e,r,1)});function Th(e,t,r){var s=W(e)?Fi:pd;return r&&Qe(e,t,r)&&(t=c),s(e,E(t,3))}function Ch(e,t){var r=W(e)?Yt:oa;return r(e,E(t,3))}var Sh=Ma(sl),Ah=Ma(il);function Dh(e,t){return Ge(An(e,t),1)}function Rh(e,t){return Ge(An(e,t),Y)}function Ph(e,t,r){return r=r===c?1:$(r),Ge(An(e,t),r)}function ul(e,t){var r=W(e)?yt:er;return r(e,E(t,3))}function hl(e,t){var r=W(e)?Yc:ca;return r(e,E(t,3))}var Eh=bn(function(e,t,r){ae.call(e,r)?e[r].push(t):Wt(e,r,[t])});function Lh(e,t,r,s){e=nt(e)?e:Ar(e),r=r&&!s?$(r):0;var i=e.length;return r<0&&(r=Be(i+r,0)),Ln(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&gr(e,t,r)>-1}var Ih=q(function(e,t,r){var s=-1,i=typeof t=="function",l=nt(e)?x(e.length):[];return er(e,function(o){l[++s]=i?ot(t,o,r):Fr(o,t,r)}),l}),Oh=bn(function(e,t,r){Wt(e,r,t)});function An(e,t){var r=W(e)?_e:xa;return r(e,E(t,3))}function Mh(e,t,r,s){return e==null?[]:(W(t)||(t=t==null?[]:[t]),r=s?c:r,W(r)||(r=r==null?[]:[r]),ya(e,t,r))}var Bh=bn(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function Fh(e,t,r){var s=W(e)?ts:Hi,i=arguments.length<3;return s(e,E(t,4),r,i,er)}function Wh(e,t,r){var s=W(e)?Zc:Hi,i=arguments.length<3;return s(e,E(t,4),r,i,ca)}function $h(e,t){var r=W(e)?Yt:oa;return r(e,Pn(E(t,3)))}function Uh(e){var t=W(e)?sa:Ld;return t(e)}function Hh(e,t,r){(r?Qe(e,t,r):t===c)?t=1:t=$(t);var s=W(e)?ud:Id;return s(e,t)}function qh(e){var t=W(e)?hd:Md;return t(e)}function zh(e){if(e==null)return 0;if(nt(e))return Ln(e)?yr(e):e.length;var t=Xe(e);return t==Ve||t==I?e.size:bs(e).length}function Gh(e,t,r){var s=W(e)?rs:Bd;return r&&Qe(e,t,r)&&(t=c),s(e,E(t,3))}var Vh=q(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Qe(e,t[0],t[1])?t=[]:r>2&&Qe(t[0],t[1],t[2])&&(t=[t[0]]),ya(e,Ge(t,1),[])}),Dn=Co||function(){return ze.Date.now()};function Kh(e,t){if(typeof t!="function")throw new bt(A);return e=$(e),function(){if(--e<1)return t.apply(this,arguments)}}function fl(e,t,r){return t=r?c:t,t=e&&t==null?e.length:t,$t(e,oe,c,c,c,c,t)}function ml(e,t){var r;if(typeof t!="function")throw new bt(A);return e=$(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=c),r}}var qs=q(function(e,t,r){var s=ce;if(r.length){var i=Jt(r,Cr(qs));s|=J}return $t(e,s,t,r,i)}),xl=q(function(e,t,r){var s=ce|Se;if(r.length){var i=Jt(r,Cr(xl));s|=J}return $t(t,s,e,r,i)});function pl(e,t,r){t=r?c:t;var s=$t(e,we,c,c,c,c,c,t);return s.placeholder=pl.placeholder,s}function gl(e,t,r){t=r?c:t;var s=$t(e,U,c,c,c,c,c,t);return s.placeholder=gl.placeholder,s}function vl(e,t,r){var s,i,l,o,d,m,v=0,y=!1,b=!1,k=!0;if(typeof e!="function")throw new bt(A);t=jt(t)||0,Ne(r)&&(y=!!r.leading,b="maxWait"in r,l=b?Be(jt(r.maxWait)||0,t):l,k="trailing"in r?!!r.trailing:k);function S(Re){var Dt=s,Gt=i;return s=i=c,v=Re,o=e.apply(Gt,Dt),o}function O(Re){return v=Re,d=qr(V,t),y?S(Re):o}function H(Re){var Dt=Re-m,Gt=Re-v,Ml=t-Dt;return b?Ke(Ml,l-Gt):Ml}function M(Re){var Dt=Re-m,Gt=Re-v;return m===c||Dt>=t||Dt<0||b&&Gt>=l}function V(){var Re=Dn();if(M(Re))return X(Re);d=qr(V,H(Re))}function X(Re){return d=c,k&&s?S(Re):(s=i=c,o)}function ft(){d!==c&&Sa(d),v=0,s=m=i=d=c}function et(){return d===c?o:X(Dn())}function mt(){var Re=Dn(),Dt=M(Re);if(s=arguments,i=this,m=Re,Dt){if(d===c)return O(m);if(b)return Sa(d),d=qr(V,t),S(m)}return d===c&&(d=qr(V,t)),o}return mt.cancel=ft,mt.flush=et,mt}var Xh=q(function(e,t){return la(e,1,t)}),Yh=q(function(e,t,r){return la(e,jt(t)||0,r)});function Zh(e){return $t(e,xt)}function Rn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new bt(A);var r=function(){var s=arguments,i=t?t.apply(this,s):s[0],l=r.cache;if(l.has(i))return l.get(i);var o=e.apply(this,s);return r.cache=l.set(i,o)||l,o};return r.cache=new(Rn.Cache||Ft),r}Rn.Cache=Ft;function Pn(e){if(typeof e!="function")throw new bt(A);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Jh(e){return ml(2,e)}var Qh=Fd(function(e,t){t=t.length==1&&W(t[0])?_e(t[0],dt(E())):_e(Ge(t,1),dt(E()));var r=t.length;return q(function(s){for(var i=-1,l=Ke(s.length,r);++i<l;)s[i]=t[i].call(this,s[i]);return ot(e,this,s)})}),zs=q(function(e,t){var r=Jt(t,Cr(zs));return $t(e,J,c,t,r)}),yl=q(function(e,t){var r=Jt(t,Cr(yl));return $t(e,se,c,t,r)}),ef=Ut(function(e,t){return $t(e,ke,c,c,c,t)});function tf(e,t){if(typeof e!="function")throw new bt(A);return t=t===c?t:$(t),q(e,t)}function rf(e,t){if(typeof e!="function")throw new bt(A);return t=t==null?0:Be($(t),0),q(function(r){var s=r[t],i=nr(r,0,t);return s&&Zt(i,s),ot(e,this,i)})}function nf(e,t,r){var s=!0,i=!0;if(typeof e!="function")throw new bt(A);return Ne(r)&&(s="leading"in r?!!r.leading:s,i="trailing"in r?!!r.trailing:i),vl(e,t,{leading:s,maxWait:t,trailing:i})}function sf(e){return fl(e,1)}function af(e,t){return zs(As(t),e)}function lf(){if(!arguments.length)return[];var e=arguments[0];return W(e)?e:[e]}function cf(e){return wt(e,ge)}function of(e,t){return t=typeof t=="function"?t:c,wt(e,ge,t)}function df(e){return wt(e,ee|ge)}function uf(e,t){return t=typeof t=="function"?t:c,wt(e,ee|ge,t)}function hf(e,t){return t==null||aa(e,t,$e(t))}function At(e,t){return e===t||e!==e&&t!==t}var ff=Nn(gs),mf=Nn(function(e,t){return e>=t}),fr=ha(function(){return arguments}())?ha:function(e){return je(e)&&ae.call(e,"callee")&&!Ji.call(e,"callee")},W=x.isArray,xf=Ei?dt(Ei):wd;function nt(e){return e!=null&&En(e.length)&&!qt(e)}function De(e){return je(e)&&nt(e)}function pf(e){return e===!0||e===!1||je(e)&&Je(e)==Le}var sr=Ao||ri,gf=Li?dt(Li):kd;function vf(e){return je(e)&&e.nodeType===1&&!zr(e)}function yf(e){if(e==null)return!0;if(nt(e)&&(W(e)||typeof e=="string"||typeof e.splice=="function"||sr(e)||Sr(e)||fr(e)))return!e.length;var t=Xe(e);if(t==Ve||t==I)return!e.size;if(Hr(e))return!bs(e).length;for(var r in e)if(ae.call(e,r))return!1;return!0}function bf(e,t){return Wr(e,t)}function _f(e,t,r){r=typeof r=="function"?r:c;var s=r?r(e,t):c;return s===c?Wr(e,t,c,r):!!s}function Gs(e){if(!je(e))return!1;var t=Je(e);return t==lt||t==tt||typeof e.message=="string"&&typeof e.name=="string"&&!zr(e)}function wf(e){return typeof e=="number"&&ea(e)}function qt(e){if(!Ne(e))return!1;var t=Je(e);return t==Rt||t==mr||t==Kt||t==_}function bl(e){return typeof e=="number"&&e==$(e)}function En(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=de}function Ne(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function je(e){return e!=null&&typeof e=="object"}var _l=Ii?dt(Ii):jd;function kf(e,t){return e===t||ys(e,t,Os(t))}function Nf(e,t,r){return r=typeof r=="function"?r:c,ys(e,t,Os(t),r)}function jf(e){return wl(e)&&e!=+e}function Tf(e){if(cu(e))throw new F(Te);return fa(e)}function Cf(e){return e===null}function Sf(e){return e==null}function wl(e){return typeof e=="number"||je(e)&&Je(e)==Ot}function zr(e){if(!je(e)||Je(e)!=We)return!1;var t=an(e);if(t===null)return!0;var r=ae.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&tn.call(r)==ko}var Vs=Oi?dt(Oi):Td;function Af(e){return bl(e)&&e>=-9007199254740991&&e<=de}var kl=Mi?dt(Mi):Cd;function Ln(e){return typeof e=="string"||!W(e)&&je(e)&&Je(e)==me}function ht(e){return typeof e=="symbol"||je(e)&&Je(e)==Ie}var Sr=Bi?dt(Bi):Sd;function Df(e){return e===c}function Rf(e){return je(e)&&Xe(e)==gt}function Pf(e){return je(e)&&Je(e)==Tt}var Ef=Nn(_s),Lf=Nn(function(e,t){return e<=t});function Nl(e){if(!e)return[];if(nt(e))return Ln(e)?Ct(e):rt(e);if(Pr&&e[Pr])return uo(e[Pr]());var t=Xe(e),r=t==Ve?cs:t==I?Jr:Ar;return r(e)}function zt(e){if(!e)return e===0?e:0;if(e=jt(e),e===Y||e===-1/0){var t=e<0?-1:1;return t*It}return e===e?e:0}function $(e){var t=zt(e),r=t%1;return t===t?r?t-r:t:0}function jl(e){return e?or($(e),0,g):0}function jt(e){if(typeof e=="number")return e;if(ht(e))return Ee;if(Ne(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ne(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=qi(e);var r=fc.test(e);return r||xc.test(e)?Vc(e.slice(2),r?2:8):hc.test(e)?Ee:+e}function Tl(e){return Et(e,st(e))}function If(e){return e?or($(e),-9007199254740991,de):e===0?e:0}function re(e){return e==null?"":ut(e)}var Of=jr(function(e,t){if(Hr(t)||nt(t)){Et(t,$e(t),e);return}for(var r in t)ae.call(t,r)&&Mr(e,r,t[r])}),Cl=jr(function(e,t){Et(t,st(t),e)}),In=jr(function(e,t,r,s){Et(t,st(t),e,s)}),Mf=jr(function(e,t,r,s){Et(t,$e(t),e,s)}),Bf=Ut(ms);function Ff(e,t){var r=Nr(e);return t==null?r:ia(r,t)}var Wf=q(function(e,t){e=xe(e);var r=-1,s=t.length,i=s>2?t[2]:c;for(i&&Qe(t[0],t[1],i)&&(s=1);++r<s;)for(var l=t[r],o=st(l),d=-1,m=o.length;++d<m;){var v=o[d],y=e[v];(y===c||At(y,_r[v])&&!ae.call(e,v))&&(e[v]=l[v])}return e}),$f=q(function(e){return e.push(c,qa),ot(Sl,c,e)});function Uf(e,t){return Wi(e,E(t,3),Pt)}function Hf(e,t){return Wi(e,E(t,3),ps)}function qf(e,t){return e==null?e:xs(e,E(t,3),st)}function zf(e,t){return e==null?e:da(e,E(t,3),st)}function Gf(e,t){return e&&Pt(e,E(t,3))}function Vf(e,t){return e&&ps(e,E(t,3))}function Kf(e){return e==null?[]:pn(e,$e(e))}function Xf(e){return e==null?[]:pn(e,st(e))}function Ks(e,t,r){var s=e==null?c:dr(e,t);return s===c?r:s}function Yf(e,t){return e!=null&&Va(e,t,vd)}function Xs(e,t){return e!=null&&Va(e,t,yd)}var Zf=Fa(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=rn.call(t)),e[t]=r},Zs(it)),Jf=Fa(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=rn.call(t)),ae.call(e,t)?e[t].push(r):e[t]=[r]},E),Qf=q(Fr);function $e(e){return nt(e)?na(e):bs(e)}function st(e){return nt(e)?na(e,!0):Ad(e)}function em(e,t){var r={};return t=E(t,3),Pt(e,function(s,i,l){Wt(r,t(s,i,l),s)}),r}function tm(e,t){var r={};return t=E(t,3),Pt(e,function(s,i,l){Wt(r,i,t(s,i,l))}),r}var rm=jr(function(e,t,r){gn(e,t,r)}),Sl=jr(function(e,t,r,s){gn(e,t,r,s)}),nm=Ut(function(e,t){var r={};if(e==null)return r;var s=!1;t=_e(t,function(l){return l=rr(l,e),s||(s=l.length>1),l}),Et(e,Ls(e),r),s&&(r=wt(r,ee|he|ge,Yd));for(var i=t.length;i--;)Ts(r,t[i]);return r});function sm(e,t){return Al(e,Pn(E(t)))}var im=Ut(function(e,t){return e==null?{}:Rd(e,t)});function Al(e,t){if(e==null)return{};var r=_e(Ls(e),function(s){return[s]});return t=E(t),ba(e,r,function(s,i){return t(s,i[0])})}function am(e,t,r){t=rr(t,e);var s=-1,i=t.length;for(i||(i=1,e=c);++s<i;){var l=e==null?c:e[Lt(t[s])];l===c&&(s=i,l=r),e=qt(l)?l.call(e):l}return e}function lm(e,t,r){return e==null?e:$r(e,t,r)}function cm(e,t,r,s){return s=typeof s=="function"?s:c,e==null?e:$r(e,t,r,s)}var Dl=Ua($e),Rl=Ua(st);function om(e,t,r){var s=W(e),i=s||sr(e)||Sr(e);if(t=E(t,4),r==null){var l=e&&e.constructor;i?r=s?new l:[]:Ne(e)?r=qt(l)?Nr(an(e)):{}:r={}}return(i?yt:Pt)(e,function(o,d,m){return t(r,o,d,m)}),r}function dm(e,t){return e==null?!0:Ts(e,t)}function um(e,t,r){return e==null?e:ja(e,t,As(r))}function hm(e,t,r,s){return s=typeof s=="function"?s:c,e==null?e:ja(e,t,As(r),s)}function Ar(e){return e==null?[]:ls(e,$e(e))}function fm(e){return e==null?[]:ls(e,st(e))}function mm(e,t,r){return r===c&&(r=t,t=c),r!==c&&(r=jt(r),r=r===r?r:0),t!==c&&(t=jt(t),t=t===t?t:0),or(jt(e),t,r)}function xm(e,t,r){return t=zt(t),r===c?(r=t,t=0):r=zt(r),e=jt(e),bd(e,t,r)}function pm(e,t,r){if(r&&typeof r!="boolean"&&Qe(e,t,r)&&(t=r=c),r===c&&(typeof t=="boolean"?(r=t,t=c):typeof e=="boolean"&&(r=e,e=c)),e===c&&t===c?(e=0,t=1):(e=zt(e),t===c?(t=e,e=0):t=zt(t)),e>t){var s=e;e=t,t=s}if(r||e%1||t%1){var i=ta();return Ke(e+i*(t-e+Gc("1e-"+((i+"").length-1))),t)}return ks(e,t)}var gm=Tr(function(e,t,r){return t=t.toLowerCase(),e+(r?Pl(t):t)});function Pl(e){return Ys(re(e).toLowerCase())}function El(e){return e=re(e),e&&e.replace(gc,io).replace(Oc,"")}function vm(e,t,r){e=re(e),t=ut(t);var s=e.length;r=r===c?s:or($(r),0,s);var i=r;return r-=t.length,r>=0&&e.slice(r,i)==t}function ym(e){return e=re(e),e&&Zl.test(e)?e.replace(di,ao):e}function bm(e){return e=re(e),e&&nc.test(e)?e.replace(zn,"\\$&"):e}var _m=Tr(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),wm=Tr(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),km=Oa("toLowerCase");function Nm(e,t,r){e=re(e),t=$(t);var s=t?yr(e):0;if(!t||s>=t)return e;var i=(t-s)/2;return kn(dn(i),r)+e+kn(on(i),r)}function jm(e,t,r){e=re(e),t=$(t);var s=t?yr(e):0;return t&&s<t?e+kn(t-s,r):e}function Tm(e,t,r){e=re(e),t=$(t);var s=t?yr(e):0;return t&&s<t?kn(t-s,r)+e:e}function Cm(e,t,r){return r||t==null?t=0:t&&(t=+t),Eo(re(e).replace(Gn,""),t||0)}function Sm(e,t,r){return(r?Qe(e,t,r):t===c)?t=1:t=$(t),Ns(re(e),t)}function Am(){var e=arguments,t=re(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Dm=Tr(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function Rm(e,t,r){return r&&typeof r!="number"&&Qe(e,t,r)&&(t=r=c),r=r===c?g:r>>>0,r?(e=re(e),e&&(typeof t=="string"||t!=null&&!Vs(t))&&(t=ut(t),!t&&vr(e))?nr(Ct(e),0,r):e.split(t,r)):[]}var Pm=Tr(function(e,t,r){return e+(r?" ":"")+Ys(t)});function Em(e,t,r){return e=re(e),r=r==null?0:or($(r),0,e.length),t=ut(t),e.slice(r,r+t.length)==t}function Lm(e,t,r){var s=a.templateSettings;r&&Qe(e,t,r)&&(t=c),e=re(e),t=In({},t,s,Ha);var i=In({},t.imports,s.imports,Ha),l=$e(i),o=ls(i,l),d,m,v=0,y=t.interpolate||Vr,b="__p += '",k=os((t.escape||Vr).source+"|"+y.source+"|"+(y===ui?uc:Vr).source+"|"+(t.evaluate||Vr).source+"|$","g"),S="//# sourceURL="+(ae.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$c+"]")+`
`;e.replace(k,function(M,V,X,ft,et,mt){return X||(X=ft),b+=e.slice(v,mt).replace(vc,lo),V&&(d=!0,b+=`' +
__e(`+V+`) +
'`),et&&(m=!0,b+=`';
`+et+`;
__p += '`),X&&(b+=`' +
((__t = (`+X+`)) == null ? '' : __t) +
'`),v=mt+M.length,M}),b+=`';
`;var O=ae.call(t,"variable")&&t.variable;if(!O)b=`with (obj) {
`+b+`
}
`;else if(oc.test(O))throw new F(le);b=(m?b.replace(Vl,""):b).replace(Kl,"$1").replace(Xl,"$1;"),b="function("+(O||"obj")+`) {
`+(O?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(d?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var H=Il(function(){return Q(l,S+"return "+b).apply(c,o)});if(H.source=b,Gs(H))throw H;return H}function Im(e){return re(e).toLowerCase()}function Om(e){return re(e).toUpperCase()}function Mm(e,t,r){if(e=re(e),e&&(r||t===c))return qi(e);if(!e||!(t=ut(t)))return e;var s=Ct(e),i=Ct(t),l=zi(s,i),o=Gi(s,i)+1;return nr(s,l,o).join("")}function Bm(e,t,r){if(e=re(e),e&&(r||t===c))return e.slice(0,Ki(e)+1);if(!e||!(t=ut(t)))return e;var s=Ct(e),i=Gi(s,Ct(t))+1;return nr(s,0,i).join("")}function Fm(e,t,r){if(e=re(e),e&&(r||t===c))return e.replace(Gn,"");if(!e||!(t=ut(t)))return e;var s=Ct(e),i=zi(s,Ct(t));return nr(s,i).join("")}function Wm(e,t){var r=w,s=Pe;if(Ne(t)){var i="separator"in t?t.separator:i;r="length"in t?$(t.length):r,s="omission"in t?ut(t.omission):s}e=re(e);var l=e.length;if(vr(e)){var o=Ct(e);l=o.length}if(r>=l)return e;var d=r-yr(s);if(d<1)return s;var m=o?nr(o,0,d).join(""):e.slice(0,d);if(i===c)return m+s;if(o&&(d+=m.length-d),Vs(i)){if(e.slice(d).search(i)){var v,y=m;for(i.global||(i=os(i.source,re(hi.exec(i))+"g")),i.lastIndex=0;v=i.exec(y);)var b=v.index;m=m.slice(0,b===c?d:b)}}else if(e.indexOf(ut(i),d)!=d){var k=m.lastIndexOf(i);k>-1&&(m=m.slice(0,k))}return m+s}function $m(e){return e=re(e),e&&Yl.test(e)?e.replace(oi,xo):e}var Um=Tr(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Ys=Oa("toUpperCase");function Ll(e,t,r){return e=re(e),t=r?c:t,t===c?oo(e)?vo(e):eo(e):e.match(t)||[]}var Il=q(function(e,t){try{return ot(e,c,t)}catch(r){return Gs(r)?r:new F(r)}}),Hm=Ut(function(e,t){return yt(t,function(r){r=Lt(r),Wt(e,r,qs(e[r],e))}),e});function qm(e){var t=e==null?0:e.length,r=E();return e=t?_e(e,function(s){if(typeof s[1]!="function")throw new bt(A);return[r(s[0]),s[1]]}):[],q(function(s){for(var i=-1;++i<t;){var l=e[i];if(ot(l[0],this,s))return ot(l[1],this,s)}})}function zm(e){return xd(wt(e,ee))}function Zs(e){return function(){return e}}function Gm(e,t){return e==null||e!==e?t:e}var Vm=Ba(),Km=Ba(!0);function it(e){return e}function Js(e){return ma(typeof e=="function"?e:wt(e,ee))}function Xm(e){return pa(wt(e,ee))}function Ym(e,t){return ga(e,wt(t,ee))}var Zm=q(function(e,t){return function(r){return Fr(r,e,t)}}),Jm=q(function(e,t){return function(r){return Fr(e,r,t)}});function Qs(e,t,r){var s=$e(t),i=pn(t,s);r==null&&!(Ne(t)&&(i.length||!s.length))&&(r=t,t=e,e=this,i=pn(t,$e(t)));var l=!(Ne(r)&&"chain"in r)||!!r.chain,o=qt(e);return yt(i,function(d){var m=t[d];e[d]=m,o&&(e.prototype[d]=function(){var v=this.__chain__;if(l||v){var y=e(this.__wrapped__),b=y.__actions__=rt(this.__actions__);return b.push({func:m,args:arguments,thisArg:e}),y.__chain__=v,y}return m.apply(e,Zt([this.value()],arguments))})}),e}function Qm(){return ze._===this&&(ze._=No),this}function ei(){}function ex(e){return e=$(e),q(function(t){return va(t,e)})}var tx=Rs(_e),rx=Rs(Fi),nx=Rs(rs);function Ol(e){return Bs(e)?ns(Lt(e)):Pd(e)}function sx(e){return function(t){return e==null?c:dr(e,t)}}var ix=Wa(),ax=Wa(!0);function ti(){return[]}function ri(){return!1}function lx(){return{}}function cx(){return""}function ox(){return!0}function dx(e,t){if(e=$(e),e<1||e>de)return[];var r=g,s=Ke(e,g);t=E(t),e-=g;for(var i=as(s,t);++r<e;)t(r);return i}function ux(e){return W(e)?_e(e,Lt):ht(e)?[e]:rt(rl(re(e)))}function hx(e){var t=++wo;return re(e)+t}var fx=wn(function(e,t){return e+t},0),mx=Ps("ceil"),xx=wn(function(e,t){return e/t},1),px=Ps("floor");function gx(e){return e&&e.length?xn(e,it,gs):c}function vx(e,t){return e&&e.length?xn(e,E(t,2),gs):c}function yx(e){return Ui(e,it)}function bx(e,t){return Ui(e,E(t,2))}function _x(e){return e&&e.length?xn(e,it,_s):c}function wx(e,t){return e&&e.length?xn(e,E(t,2),_s):c}var kx=wn(function(e,t){return e*t},1),Nx=Ps("round"),jx=wn(function(e,t){return e-t},0);function Tx(e){return e&&e.length?is(e,it):0}function Cx(e,t){return e&&e.length?is(e,E(t,2)):0}return a.after=Kh,a.ary=fl,a.assign=Of,a.assignIn=Cl,a.assignInWith=In,a.assignWith=Mf,a.at=Bf,a.before=ml,a.bind=qs,a.bindAll=Hm,a.bindKey=xl,a.castArray=lf,a.chain=dl,a.chunk=xu,a.compact=pu,a.concat=gu,a.cond=qm,a.conforms=zm,a.constant=Zs,a.countBy=jh,a.create=Ff,a.curry=pl,a.curryRight=gl,a.debounce=vl,a.defaults=Wf,a.defaultsDeep=$f,a.defer=Xh,a.delay=Yh,a.difference=vu,a.differenceBy=yu,a.differenceWith=bu,a.drop=_u,a.dropRight=wu,a.dropRightWhile=ku,a.dropWhile=Nu,a.fill=ju,a.filter=Ch,a.flatMap=Dh,a.flatMapDeep=Rh,a.flatMapDepth=Ph,a.flatten=al,a.flattenDeep=Tu,a.flattenDepth=Cu,a.flip=Zh,a.flow=Vm,a.flowRight=Km,a.fromPairs=Su,a.functions=Kf,a.functionsIn=Xf,a.groupBy=Eh,a.initial=Du,a.intersection=Ru,a.intersectionBy=Pu,a.intersectionWith=Eu,a.invert=Zf,a.invertBy=Jf,a.invokeMap=Ih,a.iteratee=Js,a.keyBy=Oh,a.keys=$e,a.keysIn=st,a.map=An,a.mapKeys=em,a.mapValues=tm,a.matches=Xm,a.matchesProperty=Ym,a.memoize=Rn,a.merge=rm,a.mergeWith=Sl,a.method=Zm,a.methodOf=Jm,a.mixin=Qs,a.negate=Pn,a.nthArg=ex,a.omit=nm,a.omitBy=sm,a.once=Jh,a.orderBy=Mh,a.over=tx,a.overArgs=Qh,a.overEvery=rx,a.overSome=nx,a.partial=zs,a.partialRight=yl,a.partition=Bh,a.pick=im,a.pickBy=Al,a.property=Ol,a.propertyOf=sx,a.pull=Mu,a.pullAll=cl,a.pullAllBy=Bu,a.pullAllWith=Fu,a.pullAt=Wu,a.range=ix,a.rangeRight=ax,a.rearg=ef,a.reject=$h,a.remove=$u,a.rest=tf,a.reverse=Us,a.sampleSize=Hh,a.set=lm,a.setWith=cm,a.shuffle=qh,a.slice=Uu,a.sortBy=Vh,a.sortedUniq=Xu,a.sortedUniqBy=Yu,a.split=Rm,a.spread=rf,a.tail=Zu,a.take=Ju,a.takeRight=Qu,a.takeRightWhile=eh,a.takeWhile=th,a.tap=ph,a.throttle=nf,a.thru=Sn,a.toArray=Nl,a.toPairs=Dl,a.toPairsIn=Rl,a.toPath=ux,a.toPlainObject=Tl,a.transform=om,a.unary=sf,a.union=rh,a.unionBy=nh,a.unionWith=sh,a.uniq=ih,a.uniqBy=ah,a.uniqWith=lh,a.unset=dm,a.unzip=Hs,a.unzipWith=ol,a.update=um,a.updateWith=hm,a.values=Ar,a.valuesIn=fm,a.without=ch,a.words=Ll,a.wrap=af,a.xor=oh,a.xorBy=dh,a.xorWith=uh,a.zip=hh,a.zipObject=fh,a.zipObjectDeep=mh,a.zipWith=xh,a.entries=Dl,a.entriesIn=Rl,a.extend=Cl,a.extendWith=In,Qs(a,a),a.add=fx,a.attempt=Il,a.camelCase=gm,a.capitalize=Pl,a.ceil=mx,a.clamp=mm,a.clone=cf,a.cloneDeep=df,a.cloneDeepWith=uf,a.cloneWith=of,a.conformsTo=hf,a.deburr=El,a.defaultTo=Gm,a.divide=xx,a.endsWith=vm,a.eq=At,a.escape=ym,a.escapeRegExp=bm,a.every=Th,a.find=Sh,a.findIndex=sl,a.findKey=Uf,a.findLast=Ah,a.findLastIndex=il,a.findLastKey=Hf,a.floor=px,a.forEach=ul,a.forEachRight=hl,a.forIn=qf,a.forInRight=zf,a.forOwn=Gf,a.forOwnRight=Vf,a.get=Ks,a.gt=ff,a.gte=mf,a.has=Yf,a.hasIn=Xs,a.head=ll,a.identity=it,a.includes=Lh,a.indexOf=Au,a.inRange=xm,a.invoke=Qf,a.isArguments=fr,a.isArray=W,a.isArrayBuffer=xf,a.isArrayLike=nt,a.isArrayLikeObject=De,a.isBoolean=pf,a.isBuffer=sr,a.isDate=gf,a.isElement=vf,a.isEmpty=yf,a.isEqual=bf,a.isEqualWith=_f,a.isError=Gs,a.isFinite=wf,a.isFunction=qt,a.isInteger=bl,a.isLength=En,a.isMap=_l,a.isMatch=kf,a.isMatchWith=Nf,a.isNaN=jf,a.isNative=Tf,a.isNil=Sf,a.isNull=Cf,a.isNumber=wl,a.isObject=Ne,a.isObjectLike=je,a.isPlainObject=zr,a.isRegExp=Vs,a.isSafeInteger=Af,a.isSet=kl,a.isString=Ln,a.isSymbol=ht,a.isTypedArray=Sr,a.isUndefined=Df,a.isWeakMap=Rf,a.isWeakSet=Pf,a.join=Lu,a.kebabCase=_m,a.last=Nt,a.lastIndexOf=Iu,a.lowerCase=wm,a.lowerFirst=km,a.lt=Ef,a.lte=Lf,a.max=gx,a.maxBy=vx,a.mean=yx,a.meanBy=bx,a.min=_x,a.minBy=wx,a.stubArray=ti,a.stubFalse=ri,a.stubObject=lx,a.stubString=cx,a.stubTrue=ox,a.multiply=kx,a.nth=Ou,a.noConflict=Qm,a.noop=ei,a.now=Dn,a.pad=Nm,a.padEnd=jm,a.padStart=Tm,a.parseInt=Cm,a.random=pm,a.reduce=Fh,a.reduceRight=Wh,a.repeat=Sm,a.replace=Am,a.result=am,a.round=Nx,a.runInContext=f,a.sample=Uh,a.size=zh,a.snakeCase=Dm,a.some=Gh,a.sortedIndex=Hu,a.sortedIndexBy=qu,a.sortedIndexOf=zu,a.sortedLastIndex=Gu,a.sortedLastIndexBy=Vu,a.sortedLastIndexOf=Ku,a.startCase=Pm,a.startsWith=Em,a.subtract=jx,a.sum=Tx,a.sumBy=Cx,a.template=Lm,a.times=dx,a.toFinite=zt,a.toInteger=$,a.toLength=jl,a.toLower=Im,a.toNumber=jt,a.toSafeInteger=If,a.toString=re,a.toUpper=Om,a.trim=Mm,a.trimEnd=Bm,a.trimStart=Fm,a.truncate=Wm,a.unescape=$m,a.uniqueId=hx,a.upperCase=Um,a.upperFirst=Ys,a.each=ul,a.eachRight=hl,a.first=ll,Qs(a,function(){var e={};return Pt(a,function(t,r){ae.call(a.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),a.VERSION=R,yt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){a[e].placeholder=a}),yt(["drop","take"],function(e,t){K.prototype[e]=function(r){r=r===c?1:Be($(r),0);var s=this.__filtered__&&!t?new K(this):this.clone();return s.__filtered__?s.__takeCount__=Ke(r,s.__takeCount__):s.__views__.push({size:Ke(r,g),type:e+(s.__dir__<0?"Right":"")}),s},K.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),yt(["filter","map","takeWhile"],function(e,t){var r=t+1,s=r==T||r==ie;K.prototype[e]=function(i){var l=this.clone();return l.__iteratees__.push({iteratee:E(i,3),type:r}),l.__filtered__=l.__filtered__||s,l}}),yt(["head","last"],function(e,t){var r="take"+(t?"Right":"");K.prototype[e]=function(){return this[r](1).value()[0]}}),yt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");K.prototype[e]=function(){return this.__filtered__?new K(this):this[r](1)}}),K.prototype.compact=function(){return this.filter(it)},K.prototype.find=function(e){return this.filter(e).head()},K.prototype.findLast=function(e){return this.reverse().find(e)},K.prototype.invokeMap=q(function(e,t){return typeof e=="function"?new K(this):this.map(function(r){return Fr(r,e,t)})}),K.prototype.reject=function(e){return this.filter(Pn(E(e)))},K.prototype.slice=function(e,t){e=$(e);var r=this;return r.__filtered__&&(e>0||t<0)?new K(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==c&&(t=$(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},K.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},K.prototype.toArray=function(){return this.take(g)},Pt(K.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),s=/^(?:head|last)$/.test(t),i=a[s?"take"+(t=="last"?"Right":""):t],l=s||/^find/.test(t);i&&(a.prototype[t]=function(){var o=this.__wrapped__,d=s?[1]:arguments,m=o instanceof K,v=d[0],y=m||W(o),b=function(V){var X=i.apply(a,Zt([V],d));return s&&k?X[0]:X};y&&r&&typeof v=="function"&&v.length!=1&&(m=y=!1);var k=this.__chain__,S=!!this.__actions__.length,O=l&&!k,H=m&&!S;if(!l&&y){o=H?o:new K(this);var M=e.apply(o,d);return M.__actions__.push({func:Sn,args:[b],thisArg:c}),new _t(M,k)}return O&&H?e.apply(this,d):(M=this.thru(b),O?s?M.value()[0]:M.value():M)})}),yt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Qr[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);a.prototype[e]=function(){var i=arguments;if(s&&!this.__chain__){var l=this.value();return t.apply(W(l)?l:[],i)}return this[r](function(o){return t.apply(W(o)?o:[],i)})}}),Pt(K.prototype,function(e,t){var r=a[t];if(r){var s=r.name+"";ae.call(kr,s)||(kr[s]=[]),kr[s].push({name:t,func:r})}}),kr[_n(c,Se).name]=[{name:"wrapper",func:c}],K.prototype.clone=Wo,K.prototype.reverse=$o,K.prototype.value=Uo,a.prototype.at=gh,a.prototype.chain=vh,a.prototype.commit=yh,a.prototype.next=bh,a.prototype.plant=wh,a.prototype.reverse=kh,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=Nh,a.prototype.first=a.prototype.head,Pr&&(a.prototype[Pr]=_h),a},br=yo();ir?((ir.exports=br)._=br,Jn._=br):ze._=br}).call(Hx)}(Gr,Gr.exports)),Gr.exports}var Ul=qx();const zx={input:({data:u})=>n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-surface dark:bg-healthcare-surface-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsx("div",{className:"font-bold text-base text-healthcare-text-primary dark:text-healthcare-text-primary-dark border-b border-healthcare-border dark:border-healthcare-border-dark pb-2 mb-3",children:u.label}),u.metrics&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Count"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:u.metrics.count||"-"})]}),u.metrics.frequency&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Frequency"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-purple dark:text-healthcare-purple-dark",children:u.metrics.frequency})]})]})]}),bed_placement_input:({data:u})=>(console.log("Rendering bed_placement_input with data:",u),n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-surface dark:bg-healthcare-surface-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark flex items-center justify-center mr-2",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:u.label})]}),u.description&&n.jsx("p",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-3",children:u.description}),n.jsxs("div",{className:"bg-gray-900 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Total:"}),n.jsxs("span",{className:"text-sm font-bold text-white",children:[u.count||"-"," patients"]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Avg. Duration:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.avgDuration!==void 0?`${u.avgDuration} min`:"-"})]}),(u.metrics&&u.metrics.last24h||u.last24h)&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Last 24h:"}),n.jsxs("span",{className:"text-sm font-bold text-white",children:[u.metrics&&u.metrics.last24h||u.last24h||"-"," patients"]})]}),(u.metrics&&u.metrics.last7d||u.last7d)&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Last 7d:"}),n.jsxs("span",{className:"text-sm font-bold text-white",children:[u.metrics&&u.metrics.last7d||u.last7d||"-"," patients"]})]})]})]})),bed_placement_process:({data:u})=>(console.log("Rendering bed_placement_process with data:",u),n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-surface dark:bg-healthcare-surface-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-healthcare-success dark:bg-healthcare-success-dark flex items-center justify-center mr-2",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),n.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:u.label})]}),u.description&&n.jsx("p",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-3",children:u.description}),n.jsxs("div",{className:"bg-gray-900 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Cases:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.count||"-"})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Avg. Time:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.avgDuration?`${u.avgDuration} min`:u.metrics&&u.metrics.avgTime||u.avgTime||"10-30 min"})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Bottlenecks:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics&&u.metrics.bottlenecks?typeof u.metrics.bottlenecks=="number"?(u.metrics.bottlenecks*100).toFixed(0)+"%":u.metrics.bottlenecks:u.bottlenecks||"None"})]})]})]})),bed_placement_result:({data:u})=>(console.log("Rendering bed_placement_result with data:",u),n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-surface dark:bg-healthcare-surface-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsxs("div",{className:"flex items-center mb-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-healthcare-accent dark:bg-healthcare-accent-dark flex items-center justify-center mr-2",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:u.label})]}),u.description&&n.jsx("p",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-3",children:u.description}),n.jsxs("div",{className:"bg-gray-900 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Total Cases:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.count||"-"})]}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Avg. Duration:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.avgDuration!==void 0?`${u.avgDuration} min`:"-"})]}),(u.metrics&&u.metrics.successRate||u.successRate)&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Success Rate:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics&&u.metrics.successRate?typeof u.metrics.successRate=="number"?(u.metrics.successRate*100).toFixed(0)+"%":u.metrics.successRate:u.successRate||"94%"})]}),(u.metrics&&u.metrics.avgTotalTime||u.avgTotalTime||u.metrics&&u.metrics.avgTime||u.avgTime)&&n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-white opacity-70",children:"Avg. Total Time:"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics&&u.metrics.avgTotalTime||u.avgTotalTime||u.metrics&&u.metrics.avgTime||u.avgTime})]})]})]})),process:({data:u})=>n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-surface dark:bg-healthcare-surface-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsx("div",{className:"font-bold text-base text-healthcare-text-primary dark:text-healthcare-text-primary-dark border-b border-healthcare-border dark:border-healthcare-border-dark pb-2 mb-3",children:u.label}),u.metrics&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Cases"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:u.metrics.caseCount||u.metrics.count})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Events"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-info dark:text-healthcare-info-dark",children:u.metrics.eventCount||"-"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Frequency"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-purple dark:text-healthcare-purple-dark",children:u.metrics.frequency||"100%"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Avg Time"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-success dark:text-healthcare-success-dark",children:u.metrics.avgTime})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Min Time"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-success-light dark:text-healthcare-success-light-dark",children:u.metrics.minTime||"-"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Max Time"}),n.jsx("span",{className:"text-sm font-bold text-healthcare-warning dark:text-healthcare-warning-dark",children:u.metrics.maxTime||"-"})]})]}),n.jsxs("div",{className:"col-span-2 mt-1",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Performance"}),n.jsx("span",{className:"text-xs font-medium text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:u.metrics.performance||"100%"})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-healthcare-primary dark:bg-healthcare-primary-dark h-2.5 rounded-full",style:{width:u.metrics.performance||"100%"}})})]})]})]}),decision:({data:u})=>n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-purple dark:bg-healthcare-purple-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsx("div",{className:"font-bold text-base text-white border-b border-white/20 pb-2 mb-3",children:u.label}),u.metrics&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Cases"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.caseCount||u.metrics.count})]}),u.metrics.last24h&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Last 24h"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.last24h})]}),u.metrics.last7d&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Last 7d"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.last7d})]}),!u.metrics.last24h&&!u.metrics.last7d&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Paths"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.pathCount||"-"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Avg Time"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.avgTime||(u.metrics.avgDuration?u.metrics.avgDuration+"m":"-")})]}),u.metrics.bottlenecks?n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Bottlenecks"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.bottlenecks})]}):n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Complexity"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.complexity||"Medium"})]})]})]})]}),result:({data:u})=>n.jsxs("div",{className:"healthcare-card p-4 shadow-lg rounded-md bg-healthcare-teal dark:bg-healthcare-teal-dark border-2 border-healthcare-border dark:border-healthcare-border-dark hover:border-healthcare-primary dark:hover:border-healthcare-primary-dark transition-all duration-200",style:{width:"400px"},children:[n.jsx(ue,{type:"target",position:"left",id:"target"}),n.jsx(ue,{type:"source",position:"right",id:"source"}),n.jsx(ue,{type:"source",position:"bottom",id:"source-bottom"}),n.jsx(ue,{type:"target",position:"top",id:"target-top"}),n.jsx("div",{className:"font-bold text-base text-white border-b border-white/20 pb-2 mb-3",children:u.label}),u.metrics&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Cases"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.caseCount||u.metrics.count})]}),u.metrics.successRate?n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Success Rate"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.successRate})]}):n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Frequency"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.frequency||"100%"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Avg Time"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.avgTotalTime||u.metrics.avgTime||(u.metrics.avgDuration?u.metrics.avgDuration+"m":"-")})]}),u.metrics.last30d?n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Last 30d"}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.last30d})]}):n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs font-medium text-white/70",children:"Outcome"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-1 ${u.metrics.outcome==="Positive"?"bg-healthcare-success":u.metrics.outcome==="Negative"?"bg-healthcare-danger":"bg-healthcare-warning"}`}),n.jsx("span",{className:"text-sm font-bold text-white",children:u.metrics.outcome||"Neutral"})]})]})]})]})]})},Hl=400,ql=220,Gx={type:"default",animated:!0,markerEnd:{type:ai.ArrowClosed,width:30,height:30,color:"#ea580c"},style:{strokeWidth:3,stroke:"#ea580c",strokeDasharray:"5,5"}},si=u=>{const pe={strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"},c=(u==null?void 0:u.count)||0,R=c>0?Math.min(Math.max(Math.log10(c)*1.2,3),6):4;return u!=null&&u.isMainFlow?{...pe,strokeWidth:R+1,stroke:"#ea580c",animated:!0}:u!=null&&u.isResultFlow?{...pe,strokeWidth:R,stroke:"#0e7490",strokeDasharray:"8,4",animated:!0}:{...pe,strokeWidth:R,stroke:"#0284c7",animated:c>100}},ii=(u,pe,c="vertical")=>{if(!u||u.length===0)return{nodes:u,edges:pe};const R=new Fl.graphlib.Graph;R.setDefaultEdgeLabel(()=>({}));const L=c==="horizontal";R.setGraph({rankdir:L?"LR":"TB",nodesep:L?200:150,ranksep:L?150:200,edgesep:80,marginx:50,marginy:50,align:"UL",acyclicer:"greedy",ranker:"network-simplex"}),u.forEach(le=>{R.setNode(le.id,{width:Hl,height:ql})}),pe.forEach(le=>{R.setEdge(le.source,le.target)}),Fl.layout(R);const Te=u.map(le=>{const z=R.node(le.id);return{...le,targetPosition:L?"left":"top",sourcePosition:L?"right":"bottom",position:{x:z.x-Hl/2,y:z.y-ql/2}}}),A=pe.map(le=>({...le,type:"default",sourceHandle:L?"source":"source-bottom",targetHandle:L?"target":"target-top",style:{...le.style,stroke:"#fff",strokeWidth:2},animated:!0,markerEnd:{type:"arrowclosed"},curvature:.3}));return{nodes:Te,edges:A}},Vx=Bl.forwardRef(({data:u,savedLayout:pe,onNodeClick:c,onEdgeClick:R,workflowName:L,processType:Te,flowDirection:A="vertical"},le)=>{const[z,Z,ne]=Dx([]),[ee,he,ge]=Rx([]),[Ce,He]=D.useState(null),[ce,Se]=D.useState(null),G=D.useRef(null),we=D.useCallback(async()=>{try{const N=new URLSearchParams(window.location.search),T=N.get("hospital")||"Virtua Marlton Hospital",te=L||N.get("workflow")||"Admissions",ie=N.get("timeRange")||"24 Hours";console.log("Fetching saved layout for:",{hospital:T,workflow:te,timeRange:ie});const Y=await Mn.get("/improvement/process/layout",{params:{hospital:T,workflow:te,time_range:ie}});return console.log("Fetched layout response:",Y.data),Y.data.layout?(He(Y.data.layout),Y.data.layout.viewport&&(console.log("Found viewport data in fetched layout:",Y.data.layout.viewport),Se(Y.data.layout.viewport)),Y.data.layout):null}catch(N){return console.error("Error fetching saved layout:",N),null}},[L]);D.useEffect(()=>{const N=document.head.querySelector('meta[name="csrf-token"]');N&&(Mn.defaults.headers.common["X-CSRF-TOKEN"]=N.content),pe||we()},[pe,we]);const U=D.useCallback(Ul.debounce(async N=>{try{if(!N)return;const T={x:N.x,y:N.y,zoom:N.zoom},te=new URLSearchParams(window.location.search),ie=L||te.get("workflow")||"Admissions";let Y=Te||te.get("processType")||ie.toLowerCase().replace(/\s+/g,"_")||"admission";Y=Y.trim()||"default_process";const de={process_type:Y,layout_data:T,hospital:"Virtua Marlton Hospital",workflow:ie,time_range:"24 Hours"};console.log("Saving viewport with exact payload:",de),await Mn.post("/improvement/process/viewport",de)}catch(T){console.error("Viewport save error - basic info:",T.message)}},1500),[L,Te]),J=D.useCallback(Ul.debounce(async N=>{try{if(!N||N.length===0)return;const T=new URLSearchParams(window.location.search),te=L||T.get("workflow")||"Admissions";let ie=Te||T.get("processType")||te.toLowerCase().replace(/\s+/g,"_")||"admission";ie=ie.trim()||"default_process";const Y={};if(N.forEach(de=>{de&&de.id&&de.position&&(Y[de.id]={x:Math.round(de.position.x),y:Math.round(de.position.y)})}),Object.keys(Y).length>0){const de={process_type:ie,layout_data:Y,hospital:"Virtua Marlton Hospital",workflow:te,time_range:"24 Hours"};console.log("Saving layout with payload:",de),await Mn.post("/improvement/process/layout",de)}}catch(T){console.error("Layout save error - basic info:",T.message)}},2e3),[L,Te]),se=(N,T)=>N==="emergency_department"||N==="ed"||N==="input_ed"?{x:150,y:100}:N==="operating_room"||N==="or"||N==="input_or"?{x:350,y:100}:N==="direct_admissions"||N==="input_direct"?{x:550,y:100}:N==="transfers"||N==="input_transfers"?{x:750,y:100}:N==="bed_request"||N==="process_bed_request"?{x:500,y:300}:N==="bed_assignment"||N==="process_bed_assignment"?{x:500,y:500}:N==="patient_bedding"||N==="bedding"||N==="process_patient_bedding"?{x:500,y:700}:N==="decision"?{x:500,y:400}:N==="unit"?{x:500,y:600}:T==="input"?{x:150+Math.floor(Math.random()*4)*200,y:100}:T==="process"?{x:500,y:400}:T==="decision"?{x:500,y:500}:T==="result"?{x:500,y:700}:{x:500,y:400};D.useEffect(()=>{if(!(u!=null&&u.nodes)||!(u!=null&&u.edges)){console.error("Missing nodes or edges data:",u);return}console.log("Processing diagram data:",u);const N=u.nodes[0];console.log("First node structure:",N);const te=new URLSearchParams(window.location.search).get("workflow"),ie=u.nodes.some(h=>["input_ed","input_or","input_direct","input_transfers","process_bed_request","process_bed_assignment","process_patient_bedding","node_0","node_1","node_2","node_3","node_4","node_5","node_6","node_7","node_8","node_9"].includes(h.id)),Y=u.nodes.some(h=>["input_referral","input_self","input_transfer","process_screening","process_insurance","process_registration"].includes(h.id)),de=u.nodes.some(h=>["input_inpatient","input_icu","input_observation","process_discharge_order","process_discharge_planning"].includes(h.id)),It=u.nodes.some(h=>["input_ed_arrival","process_triage","process_assessment","process_diagnostics","process_transfer"].includes(h.id)),Ee=u.metrics&&u.metrics.cascade?u.metrics.cascade.primaryProcess:null;let g=L||te;g||(Ee?g=Ee:ie?g="Bed Placement":Y?g="Admissions":de?g="Discharges":It&&(g="ED to Inpatient"));const P=g==="Bed Placement"||ie||Ee==="Bed Placement",fe=g==="Admissions"||Y||Ee==="Admissions",pt=g==="Discharges"||de||Ee==="Discharges",Ae=g==="ED to Inpatient"||It||Ee==="ED to Inpatient";console.log("Workflow detection:",{workflowParam:te,currentWorkflow:g,workflowFromMetrics:Ee,isBedPlacementWorkflow:P,isAdmissionsWorkflow:fe,isDischargesWorkflow:pt,isEDToInpatientWorkflow:Ae,nodeIds:u.nodes.map(h=>h.id)});const at=u.nodes.length>0&&"label"in N,Kt=u.nodes.length>0&&"data"in N,Le=u.nodes.length>0&&"type"in N,Ye=u.nodes.some(h=>{var _,B;return((_=h.id)==null?void 0:_.startsWith("input_"))||((B=h.id)==null?void 0:B.startsWith("process_"))||h.type==="start"||h.type==="end"||h.type==="activity"}),tt=P,lt=fe,Rt=pt,mr=Ae;if(console.log("Workflow Detection Results:",{bedPlacement:tt,admissions:lt,discharges:Rt,edToInpatient:mr,currentWorkflow:g}),console.log(`Using custom format for workflow: ${g}`),!u.nodes||u.nodes.length===0){console.error("No nodes found in the data!",u);return}console.log("Process flow data format:",{requestedWorkflow:te,isBedPlacementWorkflow:P,hasLabelProperty:at,hasDataProperty:Kt,hasTypeProperty:Le,hasCustomNodeStructure:Ye,nodeCount:u.nodes.length,edgeCount:u.edges.length,usingFormat:"ALWAYS using Custom Bed Placement format",firstNodeSample:N}),console.log("FULL DATA STRUCTURE:",JSON.stringify(u,null,2)),u.metrics&&console.log("Process metrics:",u.metrics);let Ve=u.nodes;if(g==="Bed Placement")if(console.log("Processing Bed Placement workflow with",u.nodes.length,"nodes"),u.nodes.some(_=>_.id&&_.id.match(/^node_\d+$/))){const _=["node_4","node_5","node_6"];if(Ve=u.nodes.filter(B=>!_.includes(B.id)),u.edges){const B={id:"edge_new",source:"node_3",target:"node_7",count:50,label:"50 cases"},I=u.edges.filter(me=>_.includes(me.source)||_.includes(me.target)).map(me=>me.id);u.edges=[...u.edges.filter(me=>!I.includes(me.id)),B],console.log("Filtered Bed Placement workflow:",{original:u.nodes.length,filtered:Ve.length,removedNodes:_,removedEdges:I.length,addedEdge:B})}}else Ve=u.nodes;const Ot=Ve.map(h=>{var gt,Tt,Ze,qe,Xt,Oe,Mt;let _;if(console.log("Processing node:",h),h.type||h.node_type){const ct=h.type||h.node_type;console.log(`Mapping node ${h.id} (${h.label||""}) with type ${ct} to component type`),ct==="start"?_="input":ct==="end"?_="result":ct==="decision"?_="decision":_="process"}else if(h.id)if(h.id.includes("input_"))_="input";else if(h.id.includes("process_"))_="process";else if(h.id.includes("decision_"))_="decision";else if(h.id.includes("result_"))_="result";else if(g==="Bed Placement"||tt){const ct=parseInt(h.id.replace("node_",""))||0,xr=u.nodes.length;ct===0||ct<Math.floor(xr*.3)?_="input":ct>=Math.floor(xr*.7)?_="result":_="process"}else h.id==="emergency_department"||h.id==="operating_room"||h.id==="direct_admissions"||h.id==="transfers"||h.id==="ed"||h.id==="or"?_="input":h.id==="bed_request"||h.id==="bed_assignment"?_="process":h.id==="decision"||h.id.includes("decision")?_="decision":h.id==="patient_bedding"||h.id==="bedding"||h.id==="unit"||h.id.includes("destination")?_="result":h.id.startsWith("input_")?_="input":h.id.includes("_end")||h.id.endsWith("_discharge")?_="result":_="process";else _="process";const B=h.label||h.data&&h.data.label||"Unknown",I=h.count!==void 0?h.count:h.data&&h.data.caseCount||0,me=h.avgDuration!==void 0?h.avgDuration:h.data&&h.data.avgDuration||0;console.log(`Mapping node ${h.id} (${B}) to component type ${_} with count=${I}, avgDuration=${me}`);let Ie={caseCount:I,count:I,eventCount:I>0?Math.round(I*1.5):0,avgDuration:me,avgTime:me?`${me} min`:null,frequency:I>0?Math.round(I/7)+"/day":"0/day"};h.metrics&&(console.log(`Node ${h.id} has custom metrics:`,h.metrics),(h.metrics.last24h!==void 0||h.metrics.last7d!==void 0||h.metrics.last30d!==void 0)&&(Ie={...Ie,last24h:h.metrics.last24h||0,last7d:h.metrics.last7d||0,last30d:h.metrics.last30d||0}),h.metrics.avgTime!==void 0&&(Ie.avgTime=h.metrics.avgTime),h.metrics.bottlenecks!==void 0&&(Ie.bottlenecks=h.metrics.bottlenecks),h.metrics.successRate!==void 0&&(Ie.successRate=h.metrics.successRate),h.metrics.avgTotalTime!==void 0&&(Ie.avgTotalTime=h.metrics.avgTotalTime)),h.metrics&&(Ie={...Ie,...h.metrics}),console.log(`Node ${h.id} metrics data:`,h.metrics),console.log(`Node ${h.id} final metrics:`,Ie);let be=_;return g==="Bed Placement"||tt?(console.log(`Using specialized Bed Placement components for node ${h.id} with type ${_}`),_==="input"?be="bed_placement_input":_==="process"?be="bed_placement_process":_==="result"?be="bed_placement_result":_==="decision"&&(be="bed_placement_process"),h.id==="input_ed"||h.id==="input_or"||h.id==="input_direct"||h.id==="input_transfers"||h.id==="node_0"||h.id==="node_1"||h.id==="node_8"||h.id==="node_9"||h.label==="Emergency Department"||h.label==="Operating Room"||h.label==="Direct Admissions"||h.label==="Transfers"||h.label==="Transfer"||h.label==="Emergency Department (ED)"||h.label==="Operating Room (OR)"||h.label==="Direct Admission"?be="bed_placement_input":h.id==="process_bed_request"||h.id==="process_bed_assignment"||h.id==="node_2"||h.id==="node_3"||h.id==="node_4"||h.id==="node_5"||h.id==="node_6"||h.label==="Bed Request Initiated"||h.label==="Bed Assignment Decision"||h.label==="Bed request initiated"||h.label==="Bed assignment decision"||h.label==="Bed allocation"||h.label==="Transportation ordered"||h.label==="Patient in transit"?be="bed_placement_process":(h.id==="process_patient_bedding"||h.id==="node_7"||h.label==="Patient Bedding"||h.label==="Patient arrived at bed")&&(be="bed_placement_result")):lt?h.id==="input_referral"||h.id==="input_self"||h.id==="input_transfer"?be="admissions_input":h.id==="process_screening"||h.id==="process_insurance"||h.id==="process_registration"||h.id==="process_bed_assignment"?be="admissions_process":h.id==="process_admission"&&(be="admissions_result"):Rt?h.id==="input_inpatient"||h.id==="input_icu"||h.id==="input_observation"?be="discharges_input":h.id==="process_discharge_order"||h.id==="process_discharge_planning"||h.id==="process_medication"||h.id==="process_education"?be="discharges_process":h.id==="process_final_discharge"&&(be="discharges_result"):mr&&(h.id==="input_ed_arrival"?be="ed_to_inpatient_input":h.id==="process_triage"||h.id==="process_registration"||h.id==="process_assessment"||h.id==="process_diagnostics"||h.id==="process_decision"||h.id==="process_bed_request"||h.id==="process_bed_assignment"?be="ed_to_inpatient_process":h.id==="process_transfer"&&(be="ed_to_inpatient_result")),console.log(`Node ${h.id} - Workflow: ${g}, Special Node Type: ${be}`),{id:h.id,type:be,position:h.position||se(h.id,_),data:{label:B,description:h.description||"",count:h.count,metrics:Ie,...h,last24h:(gt=h.metrics)==null?void 0:gt.last24h,last7d:(Tt=h.metrics)==null?void 0:Tt.last7d,last30d:(Ze=h.metrics)==null?void 0:Ze.last30d,avgTime:(qe=h.metrics)==null?void 0:qe.avgTime,bottlenecks:(Xt=h.metrics)==null?void 0:Xt.bottlenecks,successRate:(Oe=h.metrics)==null?void 0:Oe.successRate,avgTotalTime:(Mt=h.metrics)==null?void 0:Mt.avgTotalTime}}}),Dr=u.edges.map(h=>{var Mt;const _=h.source||"",B=h.target||"",I=parseInt(h.count)||h.data&&parseInt(h.data.patientCount)||0;console.log(`Mapping edge ${h.id} from ${_} to ${B} with count ${I}`);const me=(g==="Bed Placement"||tt)&&(_.includes("input_ed")||_.includes("input_or")||_.includes("input_direct")||_.includes("input_transfers")||_.includes("process_bed_request")||_.includes("process_bed_assignment")||B.includes("process_bed_request")||B.includes("process_bed_assignment")||B.includes("process_patient_bedding")||_.includes("node_")&&B.includes("node_")||g==="Bed Placement"),Ie=lt&&(_.includes("input_referral")||_.includes("input_self")||_.includes("input_transfer")||_.includes("process_screening")||_.includes("process_insurance")||_.includes("process_registration")||B.includes("process_admission")),be=Rt&&(_.includes("input_inpatient")||_.includes("input_icu")||_.includes("input_observation")||_.includes("process_discharge")||B.includes("process_final_discharge")),gt=mr&&(_.includes("input_ed_arrival")||_.includes("process_triage")||_.includes("process_assessment")||_.includes("process_diagnostics")||B.includes("process_transfer"));console.log(`Edge ${h.id}: ${_} → ${B} | Workflow detection:`,{isBedPlacementEdge:me,isAdmissionsEdge:Ie,isDischargesEdge:be,isEDToInpatientEdge:gt});const Tt=I>100||_.includes("process_")&&B.includes("process_")||_===B.replace("process_",""),Ze=((Mt=h.id)==null?void 0:Mt.includes("success"))||B.includes("bedding")||B.includes("discharge")||B.includes("admission")||B.includes("transfer");let qe;me?qe=Ze?"var(--healthcare-accent)":Tt?"var(--healthcare-success)":"var(--healthcare-primary)":Ie?qe=Ze?"#8b5cf6":Tt?"#0891b2":"#2563eb":be?qe=Ze?"#8b5cf6":Tt?"#0d9488":"#4f46e5":gt?qe=Ze?"#8b5cf6":Tt?"#0369a1":"#1d4ed8":qe="#ea580c";const Xt=Math.max(2,Math.min(6,2+(I>0?Math.log10(I)*.8:0)));let Oe="";return h.label?Oe=h.label:I>0&&(Oe=`${I} ${h.label_unit||"cases"}`,me?h.label?Oe=h.label:_.includes("bed_request")&&B.includes("bed_assignment")||_.includes("process_bed_request")&&B.includes("process_bed_assignment")||_==="node_2"&&B==="node_3"?Oe=`${I} total`:(_.includes("bed_assignment")&&B.includes("patient_bedding")||_.includes("process_bed_assignment")&&B.includes("process_patient_bedding")||_==="node_3"&&B==="node_7")&&(Oe=`${I} successful`):Ie?_.includes("process_screening")&&B.includes("process_insurance")?Oe=`${I} total`:_.includes("process_registration")&&B.includes("process_admission")&&(Oe=`${I} successful`):be?_.includes("process_discharge_order")&&B.includes("process_discharge_planning")?Oe=`${I} total`:_.includes("process_education")&&B.includes("process_final_discharge")&&(Oe=`${I} successful`):gt&&(_.includes("process_triage")&&B.includes("process_registration")?Oe=`${I} total`:_.includes("process_bed_assignment")&&B.includes("process_transfer")&&(Oe=`${I} successful`))),h.format==="ocel"?{id:h.id,source:_,target:B,type:"smoothstep",markerEnd:{type:ai.ArrowClosed,color:qe},sourceHandle:"source",targetHandle:"target",label:Oe,data:{count:I,isMainFlow:Tt,isSuccessFlow:Ze},labelStyle:{fill:"white",fontWeight:"600",fontSize:"14px",fontFamily:"var(--font-sans)",textAlign:"center",letterSpacing:"0.02em",lineHeight:"1.3",backgroundColor:"#1f2937",padding:"6px 10px",borderRadius:"6px"},labelBgStyle:{fill:"#1f2937",opacity:.95,rx:6,ry:6},labelBgPadding:[2,4],labelShowBg:I>0,style:{strokeWidth:Xt,stroke:qe,animated:Tt||Ze}}:{...h,type:"smoothstep",markerEnd:{type:ai.ArrowClosed},sourceHandle:"source-bottom",targetHandle:"target-top",label:h.data?`${h.data.patientCount} patients
${h.data.avgTime}`:"",labelStyle:{fill:"white",fontWeight:"600",fontSize:"14px",fontFamily:"var(--font-sans)",textAlign:"center",letterSpacing:"0.02em",lineHeight:"1.5",backgroundColor:"#1f2937",padding:"8px 12px",borderRadius:"6px",boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"},labelBgStyle:{fill:"#1f2937",opacity:.95,rx:6,ry:6},labelBgPadding:[0,0],labelShowBg:!1,style:si(h.data)}});console.log("Mapped nodes:",Ot),console.log("Mapped edges:",Dr);const We=pe||Ce;if(We){console.log("Using saved layout...",We),We.viewport?(console.log("Found saved viewport settings:",We.viewport),Se(We.viewport)):console.log("No saved viewport settings found"),We.flowDirection&&console.log("Found saved flow direction:",We.flowDirection);const h=A==="horizontal",_=Ot.map(I=>{const me=We[I.id];return me?console.log(`Found saved position for node ${I.id}:`,me):console.log(`No saved position for node ${I.id}, using default position`),{...I,targetPosition:h?"left":"top",sourcePosition:h?"right":"bottom",position:me?{x:parseFloat(me.x),y:parseFloat(me.y)}:I.position}});console.log("Nodes with saved positions:",_),Z(_);const B=Dr.map(I=>({...I,type:"default",sourceHandle:I.sourceHandle||(h?"source":"source-bottom"),targetHandle:I.targetHandle||(h?"target":"target-top"),style:{...I.style,stroke:"#fff",strokeWidth:2},animated:!0,markerEnd:{type:"arrowclosed"},curvature:.3}));he(B)}else{console.log("No saved layout available, generating layout...");const{nodes:h,edges:_}=ii(Ot,Dr,A);console.log("Layout generated:",{nodes:h.length,edges:_.length,direction:A}),Z(h),he(_)}},[u,pe,Ce,A]),D.useEffect(()=>{if(z.length>0&&ee.length>0){console.log("Flow direction changed to:",A,"- regenerating layout");const{nodes:N,edges:T}=ii(z,ee,A);Z([...N]),he([...T])}},[A]);const oe=D.useCallback(N=>{const T=A==="horizontal";return he(te=>Px({...N,type:"default",sourceHandle:N.sourceHandle||(T?"source":"source-bottom"),targetHandle:N.targetHandle||(T?"target":"target-top"),style:{...si({isMainFlow:!0}),stroke:"#fff",strokeWidth:2},animated:!0,markerEnd:{type:"arrowclosed"},curvature:.3},te))},[A]),ke=D.useCallback((N,T)=>{c==null||c(T)},[c]),xt=D.useCallback((N,T)=>{R==null||R(T)},[R]),w=D.useCallback((N,T)=>{document.body.style.cursor="grabbing"},[]),Pe=D.useCallback((N,T)=>{he(te=>te.map(ie=>({...ie,style:{...ie.style,opacity:ie.source===T.id||ie.target===T.id?.5:1}})))},[he]),Fe=D.useCallback((N,T)=>{document.body.style.cursor="",he(te=>te.map(ie=>({...ie,style:si(ie.data)}))),Z(te=>{const ie=te.map(Y=>Y.id===T.id?{...Y,position:T.position}:Y);return J(ie),ie})},[Z,J,ce]);return Bl.useImperativeHandle(le,()=>({resetLayout:()=>{const{nodes:N,edges:T}=ii(z,ee,A);Z([...N]),he([...T])}})),n.jsx("div",{style:{width:"100%",height:"90vh",position:"relative"},className:"process-flow-container",children:n.jsxs(Ex,{onNodeDragStart:w,onNodeDrag:Pe,onNodeDragStop:Fe,snapToGrid:!0,snapGrid:[20,20],nodes:z,edges:ee,onNodesChange:ne,onEdgesChange:ge,onConnect:oe,onNodeClick:ke,onEdgeClick:xt,nodeTypes:zx,defaultEdgeOptions:{...Gx,type:"default",style:{stroke:"#fff",strokeWidth:2},animated:!0,markerEnd:{type:"arrowclosed"},curvature:.3},onMove:(N,T)=>{Se(T),(!G.current||Math.abs(G.current.x-T.x)>50||Math.abs(G.current.y-T.y)>50||Math.abs(G.current.zoom-T.zoom)>.2)&&(U(T),G.current={...T})},defaultViewport:ce||{x:0,y:0,zoom:.9},fitView:!ce,fitViewOptions:{padding:.2,includeHiddenNodes:!0,duration:800,zoom:.9,maxZoom:2},className:"bg-healthcare-background dark:bg-healthcare-background-dark",minZoom:.3,maxZoom:2,zoomOnScroll:!0,zoomOnPinch:!0,panOnScroll:!1,panOnScrollMode:void 0,panOnDrag:!0,proOptions:{hideAttribution:!0},style:{cursor:"default","--xy-theme-selected":"var(--healthcare-primary)","--xy-theme-hover":"var(--healthcare-border)","--xy-theme-edge-hover":"var(--healthcare-primary-dark)",backgroundColor:"var(--healthcare-background)"},children:[n.jsx(Lx,{gap:20,size:1.5,color:"#1a365d",style:{opacity:.02}}),n.jsx(Ix,{showZoom:!0,showFitView:!0,showInteractive:!0,position:"bottom-right",style:{marginRight:"10px",marginBottom:"10px",backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"8px",padding:"4px"}}),n.jsx(Ox,{position:"bottom-left",style:{backgroundColor:"var(--healthcare-surface)",marginLeft:"10px",marginBottom:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)"},maskColor:"rgba(0, 0, 0, 0.4)",nodeColor:"#0284c7"})]})})}),Kx=({isOpen:u,onClose:pe,selectedNode:c,selectedEdge:R,overallMetrics:L})=>{if(!u)return null;const Te=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Overall Process Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"healthcare-card p-4",children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Total Patients"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:(L==null?void 0:L.totalPatients)||0})]}),n.jsxs("div",{className:"healthcare-card p-4",children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Average Time"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-success dark:text-healthcare-success-dark",children:(L==null?void 0:L.avgTotalTime)||"0m"})]}),n.jsxs("div",{className:"healthcare-card p-4",children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Active Cases"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-warning dark:text-healthcare-warning-dark",children:(L==null?void 0:L.activeCases)||0})]}),n.jsxs("div",{className:"healthcare-card p-4",children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Completed Today"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-info dark:text-healthcare-info-dark",children:(L==null?void 0:L.completedToday)||0})]})]})]}),A=()=>{var z,Z,ne;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:[c.data.label," Metrics"]}),n.jsxs("div",{className:"healthcare-card p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Total Cases"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:((z=c.data.metrics)==null?void 0:z.count)||0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Average Time"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-success dark:text-healthcare-success-dark",children:((Z=c.data.metrics)==null?void 0:Z.avgTime)||"0m"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Cohort Breakdown"}),n.jsx("div",{className:"space-y-2",children:Object.entries(((ne=c.data.metrics)==null?void 0:ne.cohorts)||{}).map(([ee,he])=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-healthcare-surface-dark rounded",children:[n.jsx("span",{className:"capitalize text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:ee}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-healthcare-info dark:text-healthcare-info-dark",children:[he.count," cases"]}),n.jsx("div",{className:"text-healthcare-success dark:text-healthcare-success-dark",children:he.avgTime})]})]},ee))})]})]})]})},le=()=>{var z,Z;return n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Transition Metrics"}),n.jsx("div",{className:"healthcare-card p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Patient Count"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:((z=R.data)==null?void 0:z.patientCount)||0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Average Time"}),n.jsx("div",{className:"text-2xl font-bold text-healthcare-success dark:text-healthcare-success-dark",children:((Z=R.data)==null?void 0:Z.avgTime)||"0m"})]})]})})]})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white dark:bg-healthcare-background-dark rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-xl font-bold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Process Analytics"}),n.jsx("button",{onClick:pe,className:"text-healthcare-text-primary dark:text-healthcare-text-primary-dark hover:text-healthcare-primary dark:hover:text-healthcare-primary-dark",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)] p-1 space-y-6",children:[!c&&!R&&Te(),c&&A(),R&&le()]})]})})})},zl=({hospitals:u=[],units:pe=[],specialties:c=[],onFilterChange:R,initialFilters:L={},className:Te=""})=>{const[A,le]=D.useState(L.selectedHospital||""),[z,Z]=D.useState(L.selectedUnit||""),[ne,ee]=D.useState(L.selectedSpecialty||""),[he,ge]=D.useState(L.startDate||new Date(2024,9,1)),[Ce,He]=D.useState(L.endDate||new Date(2024,11,31)),[ce,Se]=D.useState(L.compStartDate||new Date(2024,0,1)),[G,we]=D.useState(L.compEndDate||new Date(2024,5,30)),[U,J]=D.useState(L.showComparison||!1),[se,oe]=D.useState(!1),[ke,xt]=D.useState(!1),[w,Pe]=D.useState(!1),[Fe,N]=D.useState(!1),[T,te]=D.useState(!0),[ie,Y]=D.useState("custom");D.useEffect(()=>{A===""&&Z("")},[A]),D.useEffect(()=>{z===""&&ee("")},[z]);const de=g=>{const P=new Date;let fe,pt;switch(g){case"30d":pt=P,fe=new Date(P),fe.setDate(P.getDate()-30),Y("30d");break;case"90d":pt=P,fe=new Date(P),fe.setDate(P.getDate()-90),Y("90d");break;case"ytd":pt=P,fe=new Date(P.getFullYear(),0,1),Y("ytd");break;default:return}ge(fe),He(pt),R&&R({...It(),startDate:fe,endDate:pt})},It=()=>({selectedHospital:A,selectedUnit:z,selectedSpecialty:ne,dateRange:{startDate:he,endDate:Ce},comparisonDateRange:{startDate:ce,endDate:G},showComparison:U});D.useEffect(()=>{R&&R(It())},[A,z,ne,he,Ce,ce,G,U]);const Ee={start:Wn(he,"MMM d, yyyy"),end:Wn(Ce,"MMM d, yyyy"),compStart:Wn(ce,"MMM d, yyyy"),compEnd:Wn(G,"MMM d, yyyy")};return n.jsxs("div",{className:`healthcare-card ${Te}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark flex items-center",children:[n.jsx(Fx,{className:"mr-2 h-5 w-5"}),"Filters"]}),n.jsx("button",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark hover:text-healthcare-text-primary dark:hover:text-healthcare-text-primary-dark",onClick:()=>te(!T),children:T?n.jsx(Wx,{className:"h-4 w-4"}):n.jsx($x,{className:"h-4 w-4"})})]}),T&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-1",children:"Hospital"}),n.jsxs("select",{className:"bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md w-full p-2 text-healthcare-text-primary dark:text-healthcare-text-primary-dark",value:A,onChange:g=>le(g.target.value),children:[n.jsx("option",{value:"",children:"Select Hospital"}),u.map(g=>n.jsx("option",{value:g.id||g,children:g.name||g},g.id||g))]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-1",children:"Unit"}),n.jsxs("select",{className:"bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md w-full p-2 text-healthcare-text-primary dark:text-healthcare-text-primary-dark",value:z,onChange:g=>Z(g.target.value),disabled:!A,children:[n.jsx("option",{value:"",children:"Select Unit"}),pe.filter(g=>!A||g.hospitalId===A).map(g=>n.jsx("option",{value:g.id||g,children:g.name||g},g.id||g))]}),!A&&n.jsx("p",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Please select a hospital first"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-1",children:"Specialty"}),n.jsxs("select",{className:"bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md w-full p-2 text-healthcare-text-primary dark:text-healthcare-text-primary-dark",value:ne,onChange:g=>ee(g.target.value),disabled:!z,children:[n.jsx("option",{value:"",children:"Select Specialty"}),c.filter(g=>!z||g.unitId===z).map(g=>n.jsx("option",{value:g.id||g,children:g.name||g},g.id||g))]}),!z&&n.jsx("p",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Please select a unit first"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-1",children:"Date Range"}),n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("label",{className:"block text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Date Range"}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("button",{className:"px-2 py-1 text-xs bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark rounded-md hover:bg-healthcare-hover dark:hover:bg-healthcare-hover-dark",onClick:()=>de("30d"),children:"30d"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark rounded-md hover:bg-healthcare-hover dark:hover:bg-healthcare-hover-dark",onClick:()=>de("90d"),children:"90d"}),n.jsx("button",{className:"px-2 py-1 text-xs bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark rounded-md hover:bg-healthcare-hover dark:hover:bg-healthcare-hover-dark",onClick:()=>de("ytd"),children:"YTD"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx("div",{children:n.jsx(Bn,{value:he,onChange:g=>ge(g),inline:se,onClose:()=>oe(!1),maxDate:Ce,theme:{root:{base:"relative"},popup:{root:{base:"absolute top-10 z-55 block pt-2"}}},title:"Start Date",trigger:n.jsxs("button",{className:"w-full flex items-center justify-start px-3 py-2 bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md text-healthcare-text-primary dark:text-healthcare-text-primary-dark",onClick:()=>oe(!se),children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),Ee.start]})})}),n.jsx("div",{children:n.jsx(Bn,{value:Ce,onChange:g=>He(g),inline:ke,onClose:()=>xt(!1),minDate:he,theme:{root:{base:"relative"},popup:{root:{base:"absolute top-10 z-55 block pt-2"}}},title:"End Date",trigger:n.jsxs("button",{className:"w-full flex items-center justify-start px-3 py-2 bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md text-healthcare-text-primary dark:text-healthcare-text-primary-dark",onClick:()=>xt(!ke),children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),Ee.end]})})})]})]}),n.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Comparative Period"}),n.jsx("div",{className:`w-10 h-5 rounded-full p-1 cursor-pointer transition-colors ${U?"bg-healthcare-primary dark:bg-healthcare-primary-dark":"bg-gray-600 dark:bg-gray-700"}`,onClick:()=>{J(!U)},children:n.jsx("div",{className:`w-3 h-3 rounded-full bg-white transform transition-transform ${U?"translate-x-5":""}`})})]}),U&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2",children:"Comparison Date Range"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx("div",{children:n.jsx(Bn,{value:ce,onChange:g=>Se(g),inline:w,onClose:()=>Pe(!1),maxDate:G,theme:{root:{base:"relative"},popup:{root:{base:"absolute top-10 z-55 block pt-2"}}},title:"Comparison Start Date",trigger:n.jsxs("button",{className:"w-full flex items-center justify-start px-3 py-2 bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md text-healthcare-text-primary dark:text-healthcare-text-primary-dark",onClick:()=>Pe(!w),children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),Ee.compStart]})})}),n.jsx("div",{children:n.jsx(Bn,{value:G,onChange:g=>we(g),inline:Fe,onClose:()=>N(!1),minDate:ce,theme:{root:{base:"relative"},popup:{root:{base:"absolute top-10 z-55 block pt-2"}}},title:"Comparison End Date",trigger:n.jsxs("button",{className:"w-full flex items-center justify-start px-3 py-2 bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md text-healthcare-text-primary dark:text-healthcare-text-primary-dark",onClick:()=>N(!Fe),children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),Ee.compEnd]})})})]})]})]})]})};zl.propTypes={hospitals:C.arrayOf(C.oneOfType([C.string,C.shape({id:C.string,name:C.string})])),units:C.arrayOf(C.oneOfType([C.string,C.shape({id:C.string,name:C.string,hospitalId:C.string})])),specialties:C.arrayOf(C.oneOfType([C.string,C.shape({id:C.string,name:C.string,unitId:C.string})])),onFilterChange:C.func,initialFilters:C.shape({selectedHospital:C.string,selectedUnit:C.string,selectedSpecialty:C.string,startDate:C.instanceOf(Date),endDate:C.instanceOf(Date),compStartDate:C.instanceOf(Date),compEndDate:C.instanceOf(Date),showComparison:C.bool}),className:C.string};const Gl=({onChange:u,className:pe=""})=>{const{isDarkMode:c}=li(),R=new Date,L=new Date(R.getFullYear(),R.getMonth(),R.getDate(),6,0,0),Te=new Date(R.getFullYear(),R.getMonth(),R.getDate(),20,0,0);new Date(R.getFullYear(),R.getMonth(),R.getDate(),0,0,0),new Date(R.getFullYear(),R.getMonth(),R.getDate(),24,0,0);const[A,le]=D.useState([L,Te]),[z,Z]=D.useState(!1),[ne,ee]=D.useState(null),he=U=>U.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),ge=U=>{const J=U.getHours(),se=U.getMinutes();return(J*60+se)/(24*60)*100},Ce=U=>{const J=U/100*1440,se=Math.floor(J/60),oe=Math.floor(J%60);return new Date(R.getFullYear(),R.getMonth(),R.getDate(),se,oe,0)},He=(U,J)=>{U.preventDefault(),Z(!0),ee(J)},ce=U=>{if(!z)return;const J=U.currentTarget.getBoundingClientRect(),se=Math.max(0,Math.min(100,(U.clientX-J.left)/J.width*100)),oe=Ce(se);[...A],ne===0&&oe.getTime()<A[1].getTime()?le([oe,A[1]]):ne===1&&oe.getTime()>A[0].getTime()&&le([A[0],oe])},Se=()=>{z&&(Z(!1),u&&u(A))};D.useEffect(()=>{const U=()=>{z&&(Z(!1),u&&u(A))};return document.addEventListener("mouseup",U),()=>{document.removeEventListener("mouseup",U)}},[z,u,A]);const G=()=>{const U=Wl(c),J=[];for(let se=0;se<=24;se++){const oe=se/24*100,ke=se%4===0;J.push(n.jsx("div",{className:`absolute ${ke?"w-1 h-3":"w-0.5 h-2"} rounded-sm`,style:{left:`${oe}%`,backgroundColor:ke?U.colors[0]:"rgba(255, 255, 255, 0.5)",top:ke?"-1px":"0px",opacity:ke?.9:.7},title:`${se}:00`},se)),ke&&J.push(n.jsx("div",{className:"absolute text-xs font-medium",style:{left:`${oe}%`,bottom:"-16px",transform:"translateX(-50%)",color:"rgba(255, 255, 255, 0.7)"},children:se===24?"00:00":`${se.toString().padStart(2,"0")}:00`},`label-${se}`))}return J},we=Wl(c);return n.jsxs("div",{className:`relative ${pe} py-0 px-3 flex items-center`,style:{width:"800px",height:"42px"},children:[n.jsxs("div",{className:"text-xs font-medium absolute top-1 w-full text-gray-700 dark:text-white z-10",children:[n.jsx("div",{className:"absolute",style:{left:`${ge(A[0])}%`,transform:"translateX(-50%)",fontWeight:"bold"},children:he(A[0])}),n.jsx("div",{className:"absolute",style:{left:`${ge(A[1])}%`,transform:"translateX(-50%)",fontWeight:"bold"},children:he(A[1])})]}),n.jsxs("div",{className:"relative h-8 cursor-pointer w-full mt-6",onMouseMove:ce,onMouseUp:Se,children:[n.jsxs("div",{className:"absolute top-4 w-full h-2 bg-gray-400 dark:bg-gray-700 rounded",style:{opacity:.4},children:[n.jsx("div",{className:"absolute h-full rounded",style:{left:`${ge(A[0])}%`,width:`${ge(A[1])-ge(A[0])}%`,backgroundColor:we.colors[0]}}),G()]}),n.jsx("div",{className:`absolute top-2.5 w-4 h-4 bg-white dark:bg-gray-800 rounded-full shadow-lg transform -translate-x-1/2 ${z&&ne===0?"scale-110":""}`,style:{left:`${ge(A[0])}%`,borderWidth:"2px",borderColor:we.colors[0]},onMouseDown:U=>He(U,0)}),n.jsx("div",{className:`absolute top-2.5 w-4 h-4 bg-white dark:bg-gray-800 rounded-full shadow-lg transform -translate-x-1/2 ${z&&ne===1?"scale-110":""}`,style:{left:`${ge(A[1])}%`,borderWidth:"2px",borderColor:we.colors[0]},onMouseDown:U=>He(U,1)})]})]})};Gl.propTypes={onChange:C.func,className:C.string};const ci=["Bed Placement","Admissions","Discharges","ED to Inpatient"];C.string.isRequired,C.string.isRequired,C.string.isRequired,C.func.isRequired,C.func.isRequired,C.func.isRequired,C.func.isRequired,C.func.isRequired,C.func.isRequired,C.string,C.bool,C.string,C.string,C.func,C.func,C.func,C.func,C.bool,C.number,C.number,C.number,C.func,C.func,C.func,C.string,C.func,C.string,C.func,C.string,C.func;console.log("Available workflows in ProcessSelector:",ci);const Xx=()=>{li();const[u,pe]=D.useState("summary"),[c,R]=D.useState(!1),[L,Te]=D.useState("frequency"),[A,le]=D.useState("all"),[z,Z]=D.useState("bed-assignment"),ne={totalCases:287,totalVariants:4,meanTime:"3.2 hours",medianTime:"2.4 hours",modeTime:"1.8 hours",stdDev:"2.7 hours",successRate:"94%",mostCommonVariant:{pattern:"ED → Bed Request → Bed Assignment → Bedding",cases:52,percentage:18.1}},ee=[{traces:118,percentage:41.1,steps:[{name:"ED",color:"#3b82f6"},{name:"Bed Request",color:"#93c5fd",timing:"38 min"},{name:"Bed Assignment",color:"#93c5fd",timing:"42 min"},{name:"Bedding",color:"#86efac"}],timing:"80 min avg",isOutlier:!1},{traces:68,percentage:23.7,steps:[{name:"Direct Admit",color:"#93c5fd"},{name:"Bed Request",color:"#93c5fd",timing:"42 min"},{name:"Bed Assignment",color:"#93c5fd",timing:"35 min"},{name:"Bedding",color:"#86efac"}],timing:"77 min avg",isOutlier:!1},{traces:45,percentage:15.7,steps:[{name:"OR",color:"#93c5fd"},{name:"Bed Request",color:"#93c5fd",timing:"25 min"},{name:"Bed Assignment",color:"#93c5fd",timing:"30 min"},{name:"Bedding",color:"#86efac"}],timing:"55 min avg",isOutlier:!1},{traces:39,percentage:13.6,steps:[{name:"Transfer",color:"#fbbf24"},{name:"Bed Request",color:"#fbbf24",timing:"55 min"},{name:"Bed Assignment",color:"#fbbf24",timing:"90 min"},{name:"Bedding",color:"#fbbf24"}],timing:"145 min avg",isOutlier:!0},{traces:17,percentage:5.9,steps:[{name:"ED (ICU)",color:"#f87171"},{name:"Bed Request",color:"#f87171",timing:"85 min"},{name:"Bed Assignment",color:"#f87171",timing:"132 min"},{name:"Bedding",color:"#f87171"}],timing:"217 min avg",isOutlier:!0,highlight:!0}],he=[{name:"Virtua Memorial Hospital",bedCount:320,avgTime:"3.7 hours",orPercentage:38,caseCount:68,topSource:"OR"},{name:"Virtua Voorhees Hospital",bedCount:398,avgTime:"3.2 hours",edCount:1245,caseCount:89,topSource:"ED"},{name:"Virtua Marlton Hospital",bedCount:188,avgTime:"1.4 hours",directAdmissionPercentage:22,caseCount:56,topSource:"Direct Admissions"},{name:"Virtua Willingboro Hospital",bedCount:143,avgTime:"3.4 hours",directAdmissionPercentage:24,caseCount:38,topSource:"Direct Admissions"},{name:"Virtua Camden Hospital",bedCount:125,avgTime:"3.9 hours",transferPercentage:8,caseCount:36,topSource:"Transfers"}],ge=[{id:1,source:"Emergency Department",pathway:"ED → Bed Request → Bed Assignment → Bedding",cases24h:52,percentage:38,avgDuration:"4.3 hours",medianDuration:"3.8 hours",outlierPercentage:18},{id:2,source:"Operating Room",pathway:"OR → Bed Request → Bed Assignment → Bedding",cases24h:38,percentage:45,avgDuration:"2.1 hours",medianDuration:"1.9 hours",outlierPercentage:6},{id:3,source:"Direct Admissions",pathway:"Direct Admission → Bed Request → Bed Assignment → Bedding",cases24h:32,percentage:62,avgDuration:"1.8 hours",medianDuration:"1.5 hours",outlierPercentage:4},{id:4,source:"Transfers",pathway:"Transfer → Bed Request → Bed Assignment → Bedding",cases24h:9,percentage:68,avgDuration:"3.7 hours",medianDuration:"3.4 hours",outlierPercentage:22}],Ce=[{id:5,source:"Emergency Department",pathway:"ED → Bed Request → Bed Request Cancelled → Bed Request → Bed Assignment → Bedding",cases24h:12,percentage:9,avgDuration:"6.8 hours",medianDuration:"6.2 hours",outlierPercentage:89},{id:6,source:"Operating Room",pathway:"OR → Bed Request → Bed Assignment → Bed Reassigned → Bed Assignment → Bedding",cases24h:8,percentage:10,avgDuration:"4.5 hours",medianDuration:"4.1 hours",outlierPercentage:75},{id:7,source:"Direct Admissions",pathway:"Direct Admission → Patient Delayed → Bed Request → Bed Assignment → Bedding",cases24h:4,percentage:8,avgDuration:"5.2 hours",medianDuration:"4.9 hours",outlierPercentage:62},{id:8,source:"Transfers",pathway:"Transfer → Administrative Review → Bed Request → Bed Assignment → Bedding",cases24h:2,percentage:15,avgDuration:"8.3 hours",medianDuration:"7.9 hours",outlierPercentage:94}],He={dayOfWeek:[{day:"Monday",avgTime:"4.1 hours",volume:"High"},{day:"Tuesday",avgTime:"3.5 hours",volume:"Medium"},{day:"Wednesday",avgTime:"2.6 hours",volume:"Medium"},{day:"Thursday",avgTime:"3.1 hours",volume:"Medium"},{day:"Friday",avgTime:"3.8 hours",volume:"High"},{day:"Saturday",avgTime:"2.9 hours",volume:"Low"},{day:"Sunday",avgTime:"2.7 hours",volume:"Low"}],timeOfDay:[{period:"6am-10am",avgTime:"2.8 hours",volume:"Medium"},{period:"10am-2pm",avgTime:"3.4 hours",volume:"High"},{period:"2pm-4pm",avgTime:"4.8 hours",volume:"Very High"},{period:"4pm-8pm",avgTime:"3.6 hours",volume:"High"},{period:"8pm-10pm",avgTime:"2.4 hours",volume:"Medium"},{period:"10pm-6am",avgTime:"1.7 hours",volume:"Low"}]},ce=[{factor:"ICU bed requests",percentage:65},{factor:"Evening shift changes (2-4pm)",percentage:48},{factor:"Specialty bed requirements",percentage:37},{factor:"Complex patient conditions",percentage:29},{factor:"High hospital occupancy (>90%)",percentage:23},{factor:"Staffing shortages",percentage:18}],Se={overallImprovement:"32%",bySource:[{source:"ED",improvement:"28%",current:"4.3 hours",previous:"6.0 hours"},{source:"OR",improvement:"35%",current:"2.1 hours",previous:"3.2 hours"},{source:"Direct Admissions",improvement:"38.59%",current:"1.8 hours",previous:"2.9 hours"},{source:"Transfers",improvement:"19%",current:"3.7 hours",previous:"4.6 hours"}]},G=w=>{Te(w)},we=()=>{R(!1)},U=w=>{pe(w)},J=[{title:"Process Variants",items:[{id:"summary",label:"Summary",icon:"carbon:summary"},{id:"outliers",label:"Outliers",icon:"carbon:warning"},{id:"statistics",label:"Statistics",icon:"carbon:chart-line"}]}],se=()=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Process Overview",className:"bg-blue-50 dark:bg-blue-900/20",children:n.jsxs("div",{className:"grid grid-cols-2 gap-y-2",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Cases (24h):"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.totalCases}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Process Variants:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.totalVariants}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Success Rate:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.successRate}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Most Common Pathway:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:"ED → Bed (38%)"})]})}),n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Time Statistics",className:"bg-green-50 dark:bg-green-900/20",children:n.jsxs("div",{className:"grid grid-cols-2 gap-y-2",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Mean Duration:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.meanTime}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Median Duration:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.medianTime}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Mode Duration:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.modeTime}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Standard Deviation:"}),n.jsx("div",{className:"text-sm font-semibold dark:text-white",children:ne.stdDev})]})})]}),n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Bed Assignment Process Variants",className:"mb-6 bg-gray-50 dark:bg-gray-800/30",children:n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 text-center",children:"Common bed assignment pathways by frequency"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("div",{className:"min-w-max",children:[n.jsxs("div",{className:"flex justify-between mb-4 ml-2 mr-2",children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"Total cases: 287"}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Normal"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full mr-1"}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Outlier"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Critical"})]})]})]}),ee.map((w,Pe)=>n.jsxs("div",{className:"mb-14",children:[n.jsxs("div",{className:"ml-2 mb-2",children:[n.jsxs("div",{className:"text-base font-semibold text-gray-700 dark:text-gray-100 flex items-center",children:[w.traces.toLocaleString()," traces",w.isOutlier&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 rounded text-xs font-bold",children:"OUTLIER"}),w.highlight&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200 rounded text-xs font-bold",children:"CRITICAL"})]}),n.jsxs("div",{className:"flex items-center mt-0.5",children:[n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:[w.percentage.toFixed(1),"% of total"]}),w.timing&&n.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 ml-3",children:w.timing})]})]}),n.jsx("div",{className:"flex items-center",children:w.steps.map((Fe,N)=>{let T;return w.highlight?T=Fe.color:w.isOutlier?N===0||N===w.steps.length-1?T="#f59e0b":T="#fcd34d":N===0?Fe.name.includes("ED")?T="#3b82f6":Fe.name.includes("Direct Admit")?T="#8b5cf6":Fe.name.includes("Transfer")?T="#ec4899":T=Fe.color:N===w.steps.length-1?T="#10b981":T="#93c5fd",n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{className:"h-16 flex flex-col items-center justify-center px-4 relative",style:{backgroundColor:T,clipPath:"polygon(0% 0%, 90% 0%, 100% 50%, 90% 100%, 0% 100%, 10% 50%)",width:"140px",marginLeft:N===0?"0":"-10px",zIndex:w.steps.length-N},children:[n.jsx("span",{className:"text-white text-xs font-medium",children:Fe.name}),Fe.timing&&n.jsx("span",{className:"text-white text-[10px] mt-1 opacity-90",children:Fe.timing}),N===w.steps.length-1&&n.jsxs("span",{className:"text-white text-xs mt-1 font-bold",children:[w.percentage.toFixed(1),"%"]})]})},N)})})]},Pe))]})}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4 text-center",children:"Figure: Visualization of common bed assignment pathways across Virtua Health System. The most common pathway is direct ED to Bed assignment (38%), followed by Direct Admit pathways (26.1%)."}),n.jsx("div",{className:"flex justify-end mt-4 mr-2",children:n.jsxs("a",{href:"#",className:"text-xs flex items-center text-blue-600 dark:text-blue-400 hover:underline",children:[n.jsx("span",{children:"View detailed timing metrics"}),n.jsx("svg",{className:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})})]})}),n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"strong",title:"Key Process Insights",className:"mb-6 bg-purple-50 dark:bg-purple-900/20",children:n.jsxs("ul",{className:"text-sm space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-purple-600 dark:text-purple-400 mr-2",children:"•"}),n.jsx("span",{className:"dark:text-white",children:"ED admissions take the longest time on average (4.3 hours), while direct admissions are the most efficient (1.8 hours)."})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-purple-600 dark:text-purple-400 mr-2",children:"•"}),n.jsx("span",{className:"dark:text-white",children:"Peak congestion occurs during the 2-4pm shift change period (4.8 hours average)."})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-purple-600 dark:text-purple-400 mr-2",children:"•"}),n.jsx("span",{className:"dark:text-white",children:"Virtua Marlton Hospital has the fastest average bed assignment time (1.4 hours), 56% better than the system average."})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-purple-600 dark:text-purple-400 mr-2",children:"•"}),n.jsxs("span",{className:"dark:text-white",children:["12% of all cases are considered outliers (",">","6 hours), with ICU bed requests being the most common factor (65%)."]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("span",{className:"text-purple-600 dark:text-purple-400 mr-2",children:"•"}),n.jsx("span",{className:"dark:text-white",children:"Overall system improvement of 32% in assignment times over the past 12 months."})]})]})}),n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold dark:text-white",children:"Main Process Pathways"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("button",{onClick:()=>R(!c),className:"flex items-center px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white rounded-md",children:[n.jsx(Vt,{icon:"carbon:filter",className:"mr-1"}),"Filter"]}),n.jsx("div",{className:"relative",children:n.jsxs("button",{className:"flex items-center px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white rounded-md",onClick:()=>{G(L==="frequency"?"duration":L==="duration"?"source":"frequency")},children:[n.jsx(Vt,{icon:"carbon:arrows-vertical",className:"mr-1"}),"Sort by: ",L==="frequency"?"Frequency":L==="duration"?"Duration":"Source"]})})]})]}),c&&n.jsxs(Ue,{isSubpanel:!0,dropLightIntensity:"subtle",className:"mb-3",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Hospital"}),n.jsxs("select",{className:"w-full p-1 border rounded text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:A,onChange:w=>le(w.target.value),children:[n.jsx("option",{value:"all",children:"All Hospitals"}),n.jsx("option",{value:"memorial",children:"Virtua Memorial"}),n.jsx("option",{value:"voorhees",children:"Virtua Voorhees"}),n.jsx("option",{value:"marlton",children:"Virtua Marlton"}),n.jsx("option",{value:"willingboro",children:"Virtua Willingboro"}),n.jsx("option",{value:"camden",children:"Virtua Camden"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source"}),n.jsxs("select",{className:"w-full p-1 border rounded text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[n.jsx("option",{children:"All Sources"}),n.jsx("option",{children:"Emergency Department"}),n.jsx("option",{children:"Operating Room"}),n.jsx("option",{children:"Direct Admissions"}),n.jsx("option",{children:"Transfers"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),n.jsxs("select",{className:"w-full p-1 border rounded text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[n.jsx("option",{children:"Any Duration"}),n.jsxs("option",{children:["<"," 2 hours"]}),n.jsx("option",{children:"2-4 hours"}),n.jsx("option",{children:"4-6 hours"}),n.jsxs("option",{children:[">"," 6 hours (Outliers)"]})]})]})]}),n.jsx("div",{className:"flex justify-end mt-2",children:n.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",onClick:we,children:"Apply Filters"})})]}),n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"medium",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Source & Pathway"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cases (24h)"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"% of Source"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg. Duration"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Median"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"% Outliers"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:ge.map(w=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:[n.jsx("div",{className:"font-medium",children:w.source}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.pathway})]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:w.cases24h}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:[w.percentage,"%"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:w.avgDuration}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:w.medianDuration}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${w.outlierPercentage<10?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":w.outlierPercentage<20?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:[w.outlierPercentage,"%"]})})]},w.id))})]})})})]}),oe=()=>n.jsxs("div",{className:"p-4",children:[n.jsxs(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Outlier Analysis",className:"mb-6 bg-amber-50 dark:bg-amber-900/20",children:[n.jsxs("p",{className:"text-sm mb-3 dark:text-white",children:["Outliers are defined as bed assignments taking ",">","6 hours (approximately 2 standard deviations above mean). These cases represent 12% of total bed assignments."]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Source Distribution"}),n.jsxs("ul",{className:"text-sm space-y-1",children:[n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ED Admissions:"}),n.jsx("span",{className:"dark:text-white",children:"18% are outliers"})]}),n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"OR Admissions:"}),n.jsx("span",{className:"dark:text-white",children:"6% are outliers"})]}),n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Direct Admissions:"}),n.jsx("span",{className:"dark:text-white",children:"4% are outliers"})]}),n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Transfers:"}),n.jsx("span",{className:"dark:text-white",children:"22% are outliers"})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Contributing Factors"}),n.jsx("ul",{className:"text-sm space-y-1",children:ce.slice(0,4).map((w,Pe)=>n.jsxs("li",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[w.factor,":"]}),n.jsxs("span",{className:"dark:text-white",children:[w.percentage,"% of outliers"]})]},Pe))})]})]})]}),n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Hospital-Specific Outlier Rates",className:"mb-6 bg-blue-50 dark:bg-blue-900/20",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-blue-200 dark:divide-blue-800",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 dark:text-blue-300 uppercase tracking-wider",children:"Hospital"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 dark:text-blue-300 uppercase tracking-wider",children:"Overall Outlier %"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 dark:text-blue-300 uppercase tracking-wider",children:"Top Source"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-blue-800 dark:text-blue-300 uppercase tracking-wider",children:"Avg. Outlier Time"})]})}),n.jsxs("tbody",{className:"divide-y divide-blue-100 dark:divide-blue-800",children:[n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Virtua Memorial"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"14%"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"ED (76%)"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"8.2 hours"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Virtua Voorhees"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"11%"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"ED (82%)"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"7.6 hours"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Virtua Marlton"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"6%"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Transfers (54%)"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"6.8 hours"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Virtua Willingboro"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"15%"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Transfers (68%)"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"9.1 hours"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Virtua Camden"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"18%"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"Transfers (72%)"}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:"9.7 hours"})]})]})]})})}),n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold dark:text-white",children:"Problematic Pathways"}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs("button",{onClick:()=>R(!c),className:"flex items-center px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white rounded-md",children:[n.jsx(Vt,{icon:"carbon:filter",className:"mr-1"}),"Filter"]})})]}),n.jsx(Ue,{isSubpanel:!0,dropLightIntensity:"medium",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Source & Complex Pathway"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cases (24h)"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"% of Source"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Avg. Duration"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Median"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"% Outliers"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ce.map(w=>n.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:[n.jsx("div",{className:"font-medium",children:w.source}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.pathway})]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:w.cases24h}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:[w.percentage,"%"]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:w.avgDuration}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:w.medianDuration}),n.jsx("td",{className:"px-4 py-3 text-sm",children:n.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${w.outlierPercentage<10?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":w.outlierPercentage<50?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:[w.outlierPercentage,"%"]})})]},w.id))})]})})})]}),ke=()=>n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Time of Day Impact",className:"bg-indigo-50 dark:bg-indigo-900/20",children:[n.jsxs("div",{className:"mt-2 p-4 bg-gray-900 rounded-lg",children:[n.jsx("div",{className:"text-center text-white text-sm mb-2",children:"Time of Day Impact Chart"}),n.jsx("div",{className:"text-xs text-gray-300 text-center",children:"Using chartTheme for consistent styling"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-indigo-200 dark:divide-indigo-800",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-indigo-800 dark:text-indigo-300 uppercase tracking-wider",children:"Time Period"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-indigo-800 dark:text-indigo-300 uppercase tracking-wider",children:"Avg. Time"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-indigo-800 dark:text-indigo-300 uppercase tracking-wider",children:"Volume"})]})}),n.jsx("tbody",{className:"divide-y divide-indigo-100 dark:divide-indigo-800",children:He.timeOfDay.map((w,Pe)=>n.jsxs("tr",{className:w.volume==="Very High"?"bg-red-50 dark:bg-red-900/20":"",children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.period}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.avgTime}),n.jsx("td",{className:"px-3 py-2 text-sm",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${w.volume==="Low"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":w.volume==="Medium"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":w.volume==="High"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:w.volume})})]},Pe))})]})})]}),n.jsxs(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Day of Week Impact",className:"bg-violet-50 dark:bg-violet-900/20",children:[n.jsxs("div",{className:"mt-2 p-4 bg-gray-900 rounded-lg",children:[n.jsx("div",{className:"text-center text-white text-sm mb-2",children:"Day of Week Impact Chart"}),n.jsx("div",{className:"text-xs text-gray-300 text-center",children:"Using chartTheme for consistent styling"})]}),n.jsx("div",{className:"overflow-x-auto mt-3",children:n.jsxs("table",{className:"min-w-full divide-y divide-violet-200 dark:divide-violet-800",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-violet-800 dark:text-violet-300 uppercase tracking-wider",children:"Day"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-violet-800 dark:text-violet-300 uppercase tracking-wider",children:"Avg. Time"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-violet-800 dark:text-violet-300 uppercase tracking-wider",children:"Volume"})]})}),n.jsx("tbody",{className:"divide-y divide-violet-100 dark:divide-violet-800",children:He.dayOfWeek.map((w,Pe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.day}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.avgTime}),n.jsx("td",{className:"px-3 py-2 text-sm",children:n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${w.volume==="Low"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":w.volume==="Medium"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:w.volume})})]},Pe))})]})})]})]}),n.jsxs(Ue,{isSubpanel:!0,dropLightIntensity:"strong",title:"Hospital Performance Comparison",className:"mb-6 bg-emerald-50 dark:bg-emerald-900/20",children:[n.jsxs("div",{className:"mt-2 p-4 bg-gray-900 rounded-lg mb-3",children:[n.jsx("div",{className:"text-center text-white text-sm mb-2",children:"Hospital Performance Comparison Chart"}),n.jsx("div",{className:"text-xs text-gray-300 text-center",children:"Using chartTheme for consistent styling"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-emerald-200 dark:divide-emerald-800",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-emerald-800 dark:text-emerald-300 uppercase tracking-wider",children:"Hospital"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-emerald-800 dark:text-emerald-300 uppercase tracking-wider",children:"Bed Count"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-emerald-800 dark:text-emerald-300 uppercase tracking-wider",children:"Avg. Time"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-emerald-800 dark:text-emerald-300 uppercase tracking-wider",children:"Cases (24h)"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-emerald-800 dark:text-emerald-300 uppercase tracking-wider",children:"Top Source"})]})}),n.jsx("tbody",{className:"divide-y divide-emerald-100 dark:divide-emerald-800",children:he.map((w,Pe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm font-medium dark:text-white",children:w.name}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.bedCount}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.avgTime}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.caseCount}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.topSource})]},Pe))})]})})]}),n.jsxs(Ue,{isSubpanel:!0,dropLightIntensity:"medium",title:"Monthly Improvement Trends",className:"bg-teal-50 dark:bg-teal-900/20",children:[n.jsxs("p",{className:"text-sm mb-3 dark:text-white",children:["Overall system improvement: ",n.jsx("span",{className:"font-semibold text-teal-600 dark:text-teal-400",children:Se.overallImprovement})," in bed assignment times over the past 12 months."]}),n.jsxs("div",{className:"mt-2 p-4 bg-gray-900 rounded-lg mb-3",children:[n.jsx("div",{className:"text-center text-white text-sm mb-2",children:"Monthly Improvement Trends Chart"}),n.jsx("div",{className:"text-xs text-gray-300 text-center",children:"Using chartTheme for consistent styling"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-teal-200 dark:divide-teal-800",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-teal-800 dark:text-teal-300 uppercase tracking-wider",children:"Source"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-teal-800 dark:text-teal-300 uppercase tracking-wider",children:"Improvement"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-teal-800 dark:text-teal-300 uppercase tracking-wider",children:"Current Avg"}),n.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-teal-800 dark:text-teal-300 uppercase tracking-wider",children:"Previous Avg"})]})}),n.jsx("tbody",{className:"divide-y divide-teal-100 dark:divide-teal-800",children:Se.bySource.map((w,Pe)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-sm font-medium dark:text-white",children:w.source}),n.jsx("td",{className:"px-3 py-2 text-sm font-semibold text-teal-600 dark:text-teal-400",children:w.improvement}),n.jsx("td",{className:"px-3 py-2 text-sm dark:text-white",children:w.current}),n.jsx("td",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:w.previous})]},Pe))})]})})]})]}),xt=n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mr-2",children:"Map:"}),n.jsxs("select",{className:"text-sm border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white py-1 px-2",value:z,onChange:w=>Z(w.target.value),children:[n.jsx("option",{value:"bed-assignment",children:"Bed Assignment"}),n.jsx("option",{value:"or-turnover",children:"OR Turnover"}),n.jsx("option",{value:"discharge",children:"Discharge Process"}),n.jsx("option",{value:"lab-results",children:"Lab Results"})]})]});return n.jsxs(Ue,{title:"Process Variants",headerRight:xt,children:[n.jsx(Ux,{menuGroups:J,activeTab:u,onTabChange:U}),n.jsxs("div",{className:"mt-4",children:[u==="summary"&&se(),u==="outliers"&&oe(),u==="statistics"&&ke()]})]})};console.log("Imported workflows in Process.jsx:",ci);const Gp=({auth:u,savedLayout:pe})=>{const[c,R]=D.useState(null),[L,Te]=D.useState(null),[A,le]=D.useState(null),[z,Z]=D.useState(!0),[ne,ee]=D.useState(null),[he,ge]=D.useState(!1),[Ce,He]=D.useState(!1),[ce,Se]=D.useState("process-map"),[G,we]=D.useState("Bed Placement"),[U,J]=D.useState("Vertical"),[se,oe]=D.useState([new Date(2024,0,1),new Date]),ke=D.useRef(!1);D.useEffect(()=>(console.log("Component mounting - initializing with Bed Placement workflow"),we("Bed Placement"),Z(!0),(async()=>{try{console.log("Directly loading bed_placement_process_map.json");const P=await fetch("/mock-data/bed_placement_process_map.json");if(!P.ok)throw new Error(`Failed to load Bed Placement data: ${P.status}`);const fe=await P.json();if(console.log("Successfully loaded Bed Placement data:",fe),!fe||!fe.nodes||!fe.edges)throw new Error("Invalid Bed Placement data structure");R(fe),ke.current=!0}catch(P){console.error("Error loading Bed Placement data:",P),ee(`Failed to load Bed Placement data: ${P.message}`)}finally{Z(!1)}})(),()=>{console.log("Process component unmounting")}),[]);const xt=g=>{console.log(`Changing map to: ${g}`),g!==G&&(we(g),Te(null),le(null),ge(!1),g==="Bed Placement"?(console.log("Special handling for Bed Placement map"),Z(!0),fetch("/mock-data/bed_placement_process_map.json").then(P=>{if(!P.ok)throw new Error(`Failed to load Bed Placement data: ${P.status}`);return P.json()}).then(P=>{console.log("Successfully loaded Bed Placement data directly"),R(P),ee(null)}).catch(P=>{console.error("Error loading Bed Placement data:",P),ee(`Failed to load Bed Placement data: ${P.message}`),te("Bed Placement")}).finally(()=>Z(!1))):te(g))},[w,Pe]=D.useState({selectedHospital:"",selectedUnit:"",selectedSpecialty:"",startDate:new Date(2024,9,1),endDate:new Date(2024,11,31),showComparison:!1,compStartDate:new Date(2024,0,1),compEndDate:new Date(2024,5,30)}),Fe=D.useRef(null),N=[{id:"process-map",label:"Process Maps",icon:"lucide:map"},{id:"variants",label:"Process Variants",icon:"lucide:git-branch"},{id:"statistics",label:"Statistics",icon:"lucide:bar-chart"},{id:"optimization",label:"Optimization",icon:"lucide:settings"}];li();const T=g=>{Se(g);const P=new URL(window.location);P.searchParams.set("tab",g),window.history.pushState({},"",P)};D.useEffect(()=>{const g=new URL(window.location),P=g.searchParams.get("tab");P&&N.some(fe=>fe.id===P)?Se(P):(Se("process-map"),g.searchParams.set("tab","process-map"),window.history.replaceState({},"",g))},[]);const te=async(g=null)=>{if(!ke.current&&(g==="Bed Placement"||!g&&G==="Bed Placement")){console.log("Skipping fetchData call during initial mount for Bed Placement");return}try{const P=g||G;if(console.log(`Fetching process map data for workflow: ${P}`),Z(!0),ee(null),console.log(`Process map fetch initiated for: ${P} at ${new Date().toISOString()}`),!P){console.error("No workflow specified for fetchData"),ee("No workflow specified"),Z(!1);return}const fe={"Bed Placement":"bed_placement_process_map.json",Admissions:"admissions_process_map.json",Discharges:"discharges_process_map.json","ED to Inpatient":"ed_to_inpatient_process_map.json"},pt="/mock-data";if(fe[P]){console.log(`Loading sample data for ${P} workflow`);try{const tt=await fetch(`${pt}/${fe[P]}`);if(!tt.ok)throw new Error(`Failed to load sample data: ${tt.status}`);const lt=await tt.json();console.log(`Loaded sample ${P} data:`,lt),R(lt),Z(!1);return}catch(tt){console.error(`Error loading sample ${P} data:`,tt)}}const Ae=new URL("/improvement/api/nursing-operations",window.location.origin);Ae.searchParams.append("hospital","Virtua Mullica Hospital"),Ae.searchParams.append("workflow",P),Ae.searchParams.append("timeRange","7 Days"),Ae.searchParams.append("format","mock_data"),console.log(`Using mock data format for all workflows including ${P}`),Ae.searchParams.append("nodeCount",100),Ae.searchParams.append("arcCount",10),Ae.searchParams.append("parallelismFactor",40),Ae.searchParams.append("frequencyMetric","case"),Ae.searchParams.append("durationMetric","average"),console.log(`API request URL: ${Ae.toString()}`);const at=await fetch(Ae,{headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"}});if(!at.ok)throw console.error(`API response not OK: ${at.status} ${at.statusText}`),new Error(`HTTP error! status: ${at.status}`);const Kt=at.headers.get("content-type");if(!Kt||!Kt.includes("application/json"))throw console.error(`Unexpected content type: ${Kt}`),new Error(`Expected JSON response but got ${Kt}`);const Le=await at.json();if(console.log(`Received data for ${G}:`,Le),!Le||!Le.nodes||!Le.edges)throw console.error("Invalid data structure received:",Le),new Error("Invalid data structure received from API");console.log(`Validating data structure for ${G}...`);const Ye=Le.nodes[0];if(Ye){console.log("First node structure:",Ye);const tt="label"in Ye||Ye.data&&"label"in Ye.data,lt="type"in Ye,Rt="position"in Ye;console.log("Data format validation:",{hasLabel:tt,hasType:lt,hasPosition:Rt,nodeCount:Le.nodes.length,edgeCount:Le.edges.length})}R(Le),console.log(`Successfully loaded ${G} process map with ${Le.nodes.length} nodes and ${Le.edges.length} edges`)}catch(P){const fe=g||G;console.error(`Error fetching data for ${fe}:`,P),ee(`Failed to load process data for ${fe}: ${P.message}`),R(null),console.error("Error details:",{workflow:fe,url:url==null?void 0:url.toString(),error:P.stack||P.message})}finally{Z(!1)}};D.useEffect(()=>{ke.current&&G&&(console.log(`Workflow changed to: ${G}, fetching data`),te(G))},[G]);const ie=g=>{Te(g),le(null),ge(!0)},Y=g=>{le(g),Te(null),ge(!0)},de=g=>{oe(g),console.log(`Timeline range updated: ${g[0].toLocaleTimeString()} - ${g[1].toLocaleTimeString()}`)},It=()=>{ge(!1),Te(null),le(null)},Ee=()=>{if(z)return n.jsxs("div",{className:"flex items-center justify-center h-64",children:[n.jsx(ni.div,{initial:{opacity:0},animate:{opacity:1},className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-healthcare-primary dark:border-healthcare-primary-dark"}),n.jsxs("div",{className:"ml-4 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:["Loading ",G," process map..."]})]});if(ne)return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ni.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded relative max-w-xl",role:"alert",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Vt,{icon:"lucide:alert-triangle",className:"h-5 w-5 text-red-400"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("p",{className:"text-sm font-medium mb-2",children:["Error loading ",G," process map"]}),n.jsx("p",{className:"text-sm",children:ne}),n.jsx("button",{onClick:()=>te(G),className:"mt-3 px-4 py-2 bg-healthcare-primary dark:bg-healthcare-primary-dark text-white rounded hover:bg-healthcare-primary-dark dark:hover:bg-healthcare-primary transition-colors",children:"Retry"}),n.jsx("button",{className:"mt-2 px-3 py-1 text-sm bg-red-200 dark:bg-red-800 rounded",onClick:()=>window.location.reload(),children:"Retry"})]})]})})});switch(ce){case"process-map":return n.jsxs(Ue,{dropLightIntensity:"medium",title:"Process Maps",headerRight:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("label",{htmlFor:"map-selector",className:"mr-2 text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Map:"}),n.jsx("select",{id:"map-selector",value:G,onChange:g=>{console.log(`Changing selected map from ${G} to ${g.target.value}`),xt(g.target.value)},className:"px-3 py-1.5 bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-healthcare-primary focus:border-transparent text-sm",children:ci.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("label",{htmlFor:"direction-selector",className:"mr-2 text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Direction:"}),n.jsxs("select",{id:"direction-selector",value:U,onChange:g=>J(g.target.value),className:"px-3 py-1.5 bg-healthcare-surface dark:bg-healthcare-surface-dark border border-healthcare-border dark:border-healthcare-border-dark rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-healthcare-primary focus:border-transparent text-sm",children:[n.jsx("option",{value:"Vertical",children:"Vertical"}),n.jsx("option",{value:"Horizontal",children:"Horizontal"})]})]})]}),headerContent:n.jsx("div",{className:"flex justify-center w-full",children:n.jsx(Gl,{onChange:de})}),children:[n.jsxs("div",{className:"relative",children:[n.jsx(Vx,{ref:Fe,data:c,savedLayout:pe,onNodeClick:ie,onEdgeClick:Y,workflowName:G,processType:G.toLowerCase().replace(/\s+/g,"_"),flowDirection:U.toLowerCase()}),n.jsx("button",{onClick:()=>{var g;return(g=Fe.current)==null?void 0:g.resetLayout()},className:"absolute bottom-4 right-4 p-3 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark text-white shadow-lg hover:bg-healthcare-primary-hover dark:hover:bg-healthcare-primary-dark-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-healthcare-primary dark:focus:ring-healthcare-primary-dark transition-colors duration-200",title:"Reset Layout",children:n.jsx(Vt,{icon:"lucide:refresh-cw",className:"h-5 w-5"})})]}),n.jsx(Kx,{isOpen:he,onClose:It,selectedNode:L,selectedEdge:A,overallMetrics:c==null?void 0:c.metrics}),n.jsx(Mx,{isOpen:Ce,onClose:()=>He(!1),metrics:c==null?void 0:c.metrics})]});case"variants":return n.jsx(Xx,{});case"statistics":return n.jsx(Ue,{title:"Process Statistics",dropLightIntensity:"medium",children:n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"text-lg font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-4",children:"Process Statistics"}),n.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-6",children:"View detailed statistics about your processes."}),n.jsx("div",{className:"bg-healthcare-surface dark:bg-healthcare-surface-dark p-6 rounded-lg",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vt,{icon:"lucide:bar-chart",className:"h-16 w-16 mx-auto text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark opacity-50"}),n.jsx("h4",{className:"mt-4 text-xl font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Process Statistics Coming Soon"}),n.jsx("p",{className:"mt-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"This feature is currently under development."})]})})]})});case"optimization":return n.jsx(Ue,{title:"Process Optimization",dropLightIntensity:"medium",children:n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"text-lg font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-4",children:"Process Optimization"}),n.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-6",children:"Identify optimization opportunities in your processes."}),n.jsx("div",{className:"bg-healthcare-surface dark:bg-healthcare-surface-dark p-6 rounded-lg",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vt,{icon:"lucide:settings",className:"h-16 w-16 mx-auto text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark opacity-50"}),n.jsx("h4",{className:"mt-4 text-xl font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Process Optimization Coming Soon"}),n.jsx("p",{className:"mt-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"This feature is currently under development."})]})})]})});default:return n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vt,{icon:"lucide:alert-circle",className:"h-12 w-12 mx-auto text-healthcare-warning dark:text-healthcare-warning-dark mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Tab Not Found"}),n.jsx("p",{className:"mt-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"The requested tab does not exist."}),n.jsx("button",{className:"mt-4 px-4 py-2 bg-healthcare-primary dark:bg-healthcare-primary-dark text-white rounded-md hover:bg-healthcare-primary-hover dark:hover:bg-healthcare-primary-dark-hover",onClick:()=>T("process-map"),children:"Go to Process Maps"})]})})}};return n.jsxs(Ax,{children:[n.jsx(Sx,{title:"Process Analysis - Improvement"}),n.jsxs("div",{className:"flex h-full gap-4 p-4",children:[n.jsxs("div",{className:"w-64 flex flex-col gap-4",children:[n.jsx(Ue,{title:"Process Analysis",className:"rounded-lg overflow-hidden",children:n.jsx("ul",{className:"space-y-2 p-2",children:N.map(g=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>T(g.id),className:`flex items-center w-full px-4 py-3 text-sm font-medium rounded-md transition-all duration-300 ${ce===g.id?"bg-healthcare-primary/10 dark:bg-healthcare-primary-dark/20 text-healthcare-primary dark:text-healthcare-primary-dark border border-healthcare-primary/30 dark:border-healthcare-primary-dark/30":"text-healthcare-text-primary dark:text-healthcare-text-primary-dark hover:bg-healthcare-hover dark:hover:bg-healthcare-hover-dark border border-transparent"}`,children:[n.jsx(Vt,{icon:g.icon,className:"w-5 h-5 mr-3"}),g.label]})},g.id))})}),n.jsx(zl,{hospitals:[{id:"marh",name:"Virtua Marlton Hospital"},{id:"memh",name:"Virtua Mount Holly Hospital"},{id:"ollh",name:"Virtua Our Lady of Lourdes Hospital"},{id:"vorh",name:"Virtua Voorhees Hospital"}],units:[{id:"unit1",name:"Medical/Surgical",hospitalId:"marh"},{id:"unit2",name:"ICU",hospitalId:"marh"},{id:"unit3",name:"Emergency",hospitalId:"memh"},{id:"unit4",name:"Medical/Surgical",hospitalId:"ollh"},{id:"unit5",name:"ICU",hospitalId:"vorh"}],specialties:[{id:"spec1",name:"Orthopedics",unitId:"unit1"},{id:"spec2",name:"Cardiology",unitId:"unit2"},{id:"spec3",name:"General Surgery",unitId:"unit3"},{id:"spec4",name:"Neurology",unitId:"unit4"},{id:"spec5",name:"Pulmonology",unitId:"unit5"}],initialFilters:w,onFilterChange:g=>{Pe(g)},className:"px-2"})]}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx(Bx,{children:n.jsx(ni.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"h-full",children:Ee()})})})]})]})};export{Gp as default};
