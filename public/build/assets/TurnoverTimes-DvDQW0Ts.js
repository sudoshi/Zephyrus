import{r as c,P as t,j as e,K as N,L as P}from"./app-DNCPaP7U.js";import{A as H}from"./AnalyticsLayout-Dzg-osze.js";import{H as A}from"./HierarchicalFilters-D21C3-_q.js";import{_ as S,H as x,p as b}from"./PieChart-DNJdnlhf.js";import{P as g}from"./Panel-DEM8HheS.js";import{u as T}from"./useDarkMode-Cjnn_MHf.js";import{E as k}from"./ErrorBoundary-ti8iig1M.js";import{A as W}from"./index-BILkJVdl.js";import{m as O}from"./proxy-nweJ2GES.js";import{T as z}from"./TabNavigation-CocRP9X6.js";import"./AuthenticatedLayout-bVzRFQ8r.js";import"./TopNavigation-BPEMQkzy.js";import"./iconify-CuDxMG-b.js";import"./UserAvatar-DdRArJVQ.js";import"./DarkModeToggle-oH18ZJvw.js";import"./useFocusVisible-KZXt4Cm4.js";import"./portal-B_iHtz37.js";import"./transition-l3QoJGEh.js";import"./FlowbiteThemeProvider-DOyZZW8A.js";import"./ToggleSwitch-wWvkbsAB.js";import"./uniqueId-S-XtUeLk.js";import"./_baseAssignValue-CSgy8S_V.js";import"./AnalyticsContext-DCNkK6OB.js";import"./format-D9ti-yNI.js";import"./filter-CKwhiPJ7.js";import"./createLucideIcon-Ce72M_cX.js";import"./chevron-down-h_OS1dfS.js";import"./calendar-CYnYG7qc.js";import"./x-DW-vgWTY.js";import"./create-factory-CkrcLOT8.js";import"./create-visual-element-BEDpu-j8.js";const l={sites:{"MARH OR":{medianTurnoverTime:32,averageTurnoverTime:36.5,totalCases:2345,totalTurnovers:2129,turnoverDistribution:{"0-15 min":124,"15-30 min":743,"30-45 min":865,"45-60 min":312,"60-90 min":76,"90+ min":9},rooms:[{room:"OR 1",medianTurnoverTime:30,averageTurnoverTime:34.2},{room:"OR 2",medianTurnoverTime:31,averageTurnoverTime:35.8},{room:"OR 3",medianTurnoverTime:33,averageTurnoverTime:37.5},{room:"OR 4",medianTurnoverTime:32,averageTurnoverTime:36.3},{room:"OR 5",medianTurnoverTime:34,averageTurnoverTime:38.1},{room:"OR 6",medianTurnoverTime:31,averageTurnoverTime:35.4},{room:"OR 7",medianTurnoverTime:33,averageTurnoverTime:37.2},{room:"OR 8",medianTurnoverTime:32,averageTurnoverTime:36.7}],trends:{medianTurnoverTime:[{month:"Jan",value:34},{month:"Feb",value:33},{month:"Mar",value:33},{month:"Apr",value:32},{month:"May",value:32},{month:"Jun",value:31},{month:"Jul",value:31},{month:"Aug",value:32},{month:"Sep",value:32},{month:"Oct",value:31},{month:"Nov",value:31},{month:"Dec",value:32}],averageTurnoverTime:[{month:"Jan",value:38.5},{month:"Feb",value:37.8},{month:"Mar",value:37.5},{month:"Apr",value:36.8},{month:"May",value:36.5},{month:"Jun",value:35.8},{month:"Jul",value:35.5},{month:"Aug",value:36.2},{month:"Sep",value:36.5},{month:"Oct",value:35.8},{month:"Nov",value:35.5},{month:"Dec",value:36.2}]}},"VORH JRI OR":{medianTurnoverTime:30,averageTurnoverTime:34.2,totalCases:1876,totalTurnovers:1704,turnoverDistribution:{"0-15 min":136,"15-30 min":682,"30-45 min":648,"45-60 min":187,"60-90 min":46,"90+ min":5},rooms:[{room:"OR 1",medianTurnoverTime:28,averageTurnoverTime:32.5},{room:"OR 2",medianTurnoverTime:29,averageTurnoverTime:33.7},{room:"OR 3",medianTurnoverTime:31,averageTurnoverTime:35.4},{room:"OR 4",medianTurnoverTime:30,averageTurnoverTime:34.2},{room:"OR 5",medianTurnoverTime:32,averageTurnoverTime:36},{room:"OR 6",medianTurnoverTime:29,averageTurnoverTime:33.3}],trends:{medianTurnoverTime:[{month:"Jan",value:32},{month:"Feb",value:31},{month:"Mar",value:31},{month:"Apr",value:30},{month:"May",value:30},{month:"Jun",value:29},{month:"Jul",value:29},{month:"Aug",value:30},{month:"Sep",value:30},{month:"Oct",value:29},{month:"Nov",value:29},{month:"Dec",value:30}],averageTurnoverTime:[{month:"Jan",value:36.2},{month:"Feb",value:35.5},{month:"Mar",value:35.2},{month:"Apr",value:34.5},{month:"May",value:34.2},{month:"Jun",value:33.5},{month:"Jul",value:33.2},{month:"Aug",value:33.9},{month:"Sep",value:34.2},{month:"Oct",value:33.5},{month:"Nov",value:33.2},{month:"Dec",value:33.9}]}},"VORH Main OR":{medianTurnoverTime:33,averageTurnoverTime:37.8,totalCases:2103,totalTurnovers:1912,turnoverDistribution:{"0-15 min":115,"15-30 min":612,"30-45 min":803,"45-60 min":294,"60-90 min":82,"90+ min":6},rooms:[{room:"OR 1",medianTurnoverTime:31,averageTurnoverTime:35.6},{room:"OR 2",medianTurnoverTime:32,averageTurnoverTime:36.9},{room:"OR 3",medianTurnoverTime:34,averageTurnoverTime:38.7},{room:"OR 4",medianTurnoverTime:33,averageTurnoverTime:37.5},{room:"OR 5",medianTurnoverTime:35,averageTurnoverTime:39.3},{room:"OR 6",medianTurnoverTime:32,averageTurnoverTime:36.6},{room:"OR 7",medianTurnoverTime:34,averageTurnoverTime:38.4},{room:"OR 8",medianTurnoverTime:33,averageTurnoverTime:37.9},{room:"OR 9",medianTurnoverTime:35,averageTurnoverTime:39.1},{room:"OR 10",medianTurnoverTime:32,averageTurnoverTime:36.8}],trends:{medianTurnoverTime:[{month:"Jan",value:35},{month:"Feb",value:34},{month:"Mar",value:34},{month:"Apr",value:33},{month:"May",value:33},{month:"Jun",value:32},{month:"Jul",value:32},{month:"Aug",value:33},{month:"Sep",value:33},{month:"Oct",value:32},{month:"Nov",value:32},{month:"Dec",value:33}],averageTurnoverTime:[{month:"Jan",value:39.8},{month:"Feb",value:39.1},{month:"Mar",value:38.8},{month:"Apr",value:38.1},{month:"May",value:37.8},{month:"Jun",value:37.1},{month:"Jul",value:36.8},{month:"Aug",value:37.5},{month:"Sep",value:37.8},{month:"Oct",value:37.1},{month:"Nov",value:36.8},{month:"Dec",value:37.5}]}}},services:{Orthopedics:{medianTurnoverTime:34,averageTurnoverTime:38.5,totalCases:1106,totalTurnovers:1003},"General Surgery":{medianTurnoverTime:31,averageTurnoverTime:35.2,totalCases:982,totalTurnovers:891},Neurosurgery:{medianTurnoverTime:36,averageTurnoverTime:40.8,totalCases:543,totalTurnovers:492},Cardiothoracic:{medianTurnoverTime:38,averageTurnoverTime:42.5,totalCases:421,totalTurnovers:382},ENT:{medianTurnoverTime:29,averageTurnoverTime:33.7,totalCases:678,totalTurnovers:615},Urology:{medianTurnoverTime:30,averageTurnoverTime:34.3,totalCases:524,totalTurnovers:475},Vascular:{medianTurnoverTime:35,averageTurnoverTime:39.2,totalCases:387,totalTurnovers:351},Plastics:{medianTurnoverTime:32,averageTurnoverTime:36.4,totalCases:312,totalTurnovers:283}},dayOfWeek:{"MARH OR":{Monday:{median:33,average:37.5},Tuesday:{median:31,average:35.8},Wednesday:{median:32,average:36.5},Thursday:{median:32,average:36.3},Friday:{median:34,average:38.2}},"VORH JRI OR":{Monday:{median:31,average:35.2},Tuesday:{median:29,average:33.5},Wednesday:{median:30,average:34.2},Thursday:{median:30,average:34},Friday:{median:32,average:35.9}},"VORH Main OR":{Monday:{median:34,average:38.8},Tuesday:{median:32,average:36.1},Wednesday:{median:33,average:37.8},Thursday:{median:33,average:37.6},Friday:{median:35,average:39.5}}},timeOfDay:{"MARH OR":{"7:00-9:00":{median:30,average:34.2},"9:00-11:00":{median:31,average:35.3},"11:00-13:00":{median:34,average:38.6},"13:00-15:00":{median:32,average:36.5},"15:00-17:00":{median:33,average:37.4},"17:00-19:00":{median:35,average:39.8}},"VORH JRI OR":{"7:00-9:00":{median:28,average:31.9},"9:00-11:00":{median:29,average:33},"11:00-13:00":{median:32,average:36.3},"13:00-15:00":{median:30,average:34.2},"15:00-17:00":{median:31,average:35.1},"17:00-19:00":{median:33,average:37.5}},"VORH Main OR":{"7:00-9:00":{median:31,average:35.5},"9:00-11:00":{median:32,average:36.6},"11:00-13:00":{median:35,average:39.9},"13:00-15:00":{median:33,average:37.8},"15:00-17:00":{median:34,average:38.7},"17:00-19:00":{median:36,average:41.1}}}},B=(p,i=[])=>{const[u,f]=c.useState(null),[y,r]=c.useState(!0),[n,d]=c.useState(null);return c.useEffect(()=>{(async()=>{r(!0);try{const m=await p();f(m),d(null)}catch(m){d(m)}finally{r(!1)}})()},i),{data:u,isLoading:y,error:n}},j=({filters:p})=>{const{selectedHospital:i,selectedLocation:u,selectedSpecialty:f,dateRange:y}=p,[r]=T(),n=c.useMemo(()=>{if(u&&l.sites[u])return l.sites[u];if(i){const o=Object.keys(l.sites).find(a=>a.startsWith(i));return o?l.sites[o]:l.sites["MARH OR"]}else return l.sites["MARH OR"]},[i,u]),d=c.useMemo(()=>Object.entries(n.turnoverDistribution).map(([o,a])=>({id:o,label:o,value:a})),[n]),v=c.useMemo(()=>n.rooms.map(o=>({room:o.room,"Median Turnover":o.medianTurnoverTime,"Average Turnover":o.averageTurnoverTime})),[n]),m={axis:{ticks:{text:{fill:r?"#e5e7eb":"#374151"}},legend:{text:{fill:r?"#e5e7eb":"#374151"}}},grid:{line:{stroke:r?"#374151":"#e5e7eb"}},tooltip:{container:{background:r?"#1f2937":"#ffffff",color:r?"#e5e7eb":"#374151"}},labels:{text:{fill:r?"#e5e7eb":"#374151"}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(g,{title:"Median Turnover Time",isSubpanel:!0,dropLightIntensity:"medium",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[n.medianTurnoverTime," min"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Median time between cases"})]}),e.jsxs(g,{title:"Average Turnover Time",isSubpanel:!0,dropLightIntensity:"medium",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[n.averageTurnoverTime," min"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average time between cases"})]}),e.jsxs(g,{title:"Total Cases",isSubpanel:!0,dropLightIntensity:"medium",children:[e.jsx("div",{className:"text-3xl font-bold",children:n.totalCases}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cases in selected period"})]}),e.jsxs(g,{title:"Total Turnovers",isSubpanel:!0,dropLightIntensity:"medium",children:[e.jsx("div",{className:"text-3xl font-bold",children:n.totalTurnovers}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Turnovers in selected period"})]})]}),e.jsx(g,{title:"Turnover Time Distribution",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(S,{data:d,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:r?"#e5e7eb":"#374151",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},colors:{scheme:"category10"},theme:m,legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:r?"#e5e7eb":"#374151",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:r?"#ffffff":"#000000"}}]}]})})}),e.jsx(g,{title:"Room Comparison - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:v,keys:["Median Turnover","Average Turnover"],indexBy:"room",margin:{top:20,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Room",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:m})})})]})};j.propTypes={filters:t.shape({selectedHospital:t.string,selectedLocation:t.string,selectedSpecialty:t.string,selectedSurgeon:t.string,dateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)}),showComparison:t.bool,comparisonDateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)})}).isRequired};const D=({filters:p})=>{const{selectedHospital:i,selectedLocation:u,selectedSpecialty:f,dateRange:y}=p,[r]=T(),n=c.useMemo(()=>{if(u&&l.sites[u])return l.sites[u];if(i){const a=Object.keys(l.sites).find(s=>s.startsWith(i));return a?l.sites[a]:l.sites["MARH OR"]}else return l.sites["MARH OR"]},[i,u]),d=c.useMemo(()=>[{id:"Median Turnover Time",data:n.trends.medianTurnoverTime.map(a=>({x:a.month,y:a.value}))},{id:"Average Turnover Time",data:n.trends.averageTurnoverTime.map(a=>({x:a.month,y:a.value}))}],[n]),v=c.useMemo(()=>[{id:"Median Turnover Time",data:n.dayOfWeek.map(a=>({x:a.day,y:a.medianTurnoverTime}))},{id:"Average Turnover Time",data:n.dayOfWeek.map(a=>({x:a.day,y:a.averageTurnoverTime}))}],[n]),m=c.useMemo(()=>{const a=n.trends.medianTurnoverTime.map(h=>({x:h.month,y:h.value})),s=n.trends.medianTurnoverTime.map(h=>({x:h.month,y:h.value*(1+(Math.random()*.2-.1))}));return[{id:"Current Year",data:a},{id:"Previous Year",data:s}]},[n]),o={axis:{ticks:{text:{fill:r?"#e5e7eb":"#374151"}},legend:{text:{fill:r?"#e5e7eb":"#374151"}}},grid:{line:{stroke:r?"#374151":"#e5e7eb"}},tooltip:{container:{background:r?"#1f2937":"#ffffff",color:r?"#e5e7eb":"#374151"}},crosshair:{line:{stroke:r?"#e5e7eb":"#374151"}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{title:"Monthly Trends - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(b,{data:d,margin:{top:20,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.1f",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendOffset:-40,legendPosition:"middle"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],theme:o})})}),e.jsx(g,{title:"Day of Week Analysis - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(b,{data:v,margin:{top:20,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.1f",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Day of Week",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendOffset:-40,legendPosition:"middle"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],theme:o})})}),e.jsx(g,{title:"Year-over-Year Comparison - Median Turnover Time",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(b,{data:m,margin:{top:20,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.1f",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendOffset:-40,legendPosition:"middle"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}],theme:o})})})]})};D.propTypes={filters:t.shape({selectedHospital:t.string,selectedLocation:t.string,selectedSpecialty:t.string,selectedSurgeon:t.string,dateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)}),showComparison:t.bool,comparisonDateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)})}).isRequired};const R=({filters:p})=>{const{selectedHospital:i,selectedLocation:u,selectedSpecialty:f,dateRange:y}=p,[r]=T();c.useMemo(()=>{if(u&&l.sites[u])return l.sites[u];if(i){const o=Object.keys(l.sites).find(a=>a.startsWith(i));return o?l.sites[o]:l.sites["MARH OR"]}else return l.sites["MARH OR"]},[i,u]);const n=c.useMemo(()=>{const o=[];for(let a=6;a<=22;a++){const s=a<10?`0${a}:00`:`${a}:00`,h=30+Math.random()*10;o.push({hour:s,Weekday:h,Weekend:h+(Math.random()*15-5)})}return o},[]),d=c.useMemo(()=>["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(a=>{const s=30+Math.random()*10,h=s*(1+Math.random()*.2);return{day:a,"Average Turnover":s,"Peak Hour Turnover":h}}),[]),v=c.useMemo(()=>{const o=[];for(let a=6;a<=22;a++){const s=a<10?`0${a}:00`:`${a}:00`;o.push({x:s,y:30+Math.random()*15})}return[{id:"Turnover Time",data:o}]},[]),m={axis:{ticks:{text:{fill:r?"#e5e7eb":"#374151"}},legend:{text:{fill:r?"#e5e7eb":"#374151"}}},grid:{line:{stroke:r?"#374151":"#e5e7eb"}},tooltip:{container:{background:r?"#1f2937":"#ffffff",color:r?"#e5e7eb":"#374151"}},crosshair:{line:{stroke:r?"#e5e7eb":"#374151"}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{title:"Weekday vs Weekend Comparison - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:n,keys:["Weekday","Weekend"],indexBy:"hour",margin:{top:20,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Hour of Day",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:m})})}),e.jsx(g,{title:"Day of Week Analysis - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:d,keys:["Average Turnover","Peak Hour Turnover"],indexBy:"day",margin:{top:20,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Day of Week",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:m})})}),e.jsx(g,{title:"Hourly Trend Analysis - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(b,{data:v,margin:{top:20,right:20,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},yFormat:" >-.1f",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Hour of Day",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendOffset:-40,legendPosition:"middle"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,theme:m,curve:"monotoneX"})})}),e.jsx(g,{title:"Peak Hours Analysis",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Hour Range"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Average Turnover (min)"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Number of Turnovers"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Efficiency Score"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:[{range:"06:00 - 08:00",avg:28.5,count:125,score:"85%"},{range:"08:00 - 10:00",avg:32.7,count:245,score:"78%"},{range:"10:00 - 12:00",avg:35.2,count:278,score:"75%"},{range:"12:00 - 14:00",avg:38.5,count:210,score:"70%"},{range:"14:00 - 16:00",avg:33.8,count:198,score:"77%"},{range:"16:00 - 18:00",avg:30.2,count:156,score:"82%"},{range:"18:00 - 20:00",avg:27.5,count:98,score:"87%"},{range:"20:00 - 22:00",avg:25.8,count:45,score:"90%"}].map((o,a)=>e.jsxs("tr",{className:a%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:o.range}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o.avg}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o.count}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o.score})]},o.range))})]})})})]})};R.propTypes={filters:t.shape({selectedHospital:t.string,selectedLocation:t.string,selectedSpecialty:t.string,selectedSurgeon:t.string,dateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)}),showComparison:t.bool,comparisonDateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)})}).isRequired};const C=({filters:p})=>{const{selectedHospital:i,selectedLocation:u,selectedSpecialty:f,dateRange:y}=p,[r]=T(),n=c.useMemo(()=>{const o=Object.keys(l.sites);return(i?o.filter(s=>s.startsWith(i.toUpperCase())):o).map(s=>{const h=l.sites[s];return{location:s,"Median Turnover":h.medianTurnoverTime,"Average Turnover":h.averageTurnoverTime}})},[i]),d=c.useMemo(()=>{const o=Object.keys(l.sites);return(i?o.filter(s=>s.startsWith(i.toUpperCase())):o).map(s=>{const w=100-l.sites[s].medianTurnoverTime/60*100;return{location:s,"Efficiency Score":Math.min(Math.max(w,0),100).toFixed(1)}})},[i]),v=c.useMemo(()=>{const o=Object.keys(l.sites);return(i?o.filter(s=>s.startsWith(i.toUpperCase())):o).map(s=>{const h=l.sites[s];return{location:s,"Total Cases":h.totalCases,"Total Turnovers":h.totalTurnovers}})},[i]),m={axis:{ticks:{text:{fill:r?"#e5e7eb":"#374151"}},legend:{text:{fill:r?"#e5e7eb":"#374151"}}},grid:{line:{stroke:r?"#374151":"#e5e7eb"}},tooltip:{container:{background:r?"#1f2937":"#ffffff",color:r?"#e5e7eb":"#374151"}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{title:"Location Comparison - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:n,keys:["Median Turnover","Average Turnover"],indexBy:"location",margin:{top:20,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Location",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:m})})}),e.jsx(g,{title:"Location Comparison - Efficiency Score",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:d,keys:["Efficiency Score"],indexBy:"location",margin:{top:20,right:20,bottom:50,left:60},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"category10"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Location",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Efficiency Score (%)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},theme:m})})}),e.jsx(g,{title:"Location Comparison - Case Volume",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:v,keys:["Total Cases","Total Turnovers"],indexBy:"location",margin:{top:20,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Location",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Count",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:m})})})]})};C.propTypes={filters:t.shape({selectedHospital:t.string,selectedLocation:t.string,selectedSpecialty:t.string,selectedSurgeon:t.string,dateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)}),showComparison:t.bool,comparisonDateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)})}).isRequired};const L=({filters:p})=>{const[i]=T(),u=c.useMemo(()=>Object.entries(l.services).map(([n,d])=>({service:n,"Median Turnover":d.medianTurnoverTime,"Average Turnover":d.averageTurnoverTime})),[]),f=c.useMemo(()=>Object.entries(l.services).map(([n,d])=>({id:n,label:n,value:d.totalTurnovers})),[]),y=c.useMemo(()=>Object.entries(l.services).map(([n,d])=>{const v=100-d.medianTurnoverTime/60*100;return{service:n,"Efficiency Score":Math.min(Math.max(v,0),100).toFixed(1)}}),[]),r={axis:{ticks:{text:{fill:i?"#e5e7eb":"#374151"}},legend:{text:{fill:i?"#e5e7eb":"#374151"}}},grid:{line:{stroke:i?"#374151":"#e5e7eb"}},tooltip:{container:{background:i?"#1f2937":"#ffffff",color:i?"#e5e7eb":"#374151"}},labels:{text:{fill:i?"#e5e7eb":"#374151"}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(g,{title:"Service Distribution - Turnovers",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(S,{data:f,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:i?"#e5e7eb":"#374151",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},colors:{scheme:"category10"},theme:r,legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:i?"#e5e7eb":"#374151",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:i?"#ffffff":"#000000"}}]}]})})}),e.jsx(g,{title:"Service Comparison - Efficiency Score",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:y,keys:["Efficiency Score"],indexBy:"service",margin:{top:20,right:20,bottom:50,left:60},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"category10"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Service",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Efficiency Score (%)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},theme:r})})})]}),e.jsx(g,{title:"Service Comparison - Turnover Times",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"h-80",children:e.jsx(x,{data:u,keys:["Median Turnover","Average Turnover"],indexBy:"service",margin:{top:20,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"paired"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Service",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (minutes)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],theme:r})})}),e.jsx(g,{title:"Service Details",isSubpanel:!0,dropLightIntensity:"medium",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Service"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Median Turnover (min)"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Average Turnover (min)"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total Cases"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total Turnovers"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:Object.entries(l.services).map(([n,d],v)=>e.jsxs("tr",{className:v%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:n}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.medianTurnoverTime}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.averageTurnoverTime}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.totalCases}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.totalTurnovers})]},n))})]})})})]})};L.propTypes={filters:t.shape({selectedHospital:t.string,selectedLocation:t.string,selectedSpecialty:t.string,selectedSurgeon:t.string,dateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)}),showComparison:t.bool,comparisonDateRange:t.shape({startDate:t.instanceOf(Date),endDate:t.instanceOf(Date)})}).isRequired};function M({activeView:p="overview"}){const[i,u]=c.useState({selectedHospital:"",selectedLocation:"",selectedSpecialty:"",selectedSurgeon:"",startDate:new Date(new Date().setDate(new Date().getDate()-30)),endDate:new Date,showComparison:!1,compStartDate:new Date(new Date().setDate(new Date().getDate()-60)),compEndDate:new Date(new Date().setDate(new Date().getDate()-30))}),f=()=>Object.keys(l.sites).map(s=>({id:s,name:s,hospitalId:s.split(" ")[0].toLowerCase()})),y=()=>Object.keys(l.services).map(s=>({id:s,name:s})),r=s=>{u(h=>({...h,...s}))},n=async()=>({locationData:l.sites[i.selectedLocation]||l.sites["MARH OR"],serviceData:i.selectedSpecialty?l.services[i.selectedSpecialty]:null}),{data:d,isLoading:v,error:m}=B(n,[i.selectedHospital,i.selectedLocation,i.selectedSpecialty,i.startDate,i.endDate]);if(m)throw m;if(v)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 dark:border-gray-100"})});const o={initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20}},a=()=>e.jsx(W,{mode:"wait",children:e.jsxs(O.div,{initial:"initial",animate:"animate",exit:"exit",variants:o,transition:{duration:.3},children:[p==="overview"&&e.jsx(j,{filters:i}),p==="hourly"&&e.jsx(R,{filters:i}),p==="trends"&&e.jsx(D,{filters:i}),p==="location"&&e.jsx(C,{filters:i}),p==="service"&&e.jsx(L,{filters:i})]},p)});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(k,{children:e.jsx(A,{locations:f(),services:y(),providers:[],onFilterChange:r,initialFilters:i})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(k,{children:a()})})]})}M.propTypes={activeView:t.oneOf(["overview","hourly","trends","location","service"]).isRequired};function F({auth:p}){const{url:i}=N(),u=()=>new URLSearchParams(window.location.search).get("tab")||"overview",[f,y]=c.useState(u);c.useEffect(()=>{const m=new URLSearchParams(window.location.search).get("tab")||"overview";y(m)},[i]);const r=v=>{y(v);const m=new URL(window.location);m.searchParams.set("tab",v),window.history.pushState({},"",m)},n={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}}},d=[{title:"Analysis Views",items:[{id:"overview",label:"Overview",icon:"carbon:dashboard"},{id:"hourly",label:"Hourly Analysis",icon:"carbon:time"},{id:"trends",label:"Trends",icon:"carbon:chart-line"}]},{title:"Detailed Analysis",items:[{id:"location",label:"Location Comparison",icon:"carbon:location"},{id:"service",label:"Service Analysis",icon:"carbon:data-table"}]}];return e.jsxs(H,{auth:p,title:"Turnover Times",children:[e.jsx(P,{title:"Turnover Times"}),e.jsxs(O.div,{initial:"hidden",animate:"visible",variants:n,className:"space-y-6",children:[e.jsx(z,{menuGroups:d,activeTab:f,onTabChange:r}),e.jsx(M,{activeView:f})]})]})}F.propTypes={auth:t.shape({user:t.shape({id:t.number,name:t.string,email:t.string})})};export{F as default};
