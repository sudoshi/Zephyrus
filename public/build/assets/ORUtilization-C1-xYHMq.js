import{r as g,P as x,j as e,K as G,L as Y}from"./app-DNCPaP7U.js";import{A as X}from"./AnalyticsLayout-Dzg-osze.js";import{u as J}from"./AnalyticsContext-DCNkK6OB.js";import{H as _}from"./HierarchicalFilters-D21C3-_q.js";import{E as A}from"./ErrorBoundary-ti8iig1M.js";import{P as y}from"./Panel-DEM8HheS.js";import"./ToggleSwitch-wWvkbsAB.js";import{C as z}from"./Card-CtWgjZqL.js";import"./uniqueId-S-XtUeLk.js";import{C as T}from"./chart-no-axes-column-D8I3q5sa.js";import{T as O}from"./trending-up-CsRcKsV0.js";import{U as I}from"./users-C4ziYTDi.js";import{C as w,T as H}from"./target-nI30E0SG.js";import{D as q}from"./dollar-sign-C8-kikdu.js";import{N as P,L as C,P as D}from"./PieChart-DNJdnlhf.js";import"./AuthenticatedLayout-bVzRFQ8r.js";import"./iconify-CuDxMG-b.js";import{T as K}from"./triangle-alert-LJX56qae.js";import{C as Z}from"./calendar-CYnYG7qc.js";import{c as Q}from"./createLucideIcon-Ce72M_cX.js";import{B as v}from"./BarChart-BcdvIwA0.js";import{A as ee}from"./index-BILkJVdl.js";import{m as te}from"./proxy-nweJ2GES.js";import{T as ae}from"./TabNavigation-CocRP9X6.js";import"./FlowbiteThemeProvider-DOyZZW8A.js";import"./format-D9ti-yNI.js";import"./filter-CKwhiPJ7.js";import"./chevron-down-h_OS1dfS.js";import"./x-DW-vgWTY.js";import"./TopNavigation-BPEMQkzy.js";import"./UserAvatar-DdRArJVQ.js";import"./DarkModeToggle-oH18ZJvw.js";import"./useFocusVisible-KZXt4Cm4.js";import"./portal-B_iHtz37.js";import"./transition-l3QoJGEh.js";import"./_baseAssignValue-CSgy8S_V.js";import"./create-factory-CkrcLOT8.js";import"./create-visual-element-BEDpu-j8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],re=Q("ChartPie",ie),se={locations:{"MARH OR":{id:"marh-or",hospitalId:"marh",hospitalName:"Virtua Marlton Hospital",name:"MARH OR",fullName:"Marlton Operating Room",utilization:73.8,primeTimeUtilization:79.2,nonPrimeTimeUtilization:47.5,totalCases:1106,averageCaseDuration:132,averageTurnoverTime:34,casesPerDay:5.2,rooms:[{id:"MAOR01",name:"VH MARH OR 01",room:"VH MARH OR 01",utilization:82.4,primeTimeUtilization:86.7,nonPrimeTimeUtilization:52.3},{id:"MAOR02",name:"VH MARH OR 02",room:"VH MARH OR 02",utilization:78.9,primeTimeUtilization:83.5,nonPrimeTimeUtilization:49.8}]},"MEMH OR":{id:"memh-or",hospitalId:"memh",hospitalName:"Virtua Mount Holly Hospital",name:"MEMH OR",fullName:"Mt. Holly Operating Room",utilization:75.2,primeTimeUtilization:81.4,nonPrimeTimeUtilization:48.9,totalCases:1245,averageCaseDuration:130,averageTurnoverTime:31,casesPerDay:5.4,rooms:[{id:"MEOR01",name:"VH MEMH OR 01",room:"VH MEMH OR 01",utilization:83.7,primeTimeUtilization:88.2,nonPrimeTimeUtilization:53.8},{id:"MEOR02",name:"VH MEMH OR 02",room:"VH MEMH OR 02",utilization:80.1,primeTimeUtilization:85.3,nonPrimeTimeUtilization:51.2}]},"VORH OR":{id:"vorh-or",hospitalId:"vorh",hospitalName:"Virtua Voorhees Hospital",name:"VORH OR",fullName:"Voorhees Operating Room",utilization:70.6,primeTimeUtilization:76.8,nonPrimeTimeUtilization:43.2,totalCases:956,averageCaseDuration:125,averageTurnoverTime:30,casesPerDay:5,rooms:[{id:"VOR01",name:"VH VORH OR 01",room:"VH VORH OR 01",utilization:78.3,primeTimeUtilization:83.5,nonPrimeTimeUtilization:48.7},{id:"VOR02",name:"VH VORH OR 02",room:"VH VORH OR 02",utilization:74.9,primeTimeUtilization:80.2,nonPrimeTimeUtilization:46.3}]},"OLLH OR":{id:"ollh-or",hospitalId:"ollh",hospitalName:"Virtua Our Lady of Lourdes Hospital",name:"OLLH OR",fullName:"Our Lady of Lourdes Operating Room",utilization:77.3,primeTimeUtilization:83.1,nonPrimeTimeUtilization:49.5,totalCases:1320,averageCaseDuration:138,averageTurnoverTime:32,casesPerDay:5.7,rooms:[{id:"OLOR01",name:"VH OLLH OR 01",room:"VH OLLH OR 01",utilization:85.2,primeTimeUtilization:89.7,nonPrimeTimeUtilization:54.8},{id:"OLOR02",name:"VH OLLH OR 02",room:"VH OLLH OR 02",utilization:82.4,primeTimeUtilization:87.1,nonPrimeTimeUtilization:52.6}]}},specialties:{"Orthopaedic Surgery":{utilization:79.8,primeTimeUtilization:85.5,nonPrimeTimeUtilization:51.7,totalCases:378,averageCaseDuration:145,averageTurnoverTime:36},"Cardiac Surgery":{utilization:82.3,primeTimeUtilization:87.6,nonPrimeTimeUtilization:53.4,totalCases:245,averageCaseDuration:210,averageTurnoverTime:42},"General Surgery":{utilization:75.1,primeTimeUtilization:81.3,nonPrimeTimeUtilization:47.2,totalCases:356,averageCaseDuration:132,averageTurnoverTime:32},Neurosurgery:{utilization:81.2,primeTimeUtilization:86.7,nonPrimeTimeUtilization:52.8,totalCases:198,averageCaseDuration:225,averageTurnoverTime:45}},providers:{"abraham-john-a":{id:"abraham-john-a",name:"ABRAHAM, JOHN A",group:"Virtua Orthopaedics & Spine",title:"MD",specialty:"Orthopaedic Surgery"},"rodriguez-arthur-j":{id:"rodriguez-arthur-j",name:"RODRIGUEZ, ARTHUR J",group:"Virtua Cardiovascular Surgery",title:"MD",specialty:"Cardiac Surgery"},"smith-robert-j":{id:"smith-robert-j",name:"SMITH, ROBERT J",group:"Virtua Surgical Group",title:"MD",specialty:"General Surgery"},"rosenberg-william-s":{id:"rosenberg-william-s",name:"ROSENBERG, WILLIAM S",group:"Virtua Brain & Spine Institute",title:"MD",specialty:"Neurosurgery"}},trends:{"MARH OR":{utilization:[{month:"Oct 2024",value:72.8},{month:"Nov 2024",value:73.5},{month:"Dec 2024",value:75.1}]},"MEMH OR":{utilization:[{month:"Oct 2024",value:74.3},{month:"Nov 2024",value:75},{month:"Dec 2024",value:76.4}]},"VORH OR":{utilization:[{month:"Oct 2024",value:69.7},{month:"Nov 2024",value:70.4},{month:"Dec 2024",value:71.8}]},"OLLH OR":{utilization:[{month:"Oct 2024",value:76.5},{month:"Nov 2024",value:77.2},{month:"Dec 2024",value:78.3}]}},locationMetrics:{"MARH OR":{opportunity:{utilizationGap:1.2,potentialAdditionalCases:28,potentialRevenue:14e4,targetUtilization:75},efficiency:{efficiencyRatio:79.5,casesPerDay:5.2,turnoverTime:34,caseDuration:132}},"MEMH OR":{opportunity:{utilizationGap:0,potentialAdditionalCases:0,potentialRevenue:0,targetUtilization:75},efficiency:{efficiencyRatio:80.7,casesPerDay:5.4,turnoverTime:31,caseDuration:130}},"VORH OR":{opportunity:{utilizationGap:4.4,potentialAdditionalCases:92,potentialRevenue:46e4,targetUtilization:75},efficiency:{efficiencyRatio:80.6,casesPerDay:5,turnoverTime:30,caseDuration:125}},"OLLH OR":{opportunity:{utilizationGap:0,potentialAdditionalCases:0,potentialRevenue:0,targetUtilization:75},efficiency:{efficiencyRatio:82.3,casesPerDay:5.7,turnoverTime:32,caseDuration:138}}}},le=(a={},o=!0)=>{const[i,u]=g.useState(null),[s,d]=g.useState(o),[n,r]=g.useState(null),l=g.useCallback(async()=>{d(!0),r(null);try{const c=t(se,a);u(c)}catch(c){console.error("Error loading OR utilization data:",c),r({message:"Failed to load OR utilization data",timestamp:new Date().toISOString()})}finally{d(!1)}},[a]);g.useEffect(()=>{o&&l()},[o,l]);const t=(c,f)=>{const{selectedHospital:m,selectedLocation:h,selectedSpecialty:k,selectedSurgeon:j}=f||{},N={...c};if(m||h){const b={};Object.entries(c.locations||{}).forEach(([L,U])=>{let R=!0;m&&U.hospitalId!==m&&(R=!1),h&&L!==h&&(R=!1),R&&(b[L]=U)}),N.locations=b}if(k){const b={};c.specialties&&c.specialties[k]&&(b[k]=c.specialties[k]),N.specialties=b}if(j){const b={};c.providers&&c.providers[j]&&(b[j]=c.providers[j]),N.providers=b}return N};return{data:i,isLoading:s,error:n,refresh:l,derivedMetrics:(()=>{if(!i||!i.locations)return null;let c=null;return a.selectedLocation?c=a.selectedLocation:a.selectedHospital?c=Object.keys(i.locations).find(f=>i.locations[f].hospitalId===a.selectedHospital):c=Object.keys(i.locations)[0],!c||!i.locationMetrics||!i.locationMetrics[c]?null:{efficiencyRatio:i.locationMetrics[c].efficiency.efficiencyRatio,opportunity:i.locationMetrics[c].opportunity}})(),hasData:!!i&&Object.keys(i.locations||{}).length>0}},V=({efficiencyRatio:a,casesPerDay:o,turnoverTime:i,caseDuration:u,className:s=""})=>{const d=a?`${a.toFixed(1)}%`:"N/A",n=o?o.toFixed(1):"N/A",r=i?`${i} min`:"N/A",l=u?`${u} min`:"N/A",p=(c=>c?c>=85?"text-green-500":c>=75?"text-blue-500":c>=65?"text-yellow-500":"text-red-500":"text-gray-500")(a);return e.jsxs(z,{className:`healthcare-card ${s}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-healthcare-primary dark:text-healthcare-primary-dark"}),e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Efficiency Metrics"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(O,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Efficiency Ratio"})]}),e.jsx("div",{className:`text-2xl font-bold ${p}`,children:d}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Case time / (Case time + Turnover)"})]}),e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(I,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Cases Per Day"})]}),e.jsx("div",{className:"text-2xl font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:n}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Average per room"})]}),e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(w,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Avg Turnover Time"})]}),e.jsx("div",{className:"text-2xl font-bold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:r}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Time between cases"})]}),e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(w,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Avg Case Duration"})]}),e.jsx("div",{className:"text-2xl font-bold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:l}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Time in OR"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-healthcare-border dark:border-healthcare-border-dark",children:[e.jsx("h4",{className:"text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2",children:"Efficiency Insights"}),e.jsxs("ul",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Reducing turnover time by 5 minutes could increase efficiency ratio by approximately 2-3%."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Industry benchmark for efficiency ratio is 80-85% for similar facilities."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Consider parallel processing for room preparation to reduce turnover time."})]})]})]})]})};V.propTypes={efficiencyRatio:x.number,casesPerDay:x.number,turnoverTime:x.number,caseDuration:x.number,className:x.string};const E=({utilizationGap:a,potentialAdditionalCases:o,targetUtilization:i,currentUtilization:u,className:s=""})=>{const d=a?`${a.toFixed(1)}%`:"0%",n=u?`${u.toFixed(1)}%`:"N/A",r=i?`${i.toFixed(1)}%`:"N/A",t=o*5e3,p=t?`$${(t/1e6).toFixed(1)}M`:"$0",f=(h=>!h||h<=0?"text-green-500":h<=5?"text-blue-500":h<=10?"text-yellow-500":"text-red-500")(a),m=u&&i?Math.min(100,u/i*100):0;return e.jsxs(z,{className:`healthcare-card ${s}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(H,{className:"h-5 w-5 mr-2 text-healthcare-primary dark:text-healthcare-primary-dark"}),e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Opportunity Assessment"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(O,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Utilization Gap"})]}),e.jsx("div",{className:`text-2xl font-bold ${f}`,children:d}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Target - Current"})]}),e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(w,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Potential Cases"})]}),e.jsx("div",{className:"text-2xl font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:o||0}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Additional cases per month"})]}),e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(q,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Potential Revenue"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-500",children:p}),e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mt-1",children:"Estimated annual impact"})]}),e.jsxs("div",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark p-3 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(H,{className:"h-4 w-4 mr-2 text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark"}),e.jsx("span",{className:"text-sm text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Progress to Target"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"text-lg font-bold text-healthcare-text-primary dark:text-healthcare-text-primary-dark mr-2",children:[n," / ",r]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:e.jsx("div",{className:"bg-healthcare-primary dark:bg-healthcare-primary-dark h-2.5 rounded-full",style:{width:`${m}%`}})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-healthcare-border dark:border-healthcare-border-dark",children:[e.jsx("h4",{className:"text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2",children:"Opportunity Insights"}),e.jsxs("ul",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:["Increasing utilization by just 5% could add ",Math.round(o*.5)," additional cases per month."]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Top-performing peer institutions achieve 80-85% utilization rates."})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Consider block time reallocation to optimize underutilized time slots."})]})]})]})]})};E.propTypes={utilizationGap:x.number,potentialAdditionalCases:x.number,targetUtilization:x.number,currentUtilization:x.number,className:x.string};const B=({trendsData:a=[],comparisonTrendsData:o=[],showComparison:i=!1,className:u=""})=>{const s=g.useMemo(()=>Array.isArray(a)&&a.length>0,[a]),d=g.useMemo(()=>{if(!s)return[{id:"No Data",data:[]}];try{const m=a.map(j=>!j||typeof j!="object"?(console.warn("Invalid trend data point:",j),{x:"Unknown",y:0}):{x:j.date||"Unknown",y:typeof j.utilization=="number"?j.utilization:0}),h=Array.isArray(o)?o.map(j=>!j||typeof j!="object"?{x:"Unknown",y:0}:{x:j.date||"Unknown",y:typeof j.utilization=="number"?j.utilization:0}):[],k=[{id:"Current Period",data:m}];return i&&h.length>0&&k.push({id:"Comparison Period",data:h}),k}catch(m){return console.error("Error formatting chart data:",m),[{id:"Error",data:[]}]}},[a,o,i,s]),n=g.useMemo(()=>{if(!s)return 0;try{const m=a.filter(h=>h&&typeof h=="object"&&typeof h.utilization=="number");return m.length===0?0:m.reduce((h,k)=>h+k.utilization,0)/m.length}catch(m){return console.error("Error calculating average utilization:",m),0}},[a,s]),r=g.useMemo(()=>{if(!Array.isArray(o)||o.length===0)return 0;try{const m=o.filter(h=>h&&typeof h=="object"&&typeof h.utilization=="number");return m.length===0?0:m.reduce((h,k)=>h+k.utilization,0)/m.length}catch(m){return console.error("Error calculating comparison average utilization:",m),0}},[o]),l=g.useMemo(()=>r===0?0:(n-r)/r*100,[n,r]),p=(m=>m>5?"text-green-500":m>0?"text-blue-500":m>-5?"text-yellow-500":"text-red-500")(l),c=g.useMemo(()=>{if(!s)return null;try{const m=a.filter(h=>h&&typeof h=="object"&&typeof h.utilization=="number");return m.length===0?null:m.reduce((h,k)=>k.utilization>(h.utilization||0)?k:h,m[0])}catch(m){return console.error("Error finding peak day:",m),null}},[a,s]),f=g.useMemo(()=>{if(!s)return null;try{const m=a.filter(h=>h&&typeof h=="object"&&typeof h.utilization=="number");return m.length===0?null:m.reduce((h,k)=>k.utilization<(h.utilization||Number.MAX_VALUE)?k:h,m[0])}catch(m){return console.error("Error finding trough day:",m),null}},[a,s]);return e.jsxs(z,{className:`healthcare-card ${u}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-5 w-5 mr-2 text-healthcare-primary dark:text-healthcare-primary-dark"}),e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Utilization Trends"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Avg Utilization"}),e.jsxs("div",{className:"text-lg font-bold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:[n.toFixed(1),"%"]})]}),i&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"vs. Comparison"}),e.jsxs("div",{className:`text-lg font-bold ${p}`,children:[l>0?"+":"",l.toFixed(1),"%"]})]})]})]}),e.jsx("div",{className:"h-80",children:s?e.jsx(P,{children:e.jsx(C,{data:d,margin:{top:10,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Date",legendOffset:40,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Utilization (%)",legendOffset:-50,legendPosition:"middle"},colors:{scheme:"category10"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)"}]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(K,{className:"h-12 w-12 text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No Trend Data Available"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center max-w-md",children:"There is no utilization trend data available for the selected filters. Try selecting a different time period or location."})]})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-healthcare-border dark:border-healthcare-border-dark",children:[e.jsxs("h4",{className:"text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2 flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Trend Insights"]}),s?e.jsxs("ul",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark space-y-1",children:[c&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:["Peak utilization of ",c.utilization.toFixed(1),"% occurred on ",c.date,"."]})]}),f&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:["Lowest utilization of ",f.utilization.toFixed(1),"% occurred on ",f.date,"."]})]}),i&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:l>0?`Utilization has improved by ${l.toFixed(1)}% compared to the previous period.`:`Utilization has decreased by ${Math.abs(l).toFixed(1)}% compared to the previous period.`})]})]}):e.jsx("p",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark italic",children:"No insights available due to insufficient data."})]})]})};B.propTypes={trendsData:x.arrayOf(x.shape({date:x.string.isRequired,utilization:x.number})),comparisonTrendsData:x.arrayOf(x.shape({date:x.string.isRequired,utilization:x.number})),showComparison:x.bool,className:x.string};const $=({specialtyData:a={},className:o=""})=>{const i=g.useMemo(()=>Object.entries(a).map(([n,r])=>({id:n,label:n,value:r.totalCases||0})).sort((n,r)=>r.value-n.value),[a]),u=g.useMemo(()=>i.reduce((d,n)=>d+n.value,0),[i]),s=g.useMemo(()=>i.map(d=>({specialty:d.label,cases:d.value,percentage:u>0?d.value/u*100:0})),[i,u]);return e.jsxs(z,{className:`healthcare-card ${o}`,children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(re,{className:"h-5 w-5 mr-2 text-healthcare-primary dark:text-healthcare-primary-dark"}),e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Specialty Distribution"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64",children:e.jsx(P,{children:e.jsx(D,{data:i,margin:{top:10,right:10,bottom:10,left:10},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:"#333333",arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},legends:[]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:[e.jsx("thead",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark uppercase bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-2",children:"Specialty"}),e.jsx("th",{scope:"col",className:"px-4 py-2 text-right",children:"Cases"}),e.jsx("th",{scope:"col",className:"px-4 py-2 text-right",children:"%"})]})}),e.jsxs("tbody",{children:[s.map((d,n)=>e.jsxs("tr",{className:`border-b border-healthcare-border dark:border-healthcare-border-dark ${n%2===0?"":"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark"}`,children:[e.jsx("td",{className:"px-4 py-2 font-medium",children:d.specialty}),e.jsx("td",{className:"px-4 py-2 text-right",children:d.cases}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[d.percentage.toFixed(1),"%"]})]},d.specialty)),e.jsxs("tr",{className:"bg-healthcare-surface-hover dark:bg-healthcare-surface-hover-dark font-medium",children:[e.jsx("td",{className:"px-4 py-2",children:"Total"}),e.jsx("td",{className:"px-4 py-2 text-right",children:u}),e.jsx("td",{className:"px-4 py-2 text-right",children:"100%"})]})]})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-healthcare-border dark:border-healthcare-border-dark",children:[e.jsxs("h4",{className:"text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2 flex items-center",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Distribution Insights"]}),e.jsxs("ul",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark space-y-1",children:[i.length>0&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:[i[0].label," represents the highest volume specialty with ",i[0].value," cases (",(i[0].value/u*100).toFixed(1),"% of total)."]})]}),i.length>2&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:["Top 3 specialties account for ",((i[0].value+i[1].value+i[2].value)/u*100).toFixed(1),"% of total case volume."]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Consider specialty-specific optimization strategies for high-volume services."})]})]})]})]})};$.propTypes={specialtyData:x.object,className:x.string};const W=({roomData:a=[],className:o=""})=>{const i=g.useMemo(()=>Array.isArray(a)?a.map(t=>!t||typeof t!="object"?null:{room:t.room||t.name||"Unknown Room",utilization:t.utilization||0,primeTimeUtilization:t.primeTimeUtilization||0,nonPrimeTimeUtilization:t.nonPrimeTimeUtilization||0}).filter(Boolean).sort((t,p)=>p.utilization-t.utilization):[],[a]),u=g.useMemo(()=>!i||i.length===0?0:i.reduce((t,p)=>t+(p.utilization||0),0)/i.length,[i]),s=g.useMemo(()=>!i||i.length===0?0:i.reduce((t,p)=>t+(p.primeTimeUtilization||0),0)/i.length,[i]),d=g.useMemo(()=>!i||i.length===0?[]:i.map(t=>({room:typeof t.room=="string"?t.room.replace(/VH /g,"").replace(/ OR /g," "):"Unknown Room",Overall:t.utilization||0,"Prime Time":t.primeTimeUtilization||0,"Non-Prime Time":t.nonPrimeTimeUtilization||0})),[i]),n=t=>t>=80?"text-green-500":t>=70?"text-blue-500":t>=60?"text-yellow-500":"text-red-500",r=n(u),l=n(s);return!i||i.length===0?e.jsxs(z,{className:`healthcare-card ${o}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-healthcare-primary dark:text-healthcare-primary-dark"}),e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Room Utilization"})]})}),e.jsx("div",{className:"flex justify-center items-center h-80",children:e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"No room utilization data available."})})]}):e.jsxs(z,{className:`healthcare-card ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-healthcare-primary dark:text-healthcare-primary-dark"}),e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Room Utilization"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Avg Utilization"}),e.jsxs("div",{className:`text-lg font-bold ${r}`,children:[u.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark",children:"Avg Prime Time"}),e.jsxs("div",{className:`text-lg font-bold ${l}`,children:[s.toFixed(1),"%"]})]})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(P,{children:e.jsx(v,{data:d,keys:["Overall","Prime Time","Non-Prime Time"],indexBy:"room",margin:{top:10,right:130,bottom:50,left:60},padding:.3,groupMode:"grouped",layout:"vertical",colorScheme:"mixed",axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Room",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Utilization (%)",legendPosition:"middle",legendOffset:-50},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20}],animate:!0,motionStiffness:90,motionDamping:15})})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-healthcare-border dark:border-healthcare-border-dark",children:[e.jsxs("h4",{className:"text-sm font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2 flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Room Utilization Insights"]}),e.jsxs("ul",{className:"text-xs text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark space-y-1",children:[i.length>0&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:[typeof i[0].room=="string"?i[0].room.replace(/VH /g,""):"Top room"," has the highest utilization at ",i[0].utilization.toFixed(1),"%, ",(i[0].utilization-u).toFixed(1),"% above average."]})]}),i.length>1&&e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsxs("span",{children:["The difference between highest and lowest utilized rooms is ",(i[0].utilization-i[i.length-1].utilization).toFixed(1),"%."]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-healthcare-primary dark:bg-healthcare-primary-dark mt-1.5 mr-2"}),e.jsx("span",{children:"Consider rebalancing case assignments to improve utilization across all rooms."})]})]})]})]})};W.propTypes={roomData:x.arrayOf(x.shape({room:x.string,name:x.string,utilization:x.number,primeTimeUtilization:x.number,nonPrimeTimeUtilization:x.number})),className:x.string};const M=({data:a,derivedMetrics:o})=>{var t,p,c;const i=()=>!a||!a.locations?null:a.locations[Object.keys(a.locations)[0]],u=()=>{const f=i();return f?f.fullName||f.name:"All Locations"},s=i(),d=o!=null&&o.efficiencyRatio?{efficiencyRatio:o.efficiencyRatio,casesPerDay:(s==null?void 0:s.casesPerDay)||0,turnoverTime:(s==null?void 0:s.averageTurnoverTime)||0,caseDuration:(s==null?void 0:s.averageCaseDuration)||0}:null,n=o!=null&&o.opportunity?{utilizationGap:o.opportunity.utilizationGap,potentialAdditionalCases:o.opportunity.potentialAdditionalCases,targetUtilization:o.opportunity.targetUtilization,currentUtilization:(s==null?void 0:s.utilization)||0}:null,r=((c=(p=(t=a==null?void 0:a.trends)==null?void 0:t[Object.keys(a.trends)[0]])==null?void 0:p.utilization)==null?void 0:c.map(f=>({date:f.month,utilization:f.value})))||[],l=(s==null?void 0:s.rooms)||[];return e.jsx("div",{children:e.jsxs(y,{title:"OR Utilization Overview",className:"mb-6",children:[e.jsxs("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:["Comprehensive view of operating room utilization metrics and opportunities for ",u(),"."]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[d&&e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Efficiency Metrics",children:e.jsx(V,{...d})}),n&&e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Opportunity Metrics",children:e.jsx(E,{...n})})]}),e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Utilization Trends",className:"mb-6",children:e.jsx(B,{trendsData:r,comparisonTrendsData:[],showComparison:!1})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Specialty Distribution",children:e.jsx($,{specialtyData:(a==null?void 0:a.specialties)||{}})}),e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Room Utilization",children:e.jsx(W,{roomData:l})})]})]})})},oe=[{date:"2024-01",utilization:.72},{date:"2024-02",utilization:.75},{date:"2024-03",utilization:.73},{date:"2024-04",utilization:.78},{date:"2024-05",utilization:.8},{date:"2024-06",utilization:.82},{date:"2024-07",utilization:.79},{date:"2024-08",utilization:.77},{date:"2024-09",utilization:.81},{date:"2024-10",utilization:.83},{date:"2024-11",utilization:.84},{date:"2024-12",utilization:.82}],ne=[{date:"2023-01",utilization:.68},{date:"2023-02",utilization:.7},{date:"2023-03",utilization:.69},{date:"2023-04",utilization:.72},{date:"2023-05",utilization:.74},{date:"2023-06",utilization:.76},{date:"2023-07",utilization:.73},{date:"2023-08",utilization:.71},{date:"2023-09",utilization:.75},{date:"2023-10",utilization:.77},{date:"2023-11",utilization:.78},{date:"2023-12",utilization:.76}],ce=[{day:"Monday",utilization:.82,cases:24},{day:"Tuesday",utilization:.87,cases:26},{day:"Wednesday",utilization:.85,cases:25},{day:"Thursday",utilization:.82,cases:23},{day:"Friday",utilization:.78,cases:21},{day:"Saturday",utilization:.65,cases:12},{day:"Sunday",utilization:.45,cases:8}],de=[{hour:"07:00",utilization:.65},{hour:"08:00",utilization:.85},{hour:"09:00",utilization:.92},{hour:"10:00",utilization:.95},{hour:"11:00",utilization:.93},{hour:"12:00",utilization:.75},{hour:"13:00",utilization:.88},{hour:"14:00",utilization:.9},{hour:"15:00",utilization:.87},{hour:"16:00",utilization:.82},{hour:"17:00",utilization:.75},{hour:"18:00",utilization:.6},{hour:"19:00",utilization:.45}],me=[{id:"OR-01",name:"OR 1",utilization:.88,cases:120,turnoverTime:32},{id:"OR-02",name:"OR 2",utilization:.82,cases:115,turnoverTime:28},{id:"OR-03",name:"OR 3",utilization:.91,cases:125,turnoverTime:25},{id:"OR-04",name:"OR 4",utilization:.75,cases:95,turnoverTime:35},{id:"OR-05",name:"OR 5",utilization:.79,cases:105,turnoverTime:30},{id:"OR-06",name:"OR 6",utilization:.86,cases:118,turnoverTime:27},{id:"OR-07",name:"OR 7",utilization:.72,cases:90,turnoverTime:38},{id:"OR-08",name:"OR 8",utilization:.84,cases:110,turnoverTime:29}],he=[{room:"OR 1",actual:32,benchmark:25},{room:"OR 2",actual:28,benchmark:25},{room:"OR 3",actual:25,benchmark:25},{room:"OR 4",actual:35,benchmark:25},{room:"OR 5",actual:30,benchmark:25},{room:"OR 6",actual:27,benchmark:25},{room:"OR 7",actual:38,benchmark:25},{room:"OR 8",actual:29,benchmark:25}],S={Orthopedics:{cases:245,utilization:.87,turnoverTime:29,caseDuration:118},"General Surgery":{cases:210,utilization:.82,turnoverTime:32,caseDuration:95},Cardiology:{cases:180,utilization:.89,turnoverTime:27,caseDuration:142},Neurosurgery:{cases:120,utilization:.85,turnoverTime:34,caseDuration:187},ENT:{cases:150,utilization:.78,turnoverTime:28,caseDuration:68},Urology:{cases:135,utilization:.76,turnoverTime:31,caseDuration:76},"Plastic Surgery":{cases:95,utilization:.72,turnoverTime:33,caseDuration:103},"OB/GYN":{cases:165,utilization:.81,turnoverTime:31,caseDuration:82}},ue=[{specialty:"Orthopedics",scheduled:120,actual:132,variance:10},{specialty:"General Surgery",scheduled:95,actual:102,variance:7.4},{specialty:"Cardiology",scheduled:150,actual:158,variance:5.3},{specialty:"Neurosurgery",scheduled:180,actual:205,variance:13.9},{specialty:"ENT",scheduled:75,actual:72,variance:-4},{specialty:"Urology",scheduled:90,actual:98,variance:8.9},{specialty:"Plastic Surgery",scheduled:110,actual:118,variance:7.3},{specialty:"OB/GYN",scheduled:85,actual:92,variance:8.2}],xe=[{specialty:"Orthopedics",allocated:120,utilized:90,opportunity:30},{specialty:"Cardiology",allocated:100,utilized:85,opportunity:15},{specialty:"Neurology",allocated:80,utilized:60,opportunity:20},{specialty:"General Surgery",allocated:150,utilized:120,opportunity:30},{specialty:"ENT",allocated:70,utilized:45,opportunity:25},{specialty:"Urology",allocated:60,utilized:50,opportunity:10}],pe=[{category:"First Case Delay",current:18,benchmark:10,opportunity:8},{category:"Turnover Time",current:35,benchmark:25,opportunity:10},{category:"Scheduling Accuracy",current:75,benchmark:90,opportunity:15},{category:"Cancellation Rate",current:12,benchmark:5,opportunity:7},{category:"Late Starts",current:22,benchmark:12,opportunity:10}],ge=[{category:"Current Revenue",value:25e6},{category:"Current Costs",value:18e6},{category:"Current Margin",value:7e6},{category:"Potential Additional Revenue",value:45e5},{category:"Potential Cost Savings",value:12e5},{category:"Potential Margin Improvement",value:57e5}],F=[{room:"OR 1","07:00":.5,"08:00":.9,"09:00":.95,"10:00":.95,"11:00":.9,"12:00":.7,"13:00":.85,"14:00":.9,"15:00":.85,"16:00":.8,"17:00":.7,"18:00":.5},{room:"OR 2","07:00":.6,"08:00":.85,"09:00":.9,"10:00":.9,"11:00":.85,"12:00":.75,"13:00":.8,"14:00":.85,"15:00":.8,"16:00":.75,"17:00":.65,"18:00":.45},{room:"OR 3","07:00":.7,"08:00":.95,"09:00":.98,"10:00":.98,"11:00":.95,"12:00":.8,"13:00":.9,"14:00":.95,"15:00":.9,"16:00":.85,"17:00":.75,"18:00":.55},{room:"OR 4","07:00":.45,"08:00":.8,"09:00":.85,"10:00":.85,"11:00":.8,"12:00":.65,"13:00":.75,"14:00":.8,"15:00":.75,"16:00":.7,"17:00":.6,"18:00":.4},{room:"OR 5","07:00":.5,"08:00":.85,"09:00":.9,"10:00":.9,"11:00":.85,"12:00":.7,"13:00":.8,"14:00":.85,"15:00":.8,"16:00":.75,"17:00":.65,"18:00":.45},{room:"OR 6","07:00":.65,"08:00":.9,"09:00":.95,"10:00":.95,"11:00":.9,"12:00":.75,"13:00":.85,"14:00":.9,"15:00":.85,"16:00":.8,"17:00":.7,"18:00":.5},{room:"OR 7","07:00":.4,"08:00":.75,"09:00":.8,"10:00":.8,"11:00":.75,"12:00":.6,"13:00":.7,"14:00":.75,"15:00":.7,"16:00":.65,"17:00":.55,"18:00":.35},{room:"OR 8","07:00":.55,"08:00":.85,"09:00":.9,"10:00":.9,"11:00":.85,"12:00":.7,"13:00":.8,"14:00":.85,"15:00":.8,"16:00":.75,"17:00":.65,"18:00":.45}],ye=({data:a})=>{const o=()=>!a||!a.locations?null:a.locations[Object.keys(a.locations)[0]],i=()=>{const n=o();return n?n.fullName||n.name:"All Locations"},u=()=>{var l,t,p;const n=(p=(t=(l=a==null?void 0:a.trends)==null?void 0:l[Object.keys(a.trends)[0]])==null?void 0:t.utilization)==null?void 0:p.map(c=>({date:c.month,utilization:c.value}));return[{id:"Current Year",data:((n==null?void 0:n.length)>0?n:oe).map(c=>({x:c.date,y:Math.round(c.utilization*100)}))},{id:"Previous Year",data:ne.map(c=>({x:c.date.replace("2023","2024"),y:Math.round(c.utilization*100)}))}]},s=()=>ce.map(n=>({name:n.day,utilization:Math.round(n.utilization*100)})),d=()=>[{id:"Utilization",data:de.map(n=>({x:n.hour,y:Math.round(n.utilization*100)}))}];return e.jsx("div",{children:e.jsxs(y,{title:`Utilization Trends: ${i()}`,className:"mb-6",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Historical trends and comparative analysis of OR utilization, showing patterns over time."}),e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Monthly Utilization Trends",className:"mb-6",children:e.jsx("div",{className:"h-80",children:e.jsx(C,{data:u(),margin:{top:20,right:20,bottom:60,left:60},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100},axisBottom:{tickRotation:-45,legend:"Month",legendOffset:50,legendPosition:"middle"},axisLeft:{legend:"Utilization (%)",legendOffset:-40,legendPosition:"middle"},enablePoints:!0,pointSize:8,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},enableSlices:"x",useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:0,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,symbolSize:12,symbolShape:"circle"}]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Utilization by Day of Week",children:e.jsx("div",{className:"h-64",children:e.jsx(v,{data:s(),keys:["utilization"],indexBy:"name",margin:{top:20,right:20,bottom:50,left:60},padding:.3,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Day of Week",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Utilization (%)",legendPosition:"middle",legendOffset:-50},labelFormat:n=>`${n}%`,colorScheme:"primary",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15})})}),e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Utilization by Time of Day",children:e.jsx("div",{className:"h-64",children:e.jsx(C,{data:d(),margin:{top:20,right:20,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100},axisBottom:{tickRotation:-45,legend:"Hour",legendOffset:40,legendPosition:"middle"},axisLeft:{legend:"Utilization (%)",legendOffset:-50,legendPosition:"middle"},enableArea:!0,areaOpacity:.15,enablePoints:!0,pointSize:8,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},enableSlices:"x",useMesh:!0,colorScheme:"primary"})})})]})]})})},fe=({data:a})=>{const o=()=>!a||!a.locations?null:a.locations[Object.keys(a.locations)[0]],i=()=>{const r=o();return r?r.fullName||r.name:"All Locations"},u=()=>{const r=o(),l=(r==null?void 0:r.rooms)||[];return l.length>0?l:me},s=()=>u().map(l=>{const t=l.utilization!==void 0&&!isNaN(l.utilization)?Math.round(l.utilization*100):0;return{name:l.name||"Unknown Room",utilization:t}}),d=()=>he.map(r=>{const l=r.actual!==void 0&&!isNaN(r.actual)?r.actual:0,t=r.benchmark!==void 0&&!isNaN(r.benchmark)?r.benchmark:0;return{name:r.room||"Unknown Room",actual:l,benchmark:t}}),n=()=>u().map(l=>({name:l.name||"Unknown Room",cases:l.cases!==void 0&&!isNaN(l.cases)?l.cases:0}));return e.jsx("div",{children:e.jsxs(y,{title:`Room Analysis: ${i()}`,className:"mb-6",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Detailed analysis of individual operating room performance and utilization metrics."}),e.jsx(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Room Utilization Comparison",className:"mb-6",children:e.jsx("div",{className:"h-64",children:e.jsx(v,{data:s(),keys:["utilization"],indexBy:"name",margin:{top:20,right:20,bottom:50,left:60},padding:.3,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Operating Room",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Utilization (%)",legendPosition:"middle",legendOffset:-50},labelFormat:r=>`${r}%`,colorScheme:"primary",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Room Turnover Analysis",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Analysis of room turnover times compared to benchmarks, highlighting opportunities for improvement."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:d(),keys:["actual","benchmark"],indexBy:"name",margin:{top:20,right:20,bottom:50,left:60},padding:.3,groupMode:"grouped",axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Operating Room",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Minutes",legendPosition:"middle",legendOffset:-50},labelFormat:r=>`${r} min`,colorScheme:"mixed",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20}],animate:!0,motionStiffness:90,motionDamping:15})})]}),e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Cases Per Room",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Analysis of case volume by room, showing which rooms are handling the most cases."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:n(),keys:["cases"],indexBy:"name",margin:{top:20,right:20,bottom:50,left:60},padding:.3,colors:{scheme:"blues"},axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Operating Room",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Number of Cases",legendPosition:"middle",legendOffset:-50},colorScheme:"success",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15})})]})]}),e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"strong",title:"Room Utilization Heatmap",className:"mt-6",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Heatmap showing room utilization patterns across different times of day."}),e.jsx("div",{className:"h-80 overflow-x-auto",children:e.jsx("div",{className:"min-w-full",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Room"}),Object.keys(F[0]).filter(r=>r!=="room").map(r=>e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:r},r))]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:F.map((r,l)=>e.jsxs("tr",{className:l%2===0?"bg-white dark:bg-gray-900":"bg-gray-50 dark:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:r.room}),Object.keys(r).filter(t=>t!=="room").map(t=>{const p=r[t]!==void 0&&!isNaN(r[t])?r[t]:0;let c="bg-green-100 dark:bg-green-900",f="text-green-800 dark:text-green-200";return p<.5?(c="bg-red-100 dark:bg-red-900",f="text-red-800 dark:text-red-200"):p<.7&&(c="bg-yellow-100 dark:bg-yellow-900",f="text-yellow-800 dark:text-yellow-200"),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${c} ${f}`,children:[Math.round(p*100),"%"]})},t)})]},l))})]})})})]})]})})},be=({data:a})=>{const o=()=>!a||!a.locations?null:a.locations[Object.keys(a.locations)[0]],i=()=>{const r=o();return r?r.fullName||r.name:"All Locations"},u=()=>{const r=(a==null?void 0:a.specialties)||S;return Object.entries(r).map(([l,t])=>({id:l,label:l,value:t.cases!==void 0&&!isNaN(t.cases)?t.cases:0}))},s=()=>{const r=(a==null?void 0:a.specialties)||S;return Object.entries(r).map(([l,t])=>({specialty:l,utilization:t.utilization!==void 0&&!isNaN(t.utilization)?Math.round(t.utilization*100):0}))},d=()=>{const r=(a==null?void 0:a.specialties)||S;return Object.entries(r).map(([l,t])=>({specialty:l,turnoverTime:t.turnoverTime!==void 0&&!isNaN(t.turnoverTime)?t.turnoverTime:0}))},n=()=>ue.map(r=>({specialty:r.specialty,scheduled:r.scheduled!==void 0&&!isNaN(r.scheduled)?r.scheduled:0,actual:r.actual!==void 0&&!isNaN(r.actual)?r.actual:0}));return e.jsx("div",{children:e.jsxs(y,{title:`Specialty Analysis: ${i()}`,className:"mb-6",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Utilization metrics broken down by surgical specialty, showing performance and opportunities by service line."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Specialty Distribution",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Distribution of cases by surgical specialty, showing the relative volume of each service line."}),e.jsx("div",{className:"h-64",children:e.jsx(D,{data:u(),margin:{top:20,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:{from:"color",modifiers:[]},arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},legends:[{anchor:"right",direction:"column",justify:!1,translateX:0,translateY:0,itemsSpacing:0,itemWidth:100,itemHeight:20,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle"}]})})]}),e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Specialty Utilization",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Utilization rates by specialty, showing which service lines are most efficiently using their allocated time."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:s(),keys:["utilization"],indexBy:"specialty",margin:{top:20,right:20,bottom:50,left:60},padding:.3,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Specialty",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Utilization (%)",legendPosition:"middle",legendOffset:-50},labelFormat:r=>`${r}%`,colorScheme:"primary",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Specialty Turnover Times",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Average turnover times by specialty, highlighting opportunities for process improvement."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:d(),keys:["turnoverTime"],indexBy:"specialty",margin:{top:20,right:20,bottom:50,left:60},padding:.3,axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Specialty",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Minutes",legendPosition:"middle",legendOffset:-50},labelFormat:r=>`${r} min`,colorScheme:"secondary",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15})})]}),e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Specialty Case Duration Accuracy",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Comparison of scheduled vs. actual case durations by specialty, showing scheduling accuracy."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:n(),keys:["scheduled","actual"],indexBy:"specialty",margin:{top:20,right:20,bottom:50,left:60},padding:.3,groupMode:"grouped",axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Specialty",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Minutes",legendPosition:"middle",legendOffset:-50},colorScheme:"mixed",labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20}],animate:!0,motionStiffness:90,motionDamping:15})})]})]})]})})},ke=({data:a,derivedMetrics:o})=>{const i=()=>!a||!a.locations?null:a.locations[Object.keys(a.locations)[0]],u=()=>{const t=i();return t?t.fullName||t.name:"All Locations"},s=i(),d=o!=null&&o.opportunity?{utilizationGap:o.opportunity.utilizationGap,potentialAdditionalCases:o.opportunity.potentialAdditionalCases,targetUtilization:o.opportunity.targetUtilization,currentUtilization:(s==null?void 0:s.utilization)||0}:null,n=()=>xe.map(t=>({specialty:t.specialty,allocated:t.allocated,utilized:t.utilized,opportunity:t.opportunity})),r=()=>pe.map(t=>({category:t.category,current:t.current,benchmark:t.benchmark,opportunity:t.opportunity})),l=()=>ge.map(t=>({id:t.category,label:t.category,value:t.value}));return e.jsx("div",{children:e.jsxs(y,{title:`Opportunity Analysis: ${u()}`,className:"mb-6",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Identify opportunities to improve OR utilization and efficiency, with actionable recommendations."}),e.jsx(y,{isSubpanel:!0,dropLightIntensity:"strong",title:"Utilization Improvement Opportunities",className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2",children:"Current Utilization"}),e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsxs("span",{className:"text-4xl font-bold text-healthcare-primary dark:text-healthcare-primary-dark",children:[Math.round(((d==null?void 0:d.currentUtilization)||(s==null?void 0:s.utilization)||.75)*100),"%"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2",children:"Target Utilization"}),e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsxs("span",{className:"text-4xl font-bold text-healthcare-success dark:text-healthcare-success-dark",children:[Math.round(((d==null?void 0:d.targetUtilization)||.85)*100),"%"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-2",children:"Potential Additional Cases"}),e.jsx("div",{className:"flex items-center justify-center h-24",children:e.jsx("span",{className:"text-4xl font-bold text-healthcare-secondary dark:text-healthcare-secondary-dark",children:(d==null?void 0:d.potentialAdditionalCases)||120})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Block Time Optimization",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Analysis of block time allocation and utilization by specialty, highlighting opportunities for reallocation."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:n(),keys:["utilized","opportunity"],indexBy:"specialty",margin:{top:20,right:20,bottom:50,left:60},padding:.3,groupMode:"stacked",axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Specialty",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Hours",legendPosition:"middle",legendOffset:-50},colors:["#4C9AFF","#FF5630"],labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15})})]}),e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"medium",title:"Efficiency Improvement Opportunities",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Key metrics with improvement opportunities, comparing current performance to benchmarks."}),e.jsx("div",{className:"h-64",children:e.jsx(v,{data:r(),keys:["current","benchmark"],indexBy:"category",margin:{top:20,right:20,bottom:50,left:60},padding:.3,groupMode:"grouped",axisBottom:{tickSize:5,tickPadding:5,tickRotation:-45,legend:"Category",legendPosition:"middle",legendOffset:40},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Value",legendPosition:"middle",legendOffset:-50},colors:["#6554C0","#00B8D9"],labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20}],animate:!0,motionStiffness:90,motionDamping:15})})]})]}),e.jsxs(y,{isSubpanel:!0,dropLightIntensity:"strong",title:"Financial Impact Analysis",className:"mt-6",children:[e.jsx("p",{className:"text-healthcare-text-secondary dark:text-healthcare-text-secondary-dark mb-4",children:"Estimated financial impact of implementing recommended improvements."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64",children:e.jsx(D,{data:l().filter(t=>!t.id.includes("Potential")),margin:{top:20,right:20,bottom:20,left:20},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:{from:"color",modifiers:[]},arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},valueFormat:t=>`$${(t/1e6).toFixed(1)}M`,colors:["#36B37E","#FF5630","#00B8D9"]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-healthcare-text-primary dark:text-healthcare-text-primary-dark mb-4",children:"Potential Financial Benefits"}),e.jsxs("div",{className:"space-y-4",children:[l().filter(t=>t.id.includes("Potential")).map((t,p)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[e.jsx("h4",{className:"font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:t.label}),e.jsxs("p",{className:"text-2xl font-bold text-healthcare-success dark:text-healthcare-success-dark",children:["$",(t.value/1e6).toFixed(1),"M"]})]},p)),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[e.jsx("h4",{className:"font-medium text-healthcare-text-primary dark:text-healthcare-text-primary-dark",children:"Potential ROI"}),e.jsx("p",{className:"text-2xl font-bold text-healthcare-success dark:text-healthcare-success-dark",children:"81%"})]})]})]})]})]})]})})},je=({activeView:a})=>{const{selectedLocation:o,dateRange:i}=J(),[u,s]=g.useState(a||"overview"),[d,n]=g.useState(!1),[r,l]=g.useState({selectedHospital:"",selectedLocation:"",selectedSpecialty:"",selectedSurgeon:"",dateRange:i,showComparison:!1,comparisonDateRange:{startDate:new Date(2024,0,1),endDate:new Date(2024,5,30)}});g.useEffect(()=>{l(b=>({...b,dateRange:i}))},[i]),g.useEffect(()=>{a&&s(a)},[a]);const{data:t,isLoading:p,error:c,refresh:f,derivedMetrics:m,hasData:h}=le(r),k=b=>{l(b)},j=()=>{if(p)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-healthcare-primary dark:border-healthcare-primary-dark"})});if(c)return e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded relative",role:"alert",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading OR Utilization Data"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:c.message||"Failed to load OR utilization data. Please try again later."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>f(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Retry"})})]})]})});if(!h)return e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 text-yellow-700 dark:text-yellow-200 px-4 py-3 rounded relative",role:"alert",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No Data Available"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-200",children:"There is no OR utilization data available for the selected filters. Please try different filters or contact support if you believe this is an error."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>f(!0),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 dark:bg-yellow-800 dark:text-yellow-100 dark:hover:bg-yellow-700",children:"Refresh Data"})})]})]})});switch(u){case"overview":return e.jsx(M,{data:t,derivedMetrics:m});case"trends":return e.jsx(ye,{data:t});case"room":return e.jsx(fe,{data:t});case"specialty":return e.jsx(be,{data:t});case"opportunity":return e.jsx(ke,{data:t,derivedMetrics:m});default:return e.jsx(M,{data:t,derivedMetrics:m})}},N=()=>{n(!d)};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-4 md:hidden",children:e.jsx("button",{onClick:N,className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:d?"Hide Filters":"Show Filters"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-80 flex-shrink-0",children:e.jsx(A,{children:e.jsx(_,{locations:Object.values((t==null?void 0:t.locations)||{}).map(b=>({...b,name:b.name||b.fullName||"Unknown Location"})),services:Object.keys((t==null?void 0:t.specialties)||{}),providers:Object.values((t==null?void 0:t.providers)||{}).map(b=>({...b,id:b.id||"",name:b.name||"Unknown Provider",specialty:b.specialty||""})),onFilterChange:k,initialFilters:r,className:"sticky top-4"})})}),e.jsx("div",{className:"flex-grow",children:e.jsx(A,{children:e.jsx(ee,{mode:"wait",children:e.jsx(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"w-full",children:j()},u)})})})]})]})};function ve({auth:a}){const{url:o}=G(),u=new URLSearchParams(window.location.search).get("view")||"overview",[s,d]=g.useState(u);g.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("view")||"overview";d(t)},[o]);const n=l=>{d(l);const t=new URL(window.location);t.searchParams.set("view",l),window.history.pushState({},"",t)},r=[{title:"Overview",items:[{id:"overview",label:"Overview",icon:"carbon:analytics"},{id:"trends",label:"Trends",icon:"carbon:chart-line"}]},{title:"Analysis",items:[{id:"room",label:"Room Analysis",icon:"carbon:hospital"},{id:"specialty",label:"Specialty Analysis",icon:"mdi:stethoscope"}]},{title:"Opportunities",items:[{id:"opportunity",label:"Opportunity Analysis",icon:"carbon:idea"}]}];return e.jsxs(X,{auth:a,title:"OR Utilization",header:null,children:[e.jsx(Y,{title:"OR Utilization"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ae,{menuGroups:r,activeTab:s,onTabChange:n}),e.jsx(je,{activeView:s})]})]})}ve.propTypes={auth:x.shape({user:x.shape({id:x.number,name:x.string,email:x.string})})};export{ve as default};
